var _G=Object.create;var{getPrototypeOf:gG,defineProperty:C9,getOwnPropertyNames:bG}=Object;var yG=Object.prototype.hasOwnProperty;var B9=($,J,Q)=>{Q=$!=null?_G(gG($)):{};let q=J||!$||!$.__esModule?C9(Q,"default",{value:$,enumerable:!0}):Q;for(let X of bG($))if(!yG.call(q,X))C9(q,X,{get:()=>$[X],enumerable:!0});return q};var mG=($,J)=>()=>(J||$((J={exports:{}}).exports,J),J.exports);var JQ=mG((Z5,Nq)=>{Nq.exports=function $(J){if(typeof J==="number"&&isNaN(J))throw new Error("NaN is not allowed");if(typeof J==="number"&&!isFinite(J))throw new Error("Infinity is not allowed");if(J===null||typeof J!=="object")return JSON.stringify(J);if(J.toJSON instanceof Function)return $(J.toJSON());if(Array.isArray(J))return`[${J.reduce((X,Z,G)=>{return`${X}${G===0?"":","}${$(Z===void 0||typeof Z==="symbol"?null:Z)}`},"")}]`;return`{${Object.keys(J).sort().reduce((q,X)=>{if(J[X]===void 0||typeof J[X]==="symbol")return q;let Z=q.length===0?"":",";return`${q}${Z}${$(X)}:${$(J[X])}`},"")}}`}});class mJ{runAutoCopy(){document.querySelectorAll("[data-copy-from]").forEach(($)=>{if(!$.dataset.dirty){let J=$.dataset.copyFrom;if(J){let X=($.closest("tr")||document).querySelector(`[data-base-key="${J}"], [data-json-path="${J}"]`);if(X&&X.value!==$.value)$.value=X.value,$.dispatchEvent(new Event("input",{bubbles:!0}))}}})}recalculate(){document.querySelectorAll("[data-formula]").forEach(($)=>{let J=$.dataset.formula;if(!J)return;let Q=$.closest("tr"),q=$.closest("table"),X=(G)=>{let Y=0,U="none";if(Q){let W=`[data-base-key="${G}"], [data-json-path="${G}"]`,z=Q.querySelector(W);if(z){if(U="row-input",z.value!=="")Y=parseFloat(z.value)}}if(U==="none"){let W=document.querySelector(`[data-json-path="${G}"]`);if(W){if(U="static-input",W.value!=="")Y=parseFloat(W.value)}}return Y},Z=J.replace(/SUM\(([a-zA-Z0-9_\-\u0080-\uFFFF]+)\)/g,(G,Y)=>{let U=0,W=q||document,z=W.querySelectorAll(`[data-base-key="${Y}"], [data-json-path="${Y}"]`);if(z.length===0&&W!==document)z=document.querySelectorAll(`[data-base-key="${Y}"], [data-json-path="${Y}"]`);return z.forEach((M)=>{let O=parseFloat(M.value);if(!isNaN(O))U+=O}),U});Z=Z.replace(/([a-zA-Z_\u0080-\uFFFF][a-zA-Z0-9_\-\u0080-\uFFFF]*)/g,(G)=>{if(["Math","round","floor","ceil","abs","min","max"].includes(G))return G;return String(X(G))});try{let G=new Function("return "+Z)();if(typeof G==="number"&&!isNaN(G))$.value=Number.isInteger(G)?G:G.toFixed(0);else $.value=""}catch(G){console.error("Calc Error:",G),$.value="Err"}}),this.runAutoCopy()}}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Z$($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function Q8($,J=""){if(!Number.isSafeInteger($)||$<0){let Q=J&&`"${J}" `;throw new Error(`${Q}expected integer >= 0, got ${$}`)}}function c($,J,Q=""){let q=Z$($),X=$?.length,Z=J!==void 0;if(!q||Z&&X!==J){let G=Q&&`"${Q}" `,Y=Z?` of length ${J}`:"",U=q?`length=${X}`:`type=${typeof $}`;throw new Error(G+"expected Uint8Array"+Y+", got "+U)}return $}function m8($,J=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(J&&$.finished)throw new Error("Hash#digest() has already been called")}function h$($,J){c($,void 0,"digestInto() output");let Q=J.outputLen;if($.length<Q)throw new Error('"digestInto() output" expected to be of length >='+Q)}function u$($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function l0(...$){for(let J=0;J<$.length;J++)$[J].fill(0)}function p$($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function y0($,J){return $<<32-J|$>>>J}var hG=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function uG($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function pG($){for(let J=0;J<$.length;J++)$[J]=uG($[J]);return $}var hJ=hG?($)=>$:pG,L9=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),dG=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function h8($){if(c($),L9)return $.toHex();let J="";for(let Q=0;Q<$.length;Q++)J+=dG[$[Q]];return J}var J8={_0:48,_9:57,A:65,F:70,a:97,f:102};function I9($){if($>=J8._0&&$<=J8._9)return $-J8._0;if($>=J8.A&&$<=J8.F)return $-(J8.A-10);if($>=J8.a&&$<=J8.f)return $-(J8.a-10);return}function G$($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(L9)return Uint8Array.fromHex($);let J=$.length,Q=J/2;if(J%2)throw new Error("hex string expected, got unpadded hex of length "+J);let q=new Uint8Array(Q);for(let X=0,Z=0;X<Q;X++,Z+=2){let G=I9($.charCodeAt(Z)),Y=I9($.charCodeAt(Z+1));if(G===void 0||Y===void 0){let U=$[Z]+$[Z+1];throw new Error('hex string expected, got non-hex character "'+U+'" at index '+Z)}q[X]=G*16+Y}return q}function u8(...$){let J=0;for(let q=0;q<$.length;q++){let X=$[q];c(X),J+=X.length}let Q=new Uint8Array(J);for(let q=0,X=0;q<$.length;q++){let Z=$[q];Q.set(Z,X),X+=Z.length}return Q}function Y$($,J={}){let Q=(X,Z)=>$(Z).update(X).digest(),q=$(void 0);return Q.outputLen=q.outputLen,Q.blockLen=q.blockLen,Q.create=(X)=>$(X),Object.assign(Q,J),Object.freeze(Q)}function U$($=32){let J=typeof globalThis==="object"?globalThis.crypto:null;if(typeof J?.getRandomValues!=="function")throw new Error("crypto.getRandomValues must be defined");return J.getRandomValues(new Uint8Array($))}var w8=($)=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,$])});function T9($,J,Q){return $&J^~$&Q}function A9($,J,Q){return $&J^$&Q^J&Q}class d${blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor($,J,Q,q){this.blockLen=$,this.outputLen=J,this.padOffset=Q,this.isLE=q,this.buffer=new Uint8Array($),this.view=p$(this.buffer)}update($){m8(this),c($);let{view:J,buffer:Q,blockLen:q}=this,X=$.length;for(let Z=0;Z<X;){let G=Math.min(q-this.pos,X-Z);if(G===q){let Y=p$($);for(;q<=X-Z;Z+=q)this.process(Y,Z);continue}if(Q.set($.subarray(Z,Z+G),this.pos),this.pos+=G,Z+=G,this.pos===q)this.process(J,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){m8(this),h$($,this),this.finished=!0;let{buffer:J,view:Q,blockLen:q,isLE:X}=this,{pos:Z}=this;if(J[Z++]=128,l0(this.buffer.subarray(Z)),this.padOffset>q-Z)this.process(Q,0),Z=0;for(let z=Z;z<q;z++)J[z]=0;Q.setBigUint64(q-8,BigInt(this.length*8),X),this.process(Q,0);let G=p$($),Y=this.outputLen;if(Y%4)throw new Error("_sha2: outputLen must be aligned to 32bit");let U=Y/4,W=this.get();if(U>W.length)throw new Error("_sha2: outputLen bigger than state");for(let z=0;z<U;z++)G.setUint32(4*z,W[z],X)}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let Q=$.slice(0,J);return this.destroy(),Q}_cloneInto($){$||=new this.constructor,$.set(...this.get());let{blockLen:J,buffer:Q,length:q,finished:X,destroyed:Z,pos:G}=this;if($.destroyed=Z,$.finished=X,$.length=q,$.pos=G,q%J)$.buffer.set(Q);return $}clone(){return this._cloneInto()}}var q8=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),X8=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),U0=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),z0=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var c$=BigInt(4294967295),w9=BigInt(32);function cG($,J=!1){if(J)return{h:Number($&c$),l:Number($>>w9&c$)};return{h:Number($>>w9&c$)|0,l:Number($&c$)|0}}function l$($,J=!1){let Q=$.length,q=new Uint32Array(Q),X=new Uint32Array(Q);for(let Z=0;Z<Q;Z++){let{h:G,l:Y}=cG($[Z],J);[q[Z],X[Z]]=[G,Y]}return[q,X]}var uJ=($,J,Q)=>$>>>Q,pJ=($,J,Q)=>$<<32-Q|J>>>Q,E8=($,J,Q)=>$>>>Q|J<<32-Q,F8=($,J,Q)=>$<<32-Q|J>>>Q,z$=($,J,Q)=>$<<64-Q|J>>>Q-32,W$=($,J,Q)=>$>>>Q-32|J<<64-Q;var E9=($,J,Q)=>$<<Q|J>>>32-Q,F9=($,J,Q)=>J<<Q|$>>>32-Q,P9=($,J,Q)=>J<<Q-32|$>>>64-Q,f9=($,J,Q)=>$<<Q-32|J>>>64-Q;function i0($,J,Q,q){let X=(J>>>0)+(q>>>0);return{h:$+Q+(X/4294967296|0)|0,l:X|0}}var k9=($,J,Q)=>($>>>0)+(J>>>0)+(Q>>>0),S9=($,J,Q,q)=>J+Q+q+($/4294967296|0)|0,x9=($,J,Q,q)=>($>>>0)+(J>>>0)+(Q>>>0)+(q>>>0),v9=($,J,Q,q,X)=>J+Q+q+X+($/4294967296|0)|0,_9=($,J,Q,q,X)=>($>>>0)+(J>>>0)+(Q>>>0)+(q>>>0)+(X>>>0),g9=($,J,Q,q,X,Z)=>J+Q+q+X+Z+($/4294967296|0)|0;var iG=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),K8=new Uint32Array(64);class dJ extends d${constructor($){super(64,$,8,!1)}get(){let{A:$,B:J,C:Q,D:q,E:X,F:Z,G,H:Y}=this;return[$,J,Q,q,X,Z,G,Y]}set($,J,Q,q,X,Z,G,Y){this.A=$|0,this.B=J|0,this.C=Q|0,this.D=q|0,this.E=X|0,this.F=Z|0,this.G=G|0,this.H=Y|0}process($,J){for(let z=0;z<16;z++,J+=4)K8[z]=$.getUint32(J,!1);for(let z=16;z<64;z++){let M=K8[z-15],O=K8[z-2],N=y0(M,7)^y0(M,18)^M>>>3,j=y0(O,17)^y0(O,19)^O>>>10;K8[z]=j+K8[z-7]+N+K8[z-16]|0}let{A:Q,B:q,C:X,D:Z,E:G,F:Y,G:U,H:W}=this;for(let z=0;z<64;z++){let M=y0(G,6)^y0(G,11)^y0(G,25),O=W+M+T9(G,Y,U)+iG[z]+K8[z]|0,j=(y0(Q,2)^y0(Q,13)^y0(Q,22))+A9(Q,q,X)|0;W=U,U=Y,Y=G,G=Z+O|0,Z=X,X=q,q=Q,Q=O+j|0}Q=Q+this.A|0,q=q+this.B|0,X=X+this.C|0,Z=Z+this.D|0,G=G+this.E|0,Y=Y+this.F|0,U=U+this.G|0,W=W+this.H|0,this.set(Q,q,X,Z,G,Y,U,W)}roundClean(){l0(K8)}destroy(){this.set(0,0,0,0,0,0,0,0),l0(this.buffer)}}class oG extends dJ{A=q8[0]|0;B=q8[1]|0;C=q8[2]|0;D=q8[3]|0;E=q8[4]|0;F=q8[5]|0;G=q8[6]|0;H=q8[7]|0;constructor(){super(32)}}class nG extends dJ{A=X8[0]|0;B=X8[1]|0;C=X8[2]|0;D=X8[3]|0;E=X8[4]|0;F=X8[5]|0;G=X8[6]|0;H=X8[7]|0;constructor(){super(28)}}var b9=(()=>l$(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),rG=(()=>b9[0])(),sG=(()=>b9[1])(),O8=new Uint32Array(80),D8=new Uint32Array(80);class M$ extends d${constructor($){super(128,$,16,!1)}get(){let{Ah:$,Al:J,Bh:Q,Bl:q,Ch:X,Cl:Z,Dh:G,Dl:Y,Eh:U,El:W,Fh:z,Fl:M,Gh:O,Gl:N,Hh:j,Hl:E}=this;return[$,J,Q,q,X,Z,G,Y,U,W,z,M,O,N,j,E]}set($,J,Q,q,X,Z,G,Y,U,W,z,M,O,N,j,E){this.Ah=$|0,this.Al=J|0,this.Bh=Q|0,this.Bl=q|0,this.Ch=X|0,this.Cl=Z|0,this.Dh=G|0,this.Dl=Y|0,this.Eh=U|0,this.El=W|0,this.Fh=z|0,this.Fl=M|0,this.Gh=O|0,this.Gl=N|0,this.Hh=j|0,this.Hl=E|0}process($,J){for(let V=0;V<16;V++,J+=4)O8[V]=$.getUint32(J),D8[V]=$.getUint32(J+=4);for(let V=16;V<80;V++){let H=O8[V-15]|0,F=D8[V-15]|0,x=E8(H,F,1)^E8(H,F,8)^uJ(H,F,7),g=F8(H,F,1)^F8(H,F,8)^pJ(H,F,7),v=O8[V-2]|0,C=D8[V-2]|0,B=E8(v,C,19)^z$(v,C,61)^uJ(v,C,6),P=F8(v,C,19)^W$(v,C,61)^pJ(v,C,6),S=x9(g,P,D8[V-7],D8[V-16]),y=v9(S,x,B,O8[V-7],O8[V-16]);O8[V]=y|0,D8[V]=S|0}let{Ah:Q,Al:q,Bh:X,Bl:Z,Ch:G,Cl:Y,Dh:U,Dl:W,Eh:z,El:M,Fh:O,Fl:N,Gh:j,Gl:E,Hh:D,Hl:L}=this;for(let V=0;V<80;V++){let H=E8(z,M,14)^E8(z,M,18)^z$(z,M,41),F=F8(z,M,14)^F8(z,M,18)^W$(z,M,41),x=z&O^~z&j,g=M&N^~M&E,v=_9(L,F,g,sG[V],D8[V]),C=g9(v,D,H,x,rG[V],O8[V]),B=v|0,P=E8(Q,q,28)^z$(Q,q,34)^z$(Q,q,39),S=F8(Q,q,28)^W$(Q,q,34)^W$(Q,q,39),y=Q&X^Q&G^X&G,K=q&Z^q&Y^Z&Y;D=j|0,L=E|0,j=O|0,E=N|0,O=z|0,N=M|0,{h:z,l:M}=i0(U|0,W|0,C|0,B|0),U=G|0,W=Y|0,G=X|0,Y=Z|0,X=Q|0,Z=q|0;let A=k9(B,S,K);Q=S9(A,C,P,y),q=A|0}({h:Q,l:q}=i0(this.Ah|0,this.Al|0,Q|0,q|0)),{h:X,l:Z}=i0(this.Bh|0,this.Bl|0,X|0,Z|0),{h:G,l:Y}=i0(this.Ch|0,this.Cl|0,G|0,Y|0),{h:U,l:W}=i0(this.Dh|0,this.Dl|0,U|0,W|0),{h:z,l:M}=i0(this.Eh|0,this.El|0,z|0,M|0),{h:O,l:N}=i0(this.Fh|0,this.Fl|0,O|0,N|0),{h:j,l:E}=i0(this.Gh|0,this.Gl|0,j|0,E|0),{h:D,l:L}=i0(this.Hh|0,this.Hl|0,D|0,L|0),this.set(Q,q,X,Z,G,Y,U,W,z,M,O,N,j,E,D,L)}roundClean(){l0(O8,D8)}destroy(){l0(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class y9 extends M${Ah=z0[0]|0;Al=z0[1]|0;Bh=z0[2]|0;Bl=z0[3]|0;Ch=z0[4]|0;Cl=z0[5]|0;Dh=z0[6]|0;Dl=z0[7]|0;Eh=z0[8]|0;El=z0[9]|0;Fh=z0[10]|0;Fl=z0[11]|0;Gh=z0[12]|0;Gl=z0[13]|0;Hh=z0[14]|0;Hl=z0[15]|0;constructor(){super(64)}}class aG extends M${Ah=U0[0]|0;Al=U0[1]|0;Bh=U0[2]|0;Bl=U0[3]|0;Ch=U0[4]|0;Cl=U0[5]|0;Dh=U0[6]|0;Dl=U0[7]|0;Eh=U0[8]|0;El=U0[9]|0;Fh=U0[10]|0;Fl=U0[11]|0;Gh=U0[12]|0;Gl=U0[13]|0;Hh=U0[14]|0;Hl=U0[15]|0;constructor(){super(48)}}var V0=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),N0=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class tG extends M${Ah=V0[0]|0;Al=V0[1]|0;Bh=V0[2]|0;Bl=V0[3]|0;Ch=V0[4]|0;Cl=V0[5]|0;Dh=V0[6]|0;Dl=V0[7]|0;Eh=V0[8]|0;El=V0[9]|0;Fh=V0[10]|0;Fl=V0[11]|0;Gh=V0[12]|0;Gl=V0[13]|0;Hh=V0[14]|0;Hl=V0[15]|0;constructor(){super(28)}}class eG extends M${Ah=N0[0]|0;Al=N0[1]|0;Bh=N0[2]|0;Bl=N0[3]|0;Ch=N0[4]|0;Cl=N0[5]|0;Dh=N0[6]|0;Dl=N0[7]|0;Eh=N0[8]|0;El=N0[9]|0;Fh=N0[10]|0;Fl=N0[11]|0;Gh=N0[12]|0;Gl=N0[13]|0;Hh=N0[14]|0;Hl=N0[15]|0;constructor(){super(32)}}var m9=Y$(()=>new y9,w8(3));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var u9=BigInt(0),h9=BigInt(1);function o$($,J=""){if(typeof $!=="boolean"){let Q=J&&`"${J}" `;throw new Error(Q+"expected boolean, got type="+typeof $)}return $}function $Y($){if(typeof $==="bigint"){if(!i$($))throw new Error("positive bigint expected, got "+$)}else Q8($);return $}function p9($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?u9:BigInt("0x"+$)}function d9($){return p9(h8($))}function p8($){return p9(h8(n$(c($)).reverse()))}function cJ($,J){Q8(J),$=$Y($);let Q=G$($.toString(16).padStart(J*2,"0"));if(Q.length!==J)throw new Error("number too large");return Q}function c9($,J){return cJ($,J).reverse()}function n$($){return Uint8Array.from($)}var i$=($)=>typeof $==="bigint"&&u9<=$;function JY($,J,Q){return i$($)&&i$(J)&&i$(Q)&&J<=$&&$<Q}function lJ($,J,Q,q){if(!JY(J,Q,q))throw new Error("expected valid "+$+": "+Q+" <= n < "+q+", got "+J)}var l9=($)=>(h9<<BigInt($))-h9;function K$($,J={},Q={}){if(!$||typeof $!=="object")throw new Error("expected valid options object");function q(Z,G,Y){let U=$[Z];if(Y&&U===void 0)return;let W=typeof U;if(W!==G||U===null)throw new Error(`param "${Z}" is invalid: expected ${G}, got ${W}`)}let X=(Z,G)=>Object.entries(Z).forEach(([Y,U])=>q(Y,U,G));X(J,!1),X(Q,!0)}function iJ($){let J=new WeakMap;return(Q,...q)=>{let X=J.get(Q);if(X!==void 0)return X;let Z=$(Q,...q);return J.set(Q,Z),Z}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var L0=BigInt(0),j0=BigInt(1),P8=BigInt(2),n9=BigInt(3),r9=BigInt(4),s9=BigInt(5),QY=BigInt(7),a9=BigInt(8),qY=BigInt(9),t9=BigInt(16);function t($,J){let Q=$%J;return Q>=L0?Q:J+Q}function m0($,J,Q){let q=$;while(J-- >L0)q*=q,q%=Q;return q}function i9($,J){if($===L0)throw new Error("invert: expected non-zero number");if(J<=L0)throw new Error("invert: expected positive modulus, got "+J);let Q=t($,J),q=J,X=L0,Z=j0,G=j0,Y=L0;while(Q!==L0){let W=q/Q,z=q%Q,M=X-G*W,O=Z-Y*W;q=Q,Q=z,X=G,Z=Y,G=M,Y=O}if(q!==j0)throw new Error("invert: does not exist");return t(X,J)}function oJ($,J,Q){if(!$.eql($.sqr(J),Q))throw new Error("Cannot find square root")}function e9($,J){let Q=($.ORDER+j0)/r9,q=$.pow(J,Q);return oJ($,q,J),q}function XY($,J){let Q=($.ORDER-s9)/a9,q=$.mul(J,P8),X=$.pow(q,Q),Z=$.mul(J,X),G=$.mul($.mul(Z,P8),X),Y=$.mul(Z,$.sub(G,$.ONE));return oJ($,Y,J),Y}function ZY($){let J=s$($),Q=$q($),q=Q(J,J.neg(J.ONE)),X=Q(J,q),Z=Q(J,J.neg(q)),G=($+QY)/t9;return(Y,U)=>{let W=Y.pow(U,G),z=Y.mul(W,q),M=Y.mul(W,X),O=Y.mul(W,Z),N=Y.eql(Y.sqr(z),U),j=Y.eql(Y.sqr(M),U);W=Y.cmov(W,z,N),z=Y.cmov(O,M,j);let E=Y.eql(Y.sqr(z),U),D=Y.cmov(W,z,E);return oJ(Y,D,U),D}}function $q($){if($<n9)throw new Error("sqrt is not defined for small field");let J=$-j0,Q=0;while(J%P8===L0)J/=P8,Q++;let q=P8,X=s$($);while(o9(X,q)===1)if(q++>1000)throw new Error("Cannot find square root: probably non-prime P");if(Q===1)return e9;let Z=X.pow(q,J),G=(J+j0)/P8;return function Y(U,W){if(U.is0(W))return W;if(o9(U,W)!==1)throw new Error("Cannot find square root");let z=Q,M=U.mul(U.ONE,Z),O=U.pow(W,J),N=U.pow(W,G);while(!U.eql(O,U.ONE)){if(U.is0(O))return U.ZERO;let j=1,E=U.sqr(O);while(!U.eql(E,U.ONE))if(j++,E=U.sqr(E),j===z)throw new Error("Cannot find square root");let D=j0<<BigInt(z-j-1),L=U.pow(M,D);z=j,M=U.sqr(L),O=U.mul(O,M),N=U.mul(N,L)}return N}}function GY($){if($%r9===n9)return e9;if($%a9===s9)return XY;if($%t9===qY)return ZY($);return $q($)}var Jq=($,J)=>(t($,J)&j0)===j0,YY=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Qq($){let J={ORDER:"bigint",BYTES:"number",BITS:"number"},Q=YY.reduce((q,X)=>{return q[X]="function",q},J);return K$($,Q),$}function UY($,J,Q){if(Q<L0)throw new Error("invalid exponent, negatives unsupported");if(Q===L0)return $.ONE;if(Q===j0)return J;let q=$.ONE,X=J;while(Q>L0){if(Q&j0)q=$.mul(q,X);X=$.sqr(X),Q>>=j0}return q}function r$($,J,Q=!1){let q=new Array(J.length).fill(Q?$.ZERO:void 0),X=J.reduce((G,Y,U)=>{if($.is0(Y))return G;return q[U]=G,$.mul(G,Y)},$.ONE),Z=$.inv(X);return J.reduceRight((G,Y,U)=>{if($.is0(Y))return G;return q[U]=$.mul(G,q[U]),$.mul(G,Y)},Z),q}function o9($,J){let Q=($.ORDER-j0)/P8,q=$.pow(J,Q),X=$.eql(q,$.ONE),Z=$.eql(q,$.ZERO),G=$.eql(q,$.neg($.ONE));if(!X&&!Z&&!G)throw new Error("invalid Legendre symbol result");return X?1:Z?0:-1}function zY($,J){if(J!==void 0)Q8(J);let Q=J!==void 0?J:$.toString(2).length,q=Math.ceil(Q/8);return{nBitLength:Q,nByteLength:q}}class qq{ORDER;BITS;BYTES;isLE;ZERO=L0;ONE=j0;_lengths;_sqrt;_mod;constructor($,J={}){if($<=L0)throw new Error("invalid field: expected ORDER > 0, got "+$);let Q=void 0;if(this.isLE=!1,J!=null&&typeof J==="object"){if(typeof J.BITS==="number")Q=J.BITS;if(typeof J.sqrt==="function")this.sqrt=J.sqrt;if(typeof J.isLE==="boolean")this.isLE=J.isLE;if(J.allowedLengths)this._lengths=J.allowedLengths?.slice();if(typeof J.modFromBytes==="boolean")this._mod=J.modFromBytes}let{nBitLength:q,nByteLength:X}=zY($,Q);if(X>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=$,this.BITS=q,this.BYTES=X,this._sqrt=void 0,Object.preventExtensions(this)}create($){return t($,this.ORDER)}isValid($){if(typeof $!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof $);return L0<=$&&$<this.ORDER}is0($){return $===L0}isValidNot0($){return!this.is0($)&&this.isValid($)}isOdd($){return($&j0)===j0}neg($){return t(-$,this.ORDER)}eql($,J){return $===J}sqr($){return t($*$,this.ORDER)}add($,J){return t($+J,this.ORDER)}sub($,J){return t($-J,this.ORDER)}mul($,J){return t($*J,this.ORDER)}pow($,J){return UY(this,$,J)}div($,J){return t($*i9(J,this.ORDER),this.ORDER)}sqrN($){return $*$}addN($,J){return $+J}subN($,J){return $-J}mulN($,J){return $*J}inv($){return i9($,this.ORDER)}sqrt($){if(!this._sqrt)this._sqrt=GY(this.ORDER);return this._sqrt(this,$)}toBytes($){return this.isLE?c9($,this.BYTES):cJ($,this.BYTES)}fromBytes($,J=!1){c($);let{_lengths:Q,BYTES:q,isLE:X,ORDER:Z,_mod:G}=this;if(Q){if(!Q.includes($.length)||$.length>q)throw new Error("Field.fromBytes: expected "+Q+" bytes, got "+$.length);let U=new Uint8Array(q);U.set($,X?0:U.length-$.length),$=U}if($.length!==q)throw new Error("Field.fromBytes: expected "+q+" bytes, got "+$.length);let Y=X?p8($):d9($);if(G)Y=t(Y,Z);if(!J){if(!this.isValid(Y))throw new Error("invalid field element: outside of range 0..ORDER")}return Y}invertBatch($){return r$(this,$)}cmov($,J,Q){return Q?J:$}}function s$($,J={}){return new qq($,J)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var a$=BigInt(0),aJ=BigInt(1);function Xq($,J){let Q=J.negate();return $?Q:J}function t$($,J){let Q=r$($.Fp,J.map((q)=>q.Z));return J.map((q,X)=>$.fromAffine(q.toAffine(Q[X])))}function Uq($,J){if(!Number.isSafeInteger($)||$<=0||$>J)throw new Error("invalid window size, expected [1.."+J+"], got W="+$)}function nJ($,J){Uq($,J);let Q=Math.ceil(J/$)+1,q=2**($-1),X=2**$,Z=l9($),G=BigInt($);return{windows:Q,windowSize:q,mask:Z,maxNumber:X,shiftBy:G}}function Zq($,J,Q){let{windowSize:q,mask:X,maxNumber:Z,shiftBy:G}=Q,Y=Number($&X),U=$>>G;if(Y>q)Y-=Z,U+=aJ;let W=J*q,z=W+Math.abs(Y)-1,M=Y===0,O=Y<0,N=J%2!==0;return{nextN:U,offset:z,isZero:M,isNeg:O,isNegF:N,offsetF:W}}var rJ=new WeakMap,zq=new WeakMap;function sJ($){return zq.get($)||1}function Gq($){if($!==a$)throw new Error("invalid wNAF")}class tJ{BASE;ZERO;Fn;bits;constructor($,J){this.BASE=$.BASE,this.ZERO=$.ZERO,this.Fn=$.Fn,this.bits=J}_unsafeLadder($,J,Q=this.ZERO){let q=$;while(J>a$){if(J&aJ)Q=Q.add(q);q=q.double(),J>>=aJ}return Q}precomputeWindow($,J){let{windows:Q,windowSize:q}=nJ(J,this.bits),X=[],Z=$,G=Z;for(let Y=0;Y<Q;Y++){G=Z,X.push(G);for(let U=1;U<q;U++)G=G.add(Z),X.push(G);Z=G.double()}return X}wNAF($,J,Q){if(!this.Fn.isValid(Q))throw new Error("invalid scalar");let q=this.ZERO,X=this.BASE,Z=nJ($,this.bits);for(let G=0;G<Z.windows;G++){let{nextN:Y,offset:U,isZero:W,isNeg:z,isNegF:M,offsetF:O}=Zq(Q,G,Z);if(Q=Y,W)X=X.add(Xq(M,J[O]));else q=q.add(Xq(z,J[U]))}return Gq(Q),{p:q,f:X}}wNAFUnsafe($,J,Q,q=this.ZERO){let X=nJ($,this.bits);for(let Z=0;Z<X.windows;Z++){if(Q===a$)break;let{nextN:G,offset:Y,isZero:U,isNeg:W}=Zq(Q,Z,X);if(Q=G,U)continue;else{let z=J[Y];q=q.add(W?z.negate():z)}}return Gq(Q),q}getPrecomputes($,J,Q){let q=rJ.get(J);if(!q){if(q=this.precomputeWindow(J,$),$!==1){if(typeof Q==="function")q=Q(q);rJ.set(J,q)}}return q}cached($,J,Q){let q=sJ($);return this.wNAF(q,this.getPrecomputes(q,$,Q),J)}unsafe($,J,Q,q){let X=sJ($);if(X===1)return this._unsafeLadder($,J,q);return this.wNAFUnsafe(X,this.getPrecomputes(X,$,Q),J,q)}createCache($,J){Uq(J,this.bits),zq.set($,J),rJ.delete($)}hasCache($){return sJ($)!==1}}function Yq($,J,Q){if(J){if(J.ORDER!==$)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Qq(J),J}else return s$($,{isLE:Q})}function Wq($,J,Q={},q){if(q===void 0)q=$==="edwards";if(!J||typeof J!=="object")throw new Error(`expected valid ${$} CURVE object`);for(let U of["p","n","h"]){let W=J[U];if(!(typeof W==="bigint"&&W>a$))throw new Error(`CURVE.${U} must be positive bigint`)}let X=Yq(J.p,Q.Fp,q),Z=Yq(J.n,Q.Fn,q),Y=["Gx","Gy","a",$==="weierstrass"?"b":"d"];for(let U of Y)if(!X.isValid(J[U]))throw new Error(`CURVE.${U} must be valid field element of CURVE.Fp`);return J=Object.freeze(Object.assign({},J)),{CURVE:J,Fp:X,Fn:Z}}function Mq($,J){return function Q(q){let X=$(q);return{secretKey:X,publicKey:J(X)}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var V8=BigInt(0),X0=BigInt(1),eJ=BigInt(2),WY=BigInt(8);function MY($,J,Q,q){let X=$.sqr(Q),Z=$.sqr(q),G=$.add($.mul(J.a,X),Z),Y=$.add($.ONE,$.mul(J.d,$.mul(X,Z)));return $.eql(G,Y)}function Kq($,J={}){let Q=Wq("edwards",$,J,J.FpFnLE),{Fp:q,Fn:X}=Q,Z=Q.CURVE,{h:G}=Z;K$(J,{},{uvRatio:"function"});let Y=eJ<<BigInt(X.BYTES*8)-X0,U=(D)=>q.create(D),W=J.uvRatio||((D,L)=>{try{return{isValid:!0,value:q.sqrt(q.div(D,L))}}catch(V){return{isValid:!1,value:V8}}});if(!MY(q,Z,Z.Gx,Z.Gy))throw new Error("bad curve params: generator point");function z(D,L,V=!1){let H=V?X0:V8;return lJ("coordinate "+D,L,H,Y),L}function M(D){if(!(D instanceof j))throw new Error("EdwardsPoint expected")}let O=iJ((D,L)=>{let{X:V,Y:H,Z:F}=D,x=D.is0();if(L==null)L=x?WY:q.inv(F);let g=U(V*L),v=U(H*L),C=q.mul(F,L);if(x)return{x:V8,y:X0};if(C!==X0)throw new Error("invZ was invalid");return{x:g,y:v}}),N=iJ((D)=>{let{a:L,d:V}=Z;if(D.is0())throw new Error("bad point: ZERO");let{X:H,Y:F,Z:x,T:g}=D,v=U(H*H),C=U(F*F),B=U(x*x),P=U(B*B),S=U(v*L),y=U(B*U(S+C)),K=U(P+U(V*U(v*C)));if(y!==K)throw new Error("bad point: equation left != right (1)");let A=U(H*F),I=U(x*g);if(A!==I)throw new Error("bad point: equation left != right (2)");return!0});class j{static BASE=new j(Z.Gx,Z.Gy,X0,U(Z.Gx*Z.Gy));static ZERO=new j(V8,X0,X0,V8);static Fp=q;static Fn=X;X;Y;Z;T;constructor(D,L,V,H){this.X=z("x",D),this.Y=z("y",L),this.Z=z("z",V,!0),this.T=z("t",H),Object.freeze(this)}static CURVE(){return Z}static fromAffine(D){if(D instanceof j)throw new Error("extended point not allowed");let{x:L,y:V}=D||{};return z("x",L),z("y",V),new j(L,V,X0,U(L*V))}static fromBytes(D,L=!1){let V=q.BYTES,{a:H,d:F}=Z;D=n$(c(D,V,"point")),o$(L,"zip215");let x=n$(D),g=D[V-1];x[V-1]=g&-129;let v=p8(x),C=L?Y:q.ORDER;lJ("point.y",v,V8,C);let B=U(v*v),P=U(B-X0),S=U(F*B-H),{isValid:y,value:K}=W(P,S);if(!y)throw new Error("bad point: invalid y coordinate");let A=(K&X0)===X0,I=(g&128)!==0;if(!L&&K===V8&&I)throw new Error("bad point: x=0 and x_0=1");if(I!==A)K=U(-K);return j.fromAffine({x:K,y:v})}static fromHex(D,L=!1){return j.fromBytes(G$(D),L)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(D=8,L=!0){if(E.createCache(this,D),!L)this.multiply(eJ);return this}assertValidity(){N(this)}equals(D){M(D);let{X:L,Y:V,Z:H}=this,{X:F,Y:x,Z:g}=D,v=U(L*g),C=U(F*H),B=U(V*g),P=U(x*H);return v===C&&B===P}is0(){return this.equals(j.ZERO)}negate(){return new j(U(-this.X),this.Y,this.Z,U(-this.T))}double(){let{a:D}=Z,{X:L,Y:V,Z:H}=this,F=U(L*L),x=U(V*V),g=U(eJ*U(H*H)),v=U(D*F),C=L+V,B=U(U(C*C)-F-x),P=v+x,S=P-g,y=v-x,K=U(B*S),A=U(P*y),I=U(B*y),w=U(S*P);return new j(K,A,w,I)}add(D){M(D);let{a:L,d:V}=Z,{X:H,Y:F,Z:x,T:g}=this,{X:v,Y:C,Z:B,T:P}=D,S=U(H*v),y=U(F*C),K=U(g*V*P),A=U(x*B),I=U((H+F)*(v+C)-S-y),w=A-K,f=A+K,_=U(y-L*S),b=U(I*w),u=U(f*_),p=U(I*_),m=U(w*f);return new j(b,u,m,p)}subtract(D){return this.add(D.negate())}multiply(D){if(!X.isValidNot0(D))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:L,f:V}=E.cached(this,D,(H)=>t$(j,H));return t$(j,[L,V])[0]}multiplyUnsafe(D,L=j.ZERO){if(!X.isValid(D))throw new Error("invalid scalar: expected 0 <= sc < curve.n");if(D===V8)return j.ZERO;if(this.is0()||D===X0)return this;return E.unsafe(this,D,(V)=>t$(j,V),L)}isSmallOrder(){return this.multiplyUnsafe(G).is0()}isTorsionFree(){return E.unsafe(this,Z.n).is0()}toAffine(D){return O(this,D)}clearCofactor(){if(G===X0)return this;return this.multiplyUnsafe(G)}toBytes(){let{x:D,y:L}=this.toAffine(),V=q.toBytes(L);return V[V.length-1]|=D&X0?128:0,V}toHex(){return h8(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let E=new tJ(j,X.BITS);return j.BASE.precompute(8),j}function Oq($,J,Q={}){if(typeof J!=="function")throw new Error('"hash" function param is required');K$(Q,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:q}=Q,{BASE:X,Fp:Z,Fn:G}=$,Y=Q.randomBytes||U$,U=Q.adjustScalarBytes||((C)=>C),W=Q.domain||((C,B,P)=>{if(o$(P,"phflag"),B.length||P)throw new Error("Contexts/pre-hash are not supported");return C});function z(C){return G.create(p8(C))}function M(C){let B=H.secretKey;c(C,H.secretKey,"secretKey");let P=c(J(C),2*B,"hashedSecretKey"),S=U(P.slice(0,B)),y=P.slice(B,2*B),K=z(S);return{head:S,prefix:y,scalar:K}}function O(C){let{head:B,prefix:P,scalar:S}=M(C),y=X.multiply(S),K=y.toBytes();return{head:B,prefix:P,scalar:S,point:y,pointBytes:K}}function N(C){return O(C).pointBytes}function j(C=Uint8Array.of(),...B){let P=u8(...B);return z(J(W(P,c(C,void 0,"context"),!!q)))}function E(C,B,P={}){if(C=c(C,void 0,"message"),q)C=q(C);let{prefix:S,scalar:y,pointBytes:K}=O(B),A=j(P.context,S,C),I=X.multiply(A).toBytes(),w=j(P.context,I,K,C),f=G.create(A+w*y);if(!G.isValid(f))throw new Error("sign failed: invalid s");let _=u8(I,G.toBytes(f));return c(_,H.signature,"result")}let D={zip215:!0};function L(C,B,P,S=D){let{context:y,zip215:K}=S,A=H.signature;if(C=c(C,A,"signature"),B=c(B,void 0,"message"),P=c(P,H.publicKey,"publicKey"),K!==void 0)o$(K,"zip215");if(q)B=q(B);let I=A/2,w=C.subarray(0,I),f=p8(C.subarray(I,A)),_,b,u;try{_=$.fromBytes(P,K),b=$.fromBytes(w,K),u=X.multiplyUnsafe(f)}catch(D0){return!1}if(!K&&_.isSmallOrder())return!1;let p=j(y,b.toBytes(),_.toBytes(),B);return b.add(_.multiplyUnsafe(p)).subtract(u).clearCofactor().is0()}let V=Z.BYTES,H={secretKey:V,publicKey:V,signature:2*V,seed:V};function F(C=Y(H.seed)){return c(C,H.seed,"seed")}function x(C){return Z$(C)&&C.length===G.BYTES}function g(C,B){try{return!!$.fromBytes(C,B)}catch(P){return!1}}let v={getExtendedPublicKey:O,randomSecretKey:F,isValidSecretKey:x,isValidPublicKey:g,toMontgomery(C){let{y:B}=$.fromBytes(C),P=H.publicKey,S=P===32;if(!S&&P!==57)throw new Error("only defined for 25519 and 448");let y=S?Z.div(X0+B,X0-B):Z.div(B-X0,B+X0);return Z.toBytes(y)},toMontgomerySecret(C){let B=H.secretKey;c(C,B);let P=J(C.subarray(0,B));return U(P).subarray(0,B)}};return Object.freeze({keygen:Mq(F,N),getPublicKey:N,sign:E,verify:L,utils:v,Point:$,lengths:H})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var KY=BigInt(1),Dq=BigInt(2);var OY=BigInt(5),DY=BigInt(8),$Q=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),VY=(()=>({p:$Q,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:DY,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")}))();function NY($){let J=BigInt(10),Q=BigInt(20),q=BigInt(40),X=BigInt(80),Z=$Q,Y=$*$%Z*$%Z,U=m0(Y,Dq,Z)*Y%Z,W=m0(U,KY,Z)*$%Z,z=m0(W,OY,Z)*W%Z,M=m0(z,J,Z)*z%Z,O=m0(M,Q,Z)*M%Z,N=m0(O,q,Z)*O%Z,j=m0(N,X,Z)*N%Z,E=m0(j,X,Z)*N%Z,D=m0(E,J,Z)*z%Z;return{pow_p_5_8:m0(D,Dq,Z)*$%Z,b2:Y}}function jY($){return $[0]&=248,$[31]&=127,$[31]|=64,$}var Vq=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function RY($,J){let Q=$Q,q=t(J*J*J,Q),X=t(q*q*J,Q),Z=NY($*X).pow_p_5_8,G=t($*q*Z,Q),Y=t(J*G*G,Q),U=G,W=t(G*Vq,Q),z=Y===$,M=Y===t(-$,Q),O=Y===t(-$*Vq,Q);if(z)G=U;if(M||O)G=W;if(Jq(G,Q))G=t(-G,Q);return{isValid:z||M,value:G}}var HY=Kq(VY,{uvRatio:RY});function CY($){return Oq(HY,m9,Object.assign({adjustScalarBytes:jY},$))}var O$=CY({});var yq=B9(JQ(),1);var QQ;try{QQ=new TextDecoder}catch($){}var h,k8,k=0;var Bq=[],BY=105,IY=57342,LY=57343,jq=57337;var Rq=6,d8={},D$=112810000,Z8=16810000;var qQ=Bq,XQ=0,l={},a,JJ,QJ=0,N$=0,J0,x0,e=[],ZQ=[],F0,T0,V$,Hq={useRecords:!1,mapsAsObjects:!0},j$=!1,Iq=2;try{new Function("")}catch($){Iq=1/0}class N8{constructor($){if($){if(($.keyMap||$._keyMap)&&!$.useRecords)$.useRecords=!1,$.mapsAsObjects=!0;if($.useRecords===!1&&$.mapsAsObjects===void 0)$.mapsAsObjects=!0;if($.getStructures)$.getShared=$.getStructures;if($.getShared&&!$.structures)($.structures=[]).uninitialized=!0;if($.keyMap){this.mapKey=new Map;for(let[J,Q]of Object.entries($.keyMap))this.mapKey.set(Q,J)}}Object.assign(this,$)}decodeKey($){return this.keyMap?this.mapKey.get($)||$:$}encodeKey($){return this.keyMap&&this.keyMap.hasOwnProperty($)?this.keyMap[$]:$}encodeKeys($){if(!this._keyMap)return $;let J=new Map;for(let[Q,q]of Object.entries($))J.set(this._keyMap.hasOwnProperty(Q)?this._keyMap[Q]:Q,q);return J}decodeKeys($){if(!this._keyMap||$.constructor.name!="Map")return $;if(!this._mapKey){this._mapKey=new Map;for(let[Q,q]of Object.entries(this._keyMap))this._mapKey.set(q,Q)}let J={};return $.forEach((Q,q)=>J[v0(this._mapKey.has(q)?this._mapKey.get(q):q)]=Q),J}mapDecode($,J){let Q=this.decode($);if(this._keyMap)switch(Q.constructor.name){case"Array":return Q.map((q)=>this.decodeKeys(q))}return Q}decode($,J){if(h)return wq(()=>{return qJ(),this?this.decode($,J):N8.prototype.decode.call(Hq,$,J)});k8=J>-1?J:$.length,k=0,XQ=0,N$=0,JJ=null,qQ=Bq,J0=null,h=$;try{T0=$.dataView||($.dataView=new DataView($.buffer,$.byteOffset,$.byteLength))}catch(Q){if(h=null,$ instanceof Uint8Array)throw Q;throw new Error("Source must be a Uint8Array or Buffer but was a "+($&&typeof $=="object"?$.constructor.name:typeof $))}if(this instanceof N8){if(l=this,F0=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return a=this.structures,e$();else if(!a||a.length>0)a=[]}else{if(l=Hq,!a||a.length>0)a=[];F0=null}return e$()}decodeMultiple($,J){let Q,q=0;try{let X=$.length;j$=!0;let Z=this?this.decode($,X):MQ.decode($,X);if(J){if(J(Z)===!1)return;while(k<X)if(q=k,J(e$())===!1)return}else{Q=[Z];while(k<X)q=k,Q.push(e$());return Q}}catch(X){throw X.lastPosition=q,X.values=Q,X}finally{j$=!1,qJ()}}}function e$(){try{let $=i();if(J0){if(k>=J0.postBundlePosition){let J=new Error("Unexpected bundle position");throw J.incomplete=!0,J}k=J0.postBundlePosition,J0=null}if(k==k8){if(a=null,h=null,x0)x0=null}else if(k>k8){let J=new Error("Unexpected end of CBOR data");throw J.incomplete=!0,J}else if(!j$)throw new Error("Data read, but end of buffer not reached");return $}catch($){if(qJ(),$ instanceof RangeError||$.message.startsWith("Unexpected end of buffer"))$.incomplete=!0;throw $}}function i(){let $=h[k++],J=$>>5;if($=$&31,$>23)switch($){case 24:$=h[k++];break;case 25:if(J==7)return EY();$=T0.getUint16(k),k+=2;break;case 26:if(J==7){let Q=T0.getFloat32(k);if(l.useFloat32>2){let q=XJ[(h[k]&127)<<1|h[k+1]>>7];return k+=4,(q*Q+(Q>0?0.5:-0.5)>>0)/q}return k+=4,Q}$=T0.getUint32(k),k+=4;break;case 27:if(J==7){let Q=T0.getFloat64(k);return k+=8,Q}if(J>1){if(T0.getUint32(k)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");$=T0.getUint32(k+4)}else if(l.int64AsNumber)$=T0.getUint32(k)*4294967296,$+=T0.getUint32(k+4);else $=T0.getBigUint64(k);k+=8;break;case 31:switch(J){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let Q=[],q,X=0;while((q=i())!=d8){if(X>=D$)throw new Error(`Array length exceeds ${D$}`);Q[X++]=q}return J==4?Q:J==3?Q.join(""):Buffer.concat(Q);case 5:let Z;if(l.mapsAsObjects){let G={},Y=0;if(l.keyMap)while((Z=i())!=d8){if(Y++>=Z8)throw new Error(`Property count exceeds ${Z8}`);G[v0(l.decodeKey(Z))]=i()}else while((Z=i())!=d8){if(Y++>=Z8)throw new Error(`Property count exceeds ${Z8}`);G[v0(Z)]=i()}return G}else{if(V$)l.mapsAsObjects=!0,V$=!1;let G=new Map;if(l.keyMap){let Y=0;while((Z=i())!=d8){if(Y++>=Z8)throw new Error(`Map size exceeds ${Z8}`);G.set(l.decodeKey(Z),i())}}else{let Y=0;while((Z=i())!=d8){if(Y++>=Z8)throw new Error(`Map size exceeds ${Z8}`);G.set(Z,i())}}return G}case 7:return d8;default:throw new Error("Invalid major type for indefinite length "+J)}default:throw new Error("Unknown token "+$)}switch(J){case 0:return $;case 1:return~$;case 2:return wY($);case 3:if(N$>=k)return JJ.slice(k-QJ,(k+=$)-QJ);if(N$==0&&k8<140&&$<32){let X=$<16?Lq($):AY($);if(X!=null)return X}return TY($);case 4:if($>=D$)throw new Error(`Array length exceeds ${D$}`);let Q=new Array($);for(let X=0;X<$;X++)Q[X]=i();return Q;case 5:if($>=Z8)throw new Error(`Map size exceeds ${D$}`);if(l.mapsAsObjects){let X={};if(l.keyMap)for(let Z=0;Z<$;Z++)X[v0(l.decodeKey(i()))]=i();else for(let Z=0;Z<$;Z++)X[v0(i())]=i();return X}else{if(V$)l.mapsAsObjects=!0,V$=!1;let X=new Map;if(l.keyMap)for(let Z=0;Z<$;Z++)X.set(l.decodeKey(i()),i());else for(let Z=0;Z<$;Z++)X.set(i(),i());return X}case 6:if($>=jq){let X=a[$&8191];if(X){if(!X.read)X.read=GQ(X);return X.read()}if($<65536){if($==LY){let Z=l8(),G=i(),Y=i();UQ(G,Y);let U={};if(l.keyMap)for(let W=2;W<Z;W++){let z=l.decodeKey(Y[W-2]);U[v0(z)]=i()}else for(let W=2;W<Z;W++){let z=Y[W-2];U[v0(z)]=i()}return U}else if($==IY){let Z=l8(),G=i();for(let Y=2;Y<Z;Y++)UQ(G++,i());return i()}else if($==jq)return xY();if(l.getShared){if(WQ(),X=a[$&8191],X){if(!X.read)X.read=GQ(X);return X.read()}}}}let q=e[$];if(q)if(q.handlesRead)return q(i);else return q(i());else{let X=i();for(let Z=0;Z<ZQ.length;Z++){let G=ZQ[Z]($,X);if(G!==void 0)return G}return new o0(X,$)}case 7:switch($){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let X=(F0||f8())[$];if(X!==void 0)return X;throw new Error("Unknown token "+$)}default:if(isNaN($)){let X=new Error("Unexpected end of CBOR data");throw X.incomplete=!0,X}throw new Error("Unknown CBOR token "+$)}}var Cq=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function GQ($){if(!$)throw new Error("Structure is required in record definition");function J(){let Q=h[k++];if(Q=Q&31,Q>23)switch(Q){case 24:Q=h[k++];break;case 25:Q=T0.getUint16(k),k+=2;break;case 26:Q=T0.getUint32(k),k+=4;break;default:throw new Error("Expected array header, but got "+h[k-1])}let q=this.compiledReader;while(q){if(q.propertyCount===Q)return q(i);q=q.next}if(this.slowReads++>=Iq){let Z=this.length==Q?this:this.slice(0,Q);if(q=l.keyMap?new Function("r","return {"+Z.map((G)=>l.decodeKey(G)).map((G)=>Cq.test(G)?v0(G)+":r()":"["+JSON.stringify(G)+"]:r()").join(",")+"}"):new Function("r","return {"+Z.map((G)=>Cq.test(G)?v0(G)+":r()":"["+JSON.stringify(G)+"]:r()").join(",")+"}"),this.compiledReader)q.next=this.compiledReader;return q.propertyCount=Q,this.compiledReader=q,q(i)}let X={};if(l.keyMap)for(let Z=0;Z<Q;Z++)X[v0(l.decodeKey(this[Z]))]=i();else for(let Z=0;Z<Q;Z++)X[v0(this[Z])]=i();return X}return $.slowReads=0,J}function v0($){if(typeof $==="string")return $==="__proto__"?"__proto_":$;if(typeof $==="number"||typeof $==="boolean"||typeof $==="bigint")return $.toString();if($==null)return $+"";throw new Error("Invalid property name type "+typeof $)}var TY=YQ;function YQ($){let J;if($<16){if(J=Lq($))return J}if($>64&&QQ)return QQ.decode(h.subarray(k,k+=$));let Q=k+$,q=[];J="";while(k<Q){let X=h[k++];if((X&128)===0)q.push(X);else if((X&224)===192){let Z=h[k++]&63;q.push((X&31)<<6|Z)}else if((X&240)===224){let Z=h[k++]&63,G=h[k++]&63;q.push((X&31)<<12|Z<<6|G)}else if((X&248)===240){let Z=h[k++]&63,G=h[k++]&63,Y=h[k++]&63,U=(X&7)<<18|Z<<12|G<<6|Y;if(U>65535)U-=65536,q.push(U>>>10&1023|55296),U=56320|U&1023;q.push(U)}else q.push(X);if(q.length>=4096)J+=Z0.apply(String,q),q.length=0}if(q.length>0)J+=Z0.apply(String,q);return J}var Z0=String.fromCharCode;function AY($){let J=k,Q=new Array($);for(let q=0;q<$;q++){let X=h[k++];if((X&128)>0){k=J;return}Q[q]=X}return Z0.apply(String,Q)}function Lq($){if($<4)if($<2)if($===0)return"";else{let J=h[k++];if((J&128)>1){k-=1;return}return Z0(J)}else{let J=h[k++],Q=h[k++];if((J&128)>0||(Q&128)>0){k-=2;return}if($<3)return Z0(J,Q);let q=h[k++];if((q&128)>0){k-=3;return}return Z0(J,Q,q)}else{let J=h[k++],Q=h[k++],q=h[k++],X=h[k++];if((J&128)>0||(Q&128)>0||(q&128)>0||(X&128)>0){k-=4;return}if($<6)if($===4)return Z0(J,Q,q,X);else{let Z=h[k++];if((Z&128)>0){k-=5;return}return Z0(J,Q,q,X,Z)}else if($<8){let Z=h[k++],G=h[k++];if((Z&128)>0||(G&128)>0){k-=6;return}if($<7)return Z0(J,Q,q,X,Z,G);let Y=h[k++];if((Y&128)>0){k-=7;return}return Z0(J,Q,q,X,Z,G,Y)}else{let Z=h[k++],G=h[k++],Y=h[k++],U=h[k++];if((Z&128)>0||(G&128)>0||(Y&128)>0||(U&128)>0){k-=8;return}if($<10)if($===8)return Z0(J,Q,q,X,Z,G,Y,U);else{let W=h[k++];if((W&128)>0){k-=9;return}return Z0(J,Q,q,X,Z,G,Y,U,W)}else if($<12){let W=h[k++],z=h[k++];if((W&128)>0||(z&128)>0){k-=10;return}if($<11)return Z0(J,Q,q,X,Z,G,Y,U,W,z);let M=h[k++];if((M&128)>0){k-=11;return}return Z0(J,Q,q,X,Z,G,Y,U,W,z,M)}else{let W=h[k++],z=h[k++],M=h[k++],O=h[k++];if((W&128)>0||(z&128)>0||(M&128)>0||(O&128)>0){k-=12;return}if($<14)if($===12)return Z0(J,Q,q,X,Z,G,Y,U,W,z,M,O);else{let N=h[k++];if((N&128)>0){k-=13;return}return Z0(J,Q,q,X,Z,G,Y,U,W,z,M,O,N)}else{let N=h[k++],j=h[k++];if((N&128)>0||(j&128)>0){k-=14;return}if($<15)return Z0(J,Q,q,X,Z,G,Y,U,W,z,M,O,N,j);let E=h[k++];if((E&128)>0){k-=15;return}return Z0(J,Q,q,X,Z,G,Y,U,W,z,M,O,N,j,E)}}}}}function wY($){return l.copyBuffers?Uint8Array.prototype.slice.call(h,k,k+=$):h.subarray(k,k+=$)}var Tq=new Float32Array(1),$J=new Uint8Array(Tq.buffer,0,4);function EY(){let $=h[k++],J=h[k++],Q=($&127)>>2;if(Q===31){if(J||$&3)return NaN;return $&128?-1/0:1/0}if(Q===0){let q=(($&3)<<8|J)/16777216;return $&128?-q:q}return $J[3]=$&128|(Q>>1)+56,$J[2]=($&7)<<5|J>>3,$J[1]=J<<5,$J[0]=0,Tq[0]}var G5=new Array(4096);class o0{constructor($,J){this.value=$,this.tag=J}}e[0]=($)=>{return new Date($)};e[1]=($)=>{return new Date(Math.round($*1000))};e[2]=($)=>{let J=BigInt(0);for(let Q=0,q=$.byteLength;Q<q;Q++)J=BigInt($[Q])+(J<<BigInt(8));return J};e[3]=($)=>{return BigInt(-1)-e[2]($)};e[4]=($)=>{return+($[1]+"e"+$[0])};e[5]=($)=>{return $[1]*Math.exp($[0]*Math.log(2))};var UQ=($,J)=>{$=$-57344;let Q=a[$];if(Q&&Q.isShared)(a.restoreStructures||(a.restoreStructures=[]))[$]=Q;a[$]=J,J.read=GQ(J)};e[BY]=($)=>{let J=$.length,Q=$[1];UQ($[0],Q);let q={};for(let X=2;X<J;X++){let Z=Q[X-2];q[v0(Z)]=$[X]}return q};e[14]=($)=>{if(J0)return J0[0].slice(J0.position0,J0.position0+=$);return new o0($,14)};e[15]=($)=>{if(J0)return J0[1].slice(J0.position1,J0.position1+=$);return new o0($,15)};var FY={Error,RegExp};e[27]=($)=>{return(FY[$[0]]||Error)($[1],$[2])};var Aq=($)=>{if(h[k++]!=132){let Q=new Error("Packed values structure must be followed by a 4 element array");if(h.length<k)Q.incomplete=!0;throw Q}let J=$();if(!J||!J.length){let Q=new Error("Packed values structure must be followed by a 4 element array");throw Q.incomplete=!0,Q}return F0=F0?J.concat(F0.slice(J.length)):J,F0.prefixes=$(),F0.suffixes=$(),$()};Aq.handlesRead=!0;e[51]=Aq;e[Rq]=($)=>{if(!F0)if(l.getShared)WQ();else return new o0($,Rq);if(typeof $=="number")return F0[16+($>=0?2*$:-2*$-1)];let J=new Error("No support for non-integer packed references yet");if($===void 0)J.incomplete=!0;throw J};e[28]=($)=>{if(!x0)x0=new Map,x0.id=0;let J=x0.id++,Q=k,q=h[k],X;if(q>>5==4)X=[];else X={};let Z={target:X};x0.set(J,Z);let G=$();if(Z.used){if(Object.getPrototypeOf(X)!==Object.getPrototypeOf(G))k=Q,X=G,x0.set(J,{target:X}),G=$();return Object.assign(X,G)}return Z.target=G,G};e[28].handlesRead=!0;e[29]=($)=>{let J=x0.get($);return J.used=!0,J.target};e[258]=($)=>new Set($);(e[259]=($)=>{if(l.mapsAsObjects)l.mapsAsObjects=!1,V$=!0;return $()}).handlesRead=!0;function c8($,J){if(typeof $==="string")return $+J;if($ instanceof Array)return $.concat(J);return Object.assign({},$,J)}function f8(){if(!F0)if(l.getShared)WQ();else throw new Error("No packed values available");return F0}var PY=1399353956;ZQ.push(($,J)=>{if($>=225&&$<=255)return c8(f8().prefixes[$-224],J);if($>=28704&&$<=32767)return c8(f8().prefixes[$-28672],J);if($>=1879052288&&$<=2147483647)return c8(f8().prefixes[$-1879048192],J);if($>=216&&$<=223)return c8(J,f8().suffixes[$-216]);if($>=27647&&$<=28671)return c8(J,f8().suffixes[$-27639]);if($>=1811940352&&$<=1879048191)return c8(J,f8().suffixes[$-1811939328]);if($==PY)return{packedValues:F0,structures:a.slice(0),version:J};if($==55799)return J});var fY=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,zQ=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],kY=[64,68,69,70,71,72,77,78,79,85,86];for(let $=0;$<zQ.length;$++)SY(zQ[$],kY[$]);function SY($,J){let Q="get"+$.name.slice(0,-5),q;if(typeof $==="function")q=$.BYTES_PER_ELEMENT;else $=null;for(let X=0;X<2;X++){if(!X&&q==1)continue;let Z=q==2?1:q==4?2:q==8?3:0;e[X?J:J-4]=q==1||X==fY?(G)=>{if(!$)throw new Error("Could not find typed array for code "+J);if(!l.copyBuffers){if(q===1||q===2&&!(G.byteOffset&1)||q===4&&!(G.byteOffset&3)||q===8&&!(G.byteOffset&7))return new $(G.buffer,G.byteOffset,G.byteLength>>Z)}return new $(Uint8Array.prototype.slice.call(G,0).buffer)}:(G)=>{if(!$)throw new Error("Could not find typed array for code "+J);let Y=new DataView(G.buffer,G.byteOffset,G.byteLength),U=G.length>>Z,W=new $(U),z=Y[Q];for(let M=0;M<U;M++)W[M]=z.call(Y,M<<Z,X);return W}}}function xY(){let $=l8(),J=k+i();for(let q=2;q<$;q++){let X=l8();k+=X}let Q=k;return k=J,J0=[YQ(l8()),YQ(l8())],J0.position0=0,J0.position1=0,J0.postBundlePosition=k,k=Q,i()}function l8(){let $=h[k++]&31;if($>23)switch($){case 24:$=h[k++];break;case 25:$=T0.getUint16(k),k+=2;break;case 26:$=T0.getUint32(k),k+=4;break}return $}function WQ(){if(l.getShared){let $=wq(()=>{return h=null,l.getShared()})||{},J=$.structures||[];if(l.sharedVersion=$.version,F0=l.sharedValues=$.packedValues,a===!0)l.structures=a=J;else a.splice.apply(a,[0,J.length].concat(J))}}function wq($){let J=k8,Q=k,q=XQ,X=QJ,Z=N$,G=JJ,Y=qQ,U=x0,W=J0,z=new Uint8Array(h.slice(0,k8)),M=a,O=l,N=j$,j=$();return k8=J,k=Q,XQ=q,QJ=X,N$=Z,JJ=G,qQ=Y,x0=U,J0=W,h=z,j$=N,a=M,l=O,T0=new DataView(h.buffer,h.byteOffset,h.byteLength),j}function qJ(){h=null,x0=null,a=null}var XJ=new Array(147);for(let $=0;$<256;$++)XJ[$]=+("1e"+Math.floor(45.15-$*0.30103));var MQ=new N8({useRecords:!1}),ZJ=MQ.decode,vY=MQ.decodeMultiple;var GJ;try{GJ=new TextEncoder}catch($){}var NQ,xq,UJ=typeof globalThis==="object"&&globalThis.Buffer,R$=typeof UJ!=="undefined",KQ=R$?UJ.allocUnsafeSlow:Uint8Array,Eq=R$?UJ:Uint8Array,Fq=256,Pq=R$?4294967296:2144337920;var OQ,T,n,R=0,j8,Q0=null,_Y=61440,gY=/[\u0080-\uFFFF]/,S0=Symbol("record-id");class zJ extends N8{constructor($){super($);this.offset=0;let J,Q,q,X,Z,G;$=$||{};let Y=Eq.prototype.utf8Write?function(K,A,I){return T.utf8Write(K,A,I)}:GJ&&GJ.encodeInto?function(K,A){return GJ.encodeInto(K,T.subarray(A)).written}:!1,U=this,W=$.structures||$.saveStructures,z=$.maxSharedStructures;if(z==null)z=W?128:0;if(z>8190)throw new Error("Maximum maxSharedStructure is 8190");let M=$.sequential;if(M)z=0;if(!this.structures)this.structures=[];if(this.saveStructures)this.saveShared=this.saveStructures;let O,N,j=$.sharedValues,E;if(j){E=Object.create(null);for(let K=0,A=j.length;K<A;K++)E[j[K]]=K}let D=[],L=0,V=0;this.mapEncode=function(K,A){if(this._keyMap&&!this._mapped)switch(K.constructor.name){case"Array":K=K.map((I)=>this.encodeKeys(I));break}return this.encode(K,A)},this.encode=function(K,A){if(!T)T=new KQ(8192),n=new DataView(T.buffer,0,8192),R=0;if(j8=T.length-10,j8-R<2048)T=new KQ(T.length),n=new DataView(T.buffer,0,T.length),j8=T.length-10,R=0;else if(A===RQ)R=R+7&2147483640;if(Q=R,U.useSelfDescribedHeader)n.setUint32(R,3654940416),R+=3;if(G=U.structuredClone?new Map:null,U.bundleStrings&&typeof K!=="string")Q0=[],Q0.size=1/0;else Q0=null;if(q=U.structures,q){if(q.uninitialized){let w=U.getShared()||{};U.structures=q=w.structures||[],U.sharedVersion=w.version;let f=U.sharedValues=w.packedValues;if(f){E={};for(let _=0,b=f.length;_<b;_++)E[f[_]]=_}}let I=q.length;if(I>z&&!M)I=z;if(!q.transitions){q.transitions=Object.create(null);for(let w=0;w<I;w++){let f=q[w];if(!f)continue;let _,b=q.transitions;for(let u=0,p=f.length;u<p;u++){if(b[S0]===void 0)b[S0]=w;let m=f[u];if(_=b[m],!_)_=b[m]=Object.create(null);b=_}b[S0]=w|1048576}}if(!M)q.nextId=I}if(X)X=!1;if(Z=q||[],N=E,$.pack){let I=new Map;if(I.values=[],I.encoder=U,I.maxValues=$.maxPrivatePackedValues||(E?16:1/0),I.objectMap=E||!1,I.samplingPackedValues=O,YJ(K,I),I.values.length>0){T[R++]=216,T[R++]=51,r0(4);let w=I.values;H(w),r0(0),r0(0),N=Object.create(E||null);for(let f=0,_=w.length;f<_;f++)N[w[f]]=f}}OQ=A&VQ;try{if(OQ)return;if(H(K),Q0)kq(Q,H);if(U.offset=R,G&&G.idsToInsert){if(R+=G.idsToInsert.length*2,R>j8)x(R);U.offset=R;let I=mY(T.subarray(Q,R),G.idsToInsert);return G=null,I}if(A&RQ)return T.start=Q,T.end=R,T;return T.subarray(Q,R)}finally{if(q){if(V<10)V++;if(q.length>z)q.length=z;if(L>1e4){if(q.transitions=null,V=0,L=0,D.length>0)D=[]}else if(D.length>0&&!M){for(let I=0,w=D.length;I<w;I++)D[I][S0]=void 0;D=[]}}if(X&&U.saveShared){if(U.structures.length>z)U.structures=U.structures.slice(0,z);let I=T.subarray(Q,R);if(U.updateSharedData()===!1)return U.encode(K);return I}if(A&dY)R=Q}},this.findCommonStringsToPack=()=>{if(O=new Map,!E)E=Object.create(null);return(K)=>{let A=K&&K.threshold||4,I=this.pack?K.maxPrivatePackedValues||16:0;if(!j)j=this.sharedValues=[];for(let[w,f]of O)if(f.count>A)E[w]=I++,j.push(w),X=!0;while(this.saveShared&&this.updateSharedData()===!1);O=null}};let H=(K)=>{if(R>j8)T=x(R);var A=typeof K,I;if(A==="string"){if(N){let b=N[K];if(b>=0){if(b<16)T[R++]=b+224;else if(T[R++]=198,b&1)H(15-b>>1);else H(b-16>>1);return}else if(O&&!$.pack){let u=O.get(K);if(u)u.count++;else O.set(K,{count:1})}}let w=K.length;if(Q0&&w>=4&&w<1024){if((Q0.size+=w)>_Y){let u,p=(Q0[0]?Q0[0].length*3+Q0[1].length:0)+10;if(R+p>j8)T=x(R+p);if(T[R++]=217,T[R++]=223,T[R++]=249,T[R++]=Q0.position?132:130,T[R++]=26,u=R-Q,R+=4,Q0.position)kq(Q,H);Q0=["",""],Q0.size=0,Q0.position=u}let b=gY.test(K);Q0[b?0:1]+=K,T[R++]=b?206:207,H(w);return}let f;if(w<32)f=1;else if(w<256)f=2;else if(w<65536)f=3;else f=5;let _=w*3;if(R+_>j8)T=x(R+_);if(w<64||!Y){let b,u,p,m=R+f;for(b=0;b<w;b++)if(u=K.charCodeAt(b),u<128)T[m++]=u;else if(u<2048)T[m++]=u>>6|192,T[m++]=u&63|128;else if((u&64512)===55296&&((p=K.charCodeAt(b+1))&64512)===56320)u=65536+((u&1023)<<10)+(p&1023),b++,T[m++]=u>>18|240,T[m++]=u>>12&63|128,T[m++]=u>>6&63|128,T[m++]=u&63|128;else T[m++]=u>>12|224,T[m++]=u>>6&63|128,T[m++]=u&63|128;I=m-R-f}else I=Y(K,R+f,_);if(I<24)T[R++]=96|I;else if(I<256){if(f<2)T.copyWithin(R+2,R+1,R+1+I);T[R++]=120,T[R++]=I}else if(I<65536){if(f<3)T.copyWithin(R+3,R+2,R+2+I);T[R++]=121,T[R++]=I>>8,T[R++]=I&255}else{if(f<5)T.copyWithin(R+5,R+3,R+3+I);T[R++]=122,n.setUint32(R,I),R+=4}R+=I}else if(A==="number")if(!this.alwaysUseFloat&&K>>>0===K)if(K<24)T[R++]=K;else if(K<256)T[R++]=24,T[R++]=K;else if(K<65536)T[R++]=25,T[R++]=K>>8,T[R++]=K&255;else T[R++]=26,n.setUint32(R,K),R+=4;else if(!this.alwaysUseFloat&&K>>0===K)if(K>=-24)T[R++]=31-K;else if(K>=-256)T[R++]=56,T[R++]=~K;else if(K>=-65536)T[R++]=57,n.setUint16(R,~K),R+=2;else T[R++]=58,n.setUint32(R,~K),R+=4;else{let w;if((w=this.useFloat32)>0&&K<4294967296&&K>=-2147483648){T[R++]=250,n.setFloat32(R,K);let f;if(w<4||(f=K*XJ[(T[R]&127)<<1|T[R+1]>>7])>>0===f){R+=4;return}else R--}T[R++]=251,n.setFloat64(R,K),R+=8}else if(A==="object")if(!K)T[R++]=246;else{if(G){let f=G.get(K);if(f){if(T[R++]=216,T[R++]=29,T[R++]=25,!f.references){let _=G.idsToInsert||(G.idsToInsert=[]);f.references=[],_.push(f)}f.references.push(R-Q),R+=2;return}else G.set(K,{offset:R-Q})}let w=K.constructor;if(w===Object)F(K);else if(w===Array){if(I=K.length,I<24)T[R++]=128|I;else r0(I);for(let f=0;f<I;f++)H(K[f])}else if(w===Map){if(this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)T[R++]=217,T[R++]=1,T[R++]=3;if(I=K.size,I<24)T[R++]=160|I;else if(I<256)T[R++]=184,T[R++]=I;else if(I<65536)T[R++]=185,T[R++]=I>>8,T[R++]=I&255;else T[R++]=186,n.setUint32(R,I),R+=4;if(U.keyMap)for(let[f,_]of K)H(U.encodeKey(f)),H(_);else for(let[f,_]of K)H(f),H(_)}else{for(let f=0,_=NQ.length;f<_;f++){let b=xq[f];if(K instanceof b){let u=NQ[f],p=u.tag;if(p==null)p=u.getTag&&u.getTag.call(this,K);if(p<24)T[R++]=192|p;else if(p<256)T[R++]=216,T[R++]=p;else if(p<65536)T[R++]=217,T[R++]=p>>8,T[R++]=p&255;else if(p>-1)T[R++]=218,n.setUint32(R,p),R+=4;u.encode.call(this,K,H,x);return}}if(K[Symbol.iterator]){if(OQ){let f=new Error("Iterable should be serialized as iterator");throw f.iteratorNotHandled=!0,f}T[R++]=159;for(let f of K)H(f);T[R++]=255;return}if(K[Symbol.asyncIterator]||DQ(K)){let f=new Error("Iterable/blob should be serialized as iterator");throw f.iteratorNotHandled=!0,f}if(this.useToJSON&&K.toJSON){let f=K.toJSON();if(f!==K)return H(f)}F(K)}}else if(A==="boolean")T[R++]=K?245:244;else if(A==="bigint"){if(K<BigInt(1)<<BigInt(64)&&K>=0)T[R++]=27,n.setBigUint64(R,K);else if(K>-(BigInt(1)<<BigInt(64))&&K<0)T[R++]=59,n.setBigUint64(R,-K-BigInt(1));else if(this.largeBigIntToFloat)T[R++]=251,n.setFloat64(R,Number(K));else{if(K>=BigInt(0))T[R++]=194;else T[R++]=195,K=BigInt(-1)-K;let w=[];while(K)w.push(Number(K&BigInt(255))),K>>=BigInt(8);jQ(new Uint8Array(w.reverse()),x);return}R+=8}else if(A==="undefined")T[R++]=247;else throw new Error("Unknown type: "+A)},F=this.useRecords===!1?this.variableMapSize?(K)=>{let A=Object.keys(K),I=Object.values(K),w=A.length;if(w<24)T[R++]=160|w;else if(w<256)T[R++]=184,T[R++]=w;else if(w<65536)T[R++]=185,T[R++]=w>>8,T[R++]=w&255;else T[R++]=186,n.setUint32(R,w),R+=4;let f;if(U.keyMap)for(let _=0;_<w;_++)H(U.encodeKey(A[_])),H(I[_]);else for(let _=0;_<w;_++)H(A[_]),H(I[_])}:(K)=>{T[R++]=185;let A=R-Q;R+=2;let I=0;if(U.keyMap){for(let w in K)if(typeof K.hasOwnProperty!=="function"||K.hasOwnProperty(w))H(U.encodeKey(w)),H(K[w]),I++}else for(let w in K)if(typeof K.hasOwnProperty!=="function"||K.hasOwnProperty(w))H(w),H(K[w]),I++;T[A+++Q]=I>>8,T[A+Q]=I&255}:(K,A)=>{let I,w=Z.transitions||(Z.transitions=Object.create(null)),f=0,_=0,b,u;if(this.keyMap){u=Object.keys(K).map((m)=>this.encodeKey(m)),_=u.length;for(let m=0;m<_;m++){let D0=u[m];if(I=w[D0],!I)I=w[D0]=Object.create(null),f++;w=I}}else for(let m in K)if(typeof K.hasOwnProperty!=="function"||K.hasOwnProperty(m)){if(I=w[m],!I){if(w[S0]&1048576)b=w[S0]&65535;I=w[m]=Object.create(null),f++}w=I,_++}let p=w[S0];if(p!==void 0)p&=65535,T[R++]=217,T[R++]=p>>8|224,T[R++]=p&255;else{if(!u)u=w.__keys__||(w.__keys__=Object.keys(K));if(b===void 0){if(p=Z.nextId++,!p)p=0,Z.nextId=1;if(p>=Fq)Z.nextId=(p=z)+1}else p=b;if(Z[p]=u,p<z){T[R++]=217,T[R++]=p>>8|224,T[R++]=p&255,w=Z.transitions;for(let m=0;m<_;m++){if(w[S0]===void 0||w[S0]&1048576)w[S0]=p;w=w[u[m]]}w[S0]=p|1048576,X=!0}else{if(w[S0]=p,n.setUint32(R,3655335680),R+=3,f)L+=V*f;if(D.length>=Fq-z)D.shift()[S0]=void 0;if(D.push(w),r0(_+2),H(57344+p),H(u),A)return;for(let m in K)if(typeof K.hasOwnProperty!=="function"||K.hasOwnProperty(m))H(K[m]);return}}if(_<24)T[R++]=128|_;else r0(_);if(A)return;for(let m in K)if(typeof K.hasOwnProperty!=="function"||K.hasOwnProperty(m))H(K[m])},x=(K)=>{let A;if(K>16777216){if(K-Q>Pq)throw new Error("Encoded buffer would be larger than maximum buffer size");A=Math.min(Pq,Math.round(Math.max((K-Q)*(K>67108864?1.25:2),4194304)/4096)*4096)}else A=(Math.max(K-Q<<2,T.length-1)>>12)+1<<12;let I=new KQ(A);if(n=new DataView(I.buffer,0,A),T.copy)T.copy(I,0,Q,K);else I.set(T.slice(Q,K));return R-=Q,Q=0,j8=I.length-10,T=I},g=100,v=1000;this.encodeAsIterable=function(K,A){return S(K,A,C)},this.encodeAsAsyncIterable=function(K,A){return S(K,A,y)};function*C(K,A,I){let w=K.constructor;if(w===Object){let f=U.useRecords!==!1;if(f)F(K,!0);else fq(Object.keys(K).length,160);for(let _ in K){let b=K[_];if(!f)H(_);if(b&&typeof b==="object")if(A[_])yield*C(b,A[_]);else yield*B(b,A,_);else H(b)}}else if(w===Array){let f=K.length;r0(f);for(let _=0;_<f;_++){let b=K[_];if(b&&(typeof b==="object"||R-Q>g))if(A.element)yield*C(b,A.element);else yield*B(b,A,"element");else H(b)}}else if(K[Symbol.iterator]&&!K.buffer){T[R++]=159;for(let f of K)if(f&&(typeof f==="object"||R-Q>g))if(A.element)yield*C(f,A.element);else yield*B(f,A,"element");else H(f);T[R++]=255}else if(DQ(K))fq(K.size,64),yield T.subarray(Q,R),yield K,P();else if(K[Symbol.asyncIterator])T[R++]=159,yield T.subarray(Q,R),yield K,P(),T[R++]=255;else H(K);if(I&&R>Q)yield T.subarray(Q,R);else if(R-Q>g)yield T.subarray(Q,R),P()}function*B(K,A,I){let w=R-Q;try{if(H(K),R-Q>g)yield T.subarray(Q,R),P()}catch(f){if(f.iteratorNotHandled)A[I]={},R=Q+w,yield*C.call(this,K,A[I]);else throw f}}function P(){g=v,U.encode(null,VQ)}function S(K,A,I){if(A&&A.chunkThreshold)g=v=A.chunkThreshold;else g=100;if(K&&typeof K==="object")return U.encode(null,VQ),I(K,U.iterateProperties||(U.iterateProperties={}),!0);return[U.encode(K)]}async function*y(K,A){for(let I of C(K,A,!0)){let w=I.constructor;if(w===Eq||w===Uint8Array)yield I;else if(DQ(I)){let f=I.stream().getReader(),_;while(!(_=await f.read()).done)yield _.value}else if(I[Symbol.asyncIterator])for await(let f of I)if(P(),f)yield*y(f,A.async||(A.async={}));else yield U.encode(f);else yield I}}}useBuffer($){T=$,n=new DataView(T.buffer,T.byteOffset,T.byteLength),R=0}clearSharedData(){if(this.structures)this.structures=[];if(this.sharedValues)this.sharedValues=void 0}updateSharedData(){let $=this.sharedVersion||0;this.sharedVersion=$+1;let J=this.structures.slice(0),Q=new HQ(J,this.sharedValues,this.sharedVersion),q=this.saveShared(Q,(X)=>(X&&X.version||0)==$);if(q===!1)Q=this.getShared()||{},this.structures=Q.structures||[],this.sharedValues=Q.packedValues,this.sharedVersion=Q.version,this.structures.nextId=this.structures.length;else J.forEach((X,Z)=>this.structures[Z]=X);return q}}function fq($,J){if($<24)T[R++]=J|$;else if($<256)T[R++]=J|24,T[R++]=$;else if($<65536)T[R++]=J|25,T[R++]=$>>8,T[R++]=$&255;else T[R++]=J|26,n.setUint32(R,$),R+=4}class HQ{constructor($,J,Q){this.structures=$,this.packedValues=J,this.version=Q}}function r0($){if($<24)T[R++]=128|$;else if($<256)T[R++]=152,T[R++]=$;else if($<65536)T[R++]=153,T[R++]=$>>8,T[R++]=$&255;else T[R++]=154,n.setUint32(R,$),R+=4}var bY=typeof Blob==="undefined"?function(){}:Blob;function DQ($){if($ instanceof bY)return!0;let J=$[Symbol.toStringTag];return J==="Blob"||J==="File"}function YJ($,J){switch(typeof $){case"string":if($.length>3){if(J.objectMap[$]>-1||J.values.length>=J.maxValues)return;let q=J.get($);if(q){if(++q.count==2)J.values.push($)}else if(J.set($,{count:1}),J.samplingPackedValues){let X=J.samplingPackedValues.get($);if(X)X.count++;else J.samplingPackedValues.set($,{count:1})}}break;case"object":if($)if($ instanceof Array)for(let q=0,X=$.length;q<X;q++)YJ($[q],J);else{let q=!J.encoder.useRecords;for(var Q in $)if($.hasOwnProperty(Q)){if(q)YJ(Q,J);YJ($[Q],J)}}break;case"function":console.log($)}}var yY=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;xq=[Date,Set,Error,RegExp,o0,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?function(){}:BigInt64Array,Float32Array,Float64Array,HQ];NQ=[{tag:1,encode($,J){let Q=$.getTime()/1000;if((this.useTimestamp32||$.getMilliseconds()===0)&&Q>=0&&Q<4294967296)T[R++]=26,n.setUint32(R,Q),R+=4;else T[R++]=251,n.setFloat64(R,Q),R+=8}},{tag:258,encode($,J){let Q=Array.from($);J(Q)}},{tag:27,encode($,J){J([$.name,$.message])}},{tag:27,encode($,J){J(["RegExp",$.source,$.flags])}},{getTag($){return $.tag},encode($,J){J($.value)}},{encode($,J,Q){jQ($,Q)}},{getTag($){if($.constructor===Uint8Array){if(this.tagUint8Array||R$&&this.tagUint8Array!==!1)return 64}},encode($,J,Q){jQ($,Q)}},n0(68,1),n0(69,2),n0(70,4),n0(71,8),n0(72,1),n0(77,2),n0(78,4),n0(79,8),n0(85,4),n0(86,8),{encode($,J){let Q=$.packedValues||[],q=$.structures||[];if(Q.values.length>0){T[R++]=216,T[R++]=51,r0(4);let X=Q.values;J(X),r0(0),r0(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let Z=0,G=X.length;Z<G;Z++)packedObjectMap[X[Z]]=Z}if(q){n.setUint32(R,3655335424),R+=3;let X=q.slice(0);X.unshift(57344),X.push(new o0($.version,1399353956)),J(X)}else J(new o0($.version,1399353956))}}];function n0($,J){if(!yY&&J>1)$-=4;return{tag:$,encode:function Q(q,X){let Z=q.byteLength,G=q.byteOffset||0,Y=q.buffer||q;X(R$?UJ.from(Y,G,Z):new Uint8Array(Y,G,Z))}}}function jQ($,J){let Q=$.byteLength;if(Q<24)T[R++]=64+Q;else if(Q<256)T[R++]=88,T[R++]=Q;else if(Q<65536)T[R++]=89,T[R++]=Q>>8,T[R++]=Q&255;else T[R++]=90,n.setUint32(R,Q),R+=4;if(R+Q>=T.length)J(R+Q);T.set($.buffer?$:new Uint8Array($),R),R+=Q}function mY($,J){let Q,q=J.length*2,X=$.length-q;J.sort((Z,G)=>Z.offset>G.offset?1:-1);for(let Z=0;Z<J.length;Z++){let G=J[Z];G.id=Z;for(let Y of G.references)$[Y++]=Z>>8,$[Y]=Z&255}while(Q=J.pop()){let Z=Q.offset;$.copyWithin(Z+q,Z,X),q-=2;let G=Z+q;$[G++]=216,$[G++]=28,X=Z}return $}function kq($,J){n.setUint32(Q0.position+$,R-Q0.position-$+1);let Q=Q0;Q0=null,J(Q[0]),J(Q[1])}var CQ=new zJ({useRecords:!1}),hY=CQ.encode,uY=CQ.encodeAsIterable,pY=CQ.encodeAsAsyncIterable;var RQ=512,dY=1024,VQ=2048;var WJ=($)=>{let J=new Uint8Array($);return btoa(String.fromCharCode(...J)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},vq=($)=>{let J=atob($.replace(/-/g,"+").replace(/_/g,"/")),Q=new Uint8Array(J.length);for(let q=0;q<J.length;q++)Q[q]=J.charCodeAt(q);return Q.buffer};async function _q($){let J=crypto.getRandomValues(new Uint8Array(32)),q=new TextEncoder().encode($),X=await crypto.subtle.digest("SHA-256",q),Z=new Uint8Array(X).slice(0,16),G=await navigator.credentials.create({publicKey:{challenge:J,rp:{name:"Sorane Web/A Form"},user:{id:Z,name:$,displayName:$},pubKeyCredParams:[{alg:-7,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required",residentKey:"required"},timeout:60000,attestation:"none",extensions:{prf:{}}}});if(!G)throw new Error("Credential creation failed");return{id:G.id,rawId:WJ(G.rawId),response:G.response}}async function gq($,J){let Q=await navigator.credentials.get({publicKey:{challenge:J,allowCredentials:[{id:vq($),type:"public-key"}],userVerification:"required"}});if(!Q)throw new Error("Assertion failed");let q=Q.response;return{id:Q.id,signature:WJ(q.signature),authenticatorData:WJ(q.authenticatorData),clientDataJSON:WJ(q.clientDataJSON)}}async function i8($,J){let Q=crypto.getRandomValues(new Uint8Array(32)),q=await navigator.credentials.get({publicKey:{challenge:Q,allowCredentials:[{id:vq($),type:"public-key"}],userVerification:"required",extensions:{prf:{eval:{first:J}}}}});if(!q)throw new Error("Assertion failed");let Z=q.getClientExtensionResults()?.prf?.results?.first;if(!Z)throw new Error("PRF extension not available");return new Uint8Array(Z)}function H$($){return Array.from($).map((J)=>J.toString(16).padStart(2,"0")).join("")}function bq($){let J=new Uint8Array($.length/2);for(let Q=0;Q<J.length;Q++)J[Q]=parseInt($.substring(Q*2,Q*2+2),16);return J}class mq{usePasskey=!0;credentialId=null;publicKey=null;publicKeyType="ed25519";edPrivateKey=null;constructor(){this.loadKey()}loadKey(){if(typeof localStorage==="undefined")return;let $=localStorage.getItem("weba_passkey_id"),J=localStorage.getItem("weba_passkey_pub");if($&&J){this.credentialId=$,this.publicKey=bq(J),this.publicKeyType="p256",this.usePasskey=!0;return}let Q=localStorage.getItem("weba_private_key");if(Q)this.edPrivateKey=bq(Q),this.publicKey=O$.getPublicKey(this.edPrivateKey),this.publicKeyType="ed25519",this.usePasskey=!1}resetKey(){if(typeof localStorage!=="undefined")localStorage.removeItem("weba_passkey_id"),localStorage.removeItem("weba_passkey_pub"),localStorage.removeItem("weba_private_key");this.credentialId=null,this.publicKey=null,this.edPrivateKey=null}async register(){try{let $=prompt("Enter a name for this Passkey:","demo-user")||"User";console.log(`Registering Passkey for ${$}...`);let J=await _q($),Q=new Uint8Array(J.response.attestationObject),X=ZJ(Q).authData,Z=new DataView(X.buffer,X.byteOffset,X.byteLength),G=53,Y=Z.getUint16(G);G+=2,G+=Y;let U=X.slice(G),W=ZJ(U),z=W.get(-2),M=W.get(-3);if(!z||!M)throw new Error("Invalid COSE Key: x or y missing");let O=new Uint8Array(65);if(O[0]=4,O.set(z,1),O.set(M,33),this.credentialId=J.rawId,this.publicKey=O,this.publicKeyType="p256",this.usePasskey=!0,typeof localStorage!=="undefined")localStorage.setItem("weba_passkey_id",this.credentialId),localStorage.setItem("weba_passkey_pub",H$(this.publicKey));return console.log("Passkey Registered:",this.credentialId),!0}catch($){return console.warn("Passkey registration failed, falling back to Ed25519",$),this.generateEdKey(),!1}}generateEdKey(){if(this.edPrivateKey=O$.utils.randomSecretKey(),this.publicKey=O$.getPublicKey(this.edPrivateKey),this.publicKeyType="ed25519",this.usePasskey=!1,typeof localStorage!=="undefined")localStorage.setItem("weba_private_key",H$(this.edPrivateKey))}getIssuerDid(){if(!this.publicKey)return"";return`did:key:z${H$(this.publicKey)}`}getPublicKey(){return this.publicKey?H$(this.publicKey):""}async sign($,J="authentication"){if(!this.publicKey)await this.register();let Q=yq.default($),q=new TextEncoder().encode(Q);if(this.usePasskey&&this.credentialId){let X=await crypto.subtle.digest("SHA-256",q),Z=await gq(this.credentialId,X);return{...$,proof:{type:"PasskeySignature2025",created:new Date().toISOString(),verificationMethod:this.getIssuerDid(),proofPurpose:J,proofValue:Z.signature,"srn:authenticatorData":Z.authenticatorData,"srn:clientDataJSON":Z.clientDataJSON,"srn:credentialId":Z.id}}}else{if(!this.edPrivateKey)this.generateEdKey();let X=O$.sign(q,this.edPrivateKey);return{...$,proof:{type:"Ed25519Signature2020",created:new Date().toISOString(),verificationMethod:this.getIssuerDid(),proofPurpose:J,proofValue:H$(X)}}}}async derivePrf($){if(!this.credentialId)return null;try{return await i8(this.credentialId,$)}catch(J){return console.error("PRF derivation failed",J),null}}}var h0=new mq;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function C$($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function s0($,J=""){if(!Number.isSafeInteger($)||$<0){let Q=J&&`"${J}" `;throw new Error(`${Q}expected integer >= 0, got ${$}`)}}function o($,J,Q=""){let q=C$($),X=$?.length,Z=J!==void 0;if(!q||Z&&X!==J){let G=Q&&`"${Q}" `,Y=Z?` of length ${J}`:"",U=q?`length=${X}`:`type=${typeof $}`;throw new Error(G+"expected Uint8Array"+Y+", got "+U)}return $}function B$($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash must wrapped by utils.createHasher");s0($.outputLen),s0($.blockLen)}function o8($,J=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(J&&$.finished)throw new Error("Hash#digest() has already been called")}function uq($,J){o($,void 0,"digestInto() output");let Q=J.outputLen;if($.length<Q)throw new Error('"digestInto() output" expected to be of length >='+Q)}function u0(...$){for(let J=0;J<$.length;J++)$[J].fill(0)}function MJ($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function p0($,J){return $<<32-J|$>>>J}var pq=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),cY=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function n8($){if(o($),pq)return $.toHex();let J="";for(let Q=0;Q<$.length;Q++)J+=cY[$[Q]];return J}var G8={_0:48,_9:57,A:65,F:70,a:97,f:102};function hq($){if($>=G8._0&&$<=G8._9)return $-G8._0;if($>=G8.A&&$<=G8.F)return $-(G8.A-10);if($>=G8.a&&$<=G8.f)return $-(G8.a-10);return}function r8($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(pq)return Uint8Array.fromHex($);let J=$.length,Q=J/2;if(J%2)throw new Error("hex string expected, got unpadded hex of length "+J);let q=new Uint8Array(Q);for(let X=0,Z=0;X<Q;X++,Z+=2){let G=hq($.charCodeAt(Z)),Y=hq($.charCodeAt(Z+1));if(G===void 0||Y===void 0){let U=$[Z]+$[Z+1];throw new Error('hex string expected, got non-hex character "'+U+'" at index '+Z)}q[X]=G*16+Y}return q}function R8(...$){let J=0;for(let q=0;q<$.length;q++){let X=$[q];o(X),J+=X.length}let Q=new Uint8Array(J);for(let q=0,X=0;q<$.length;q++){let Z=$[q];Q.set(Z,X),X+=Z.length}return Q}function BQ($,J={}){let Q=(X,Z)=>$(Z).update(X).digest(),q=$(void 0);return Q.outputLen=q.outputLen,Q.blockLen=q.blockLen,Q.create=(X)=>$(X),Object.assign(Q,J),Object.freeze(Q)}function s8($=32){let J=typeof globalThis==="object"?globalThis.crypto:null;if(typeof J?.getRandomValues!=="function")throw new Error("crypto.getRandomValues must be defined");return J.getRandomValues(new Uint8Array($))}var IQ=($)=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,$])});function dq($,J,Q){return $&J^~$&Q}function cq($,J,Q){return $&J^$&Q^J&Q}class KJ{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor($,J,Q,q){this.blockLen=$,this.outputLen=J,this.padOffset=Q,this.isLE=q,this.buffer=new Uint8Array($),this.view=MJ(this.buffer)}update($){o8(this),o($);let{view:J,buffer:Q,blockLen:q}=this,X=$.length;for(let Z=0;Z<X;){let G=Math.min(q-this.pos,X-Z);if(G===q){let Y=MJ($);for(;q<=X-Z;Z+=q)this.process(Y,Z);continue}if(Q.set($.subarray(Z,Z+G),this.pos),this.pos+=G,Z+=G,this.pos===q)this.process(J,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){o8(this),uq($,this),this.finished=!0;let{buffer:J,view:Q,blockLen:q,isLE:X}=this,{pos:Z}=this;if(J[Z++]=128,u0(this.buffer.subarray(Z)),this.padOffset>q-Z)this.process(Q,0),Z=0;for(let z=Z;z<q;z++)J[z]=0;Q.setBigUint64(q-8,BigInt(this.length*8),X),this.process(Q,0);let G=MJ($),Y=this.outputLen;if(Y%4)throw new Error("_sha2: outputLen must be aligned to 32bit");let U=Y/4,W=this.get();if(U>W.length)throw new Error("_sha2: outputLen bigger than state");for(let z=0;z<U;z++)G.setUint32(4*z,W[z],X)}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let Q=$.slice(0,J);return this.destroy(),Q}_cloneInto($){$||=new this.constructor,$.set(...this.get());let{blockLen:J,buffer:Q,length:q,finished:X,destroyed:Z,pos:G}=this;if($.destroyed=Z,$.finished=X,$.length=q,$.pos=G,q%J)$.buffer.set(Q);return $}clone(){return this._cloneInto()}}var Y8=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),U8=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),W0=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),M0=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var OJ=BigInt(4294967295),lq=BigInt(32);function lY($,J=!1){if(J)return{h:Number($&OJ),l:Number($>>lq&OJ)};return{h:Number($>>lq&OJ)|0,l:Number($&OJ)|0}}function iq($,J=!1){let Q=$.length,q=new Uint32Array(Q),X=new Uint32Array(Q);for(let Z=0;Z<Q;Z++){let{h:G,l:Y}=lY($[Z],J);[q[Z],X[Z]]=[G,Y]}return[q,X]}var LQ=($,J,Q)=>$>>>Q,TQ=($,J,Q)=>$<<32-Q|J>>>Q,S8=($,J,Q)=>$>>>Q|J<<32-Q,x8=($,J,Q)=>$<<32-Q|J>>>Q,I$=($,J,Q)=>$<<64-Q|J>>>Q-32,L$=($,J,Q)=>$>>>Q-32|J<<64-Q;function a0($,J,Q,q){let X=(J>>>0)+(q>>>0);return{h:$+Q+(X/4294967296|0)|0,l:X|0}}var oq=($,J,Q)=>($>>>0)+(J>>>0)+(Q>>>0),nq=($,J,Q,q)=>J+Q+q+($/4294967296|0)|0,rq=($,J,Q,q)=>($>>>0)+(J>>>0)+(Q>>>0)+(q>>>0),sq=($,J,Q,q,X)=>J+Q+q+X+($/4294967296|0)|0,aq=($,J,Q,q,X)=>($>>>0)+(J>>>0)+(Q>>>0)+(q>>>0)+(X>>>0),tq=($,J,Q,q,X,Z)=>J+Q+q+X+Z+($/4294967296|0)|0;var oY=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),H8=new Uint32Array(64);class AQ extends KJ{constructor($){super(64,$,8,!1)}get(){let{A:$,B:J,C:Q,D:q,E:X,F:Z,G,H:Y}=this;return[$,J,Q,q,X,Z,G,Y]}set($,J,Q,q,X,Z,G,Y){this.A=$|0,this.B=J|0,this.C=Q|0,this.D=q|0,this.E=X|0,this.F=Z|0,this.G=G|0,this.H=Y|0}process($,J){for(let z=0;z<16;z++,J+=4)H8[z]=$.getUint32(J,!1);for(let z=16;z<64;z++){let M=H8[z-15],O=H8[z-2],N=p0(M,7)^p0(M,18)^M>>>3,j=p0(O,17)^p0(O,19)^O>>>10;H8[z]=j+H8[z-7]+N+H8[z-16]|0}let{A:Q,B:q,C:X,D:Z,E:G,F:Y,G:U,H:W}=this;for(let z=0;z<64;z++){let M=p0(G,6)^p0(G,11)^p0(G,25),O=W+M+dq(G,Y,U)+oY[z]+H8[z]|0,j=(p0(Q,2)^p0(Q,13)^p0(Q,22))+cq(Q,q,X)|0;W=U,U=Y,Y=G,G=Z+O|0,Z=X,X=q,q=Q,Q=O+j|0}Q=Q+this.A|0,q=q+this.B|0,X=X+this.C|0,Z=Z+this.D|0,G=G+this.E|0,Y=Y+this.F|0,U=U+this.G|0,W=W+this.H|0,this.set(Q,q,X,Z,G,Y,U,W)}roundClean(){u0(H8)}destroy(){this.set(0,0,0,0,0,0,0,0),u0(this.buffer)}}class eq extends AQ{A=Y8[0]|0;B=Y8[1]|0;C=Y8[2]|0;D=Y8[3]|0;E=Y8[4]|0;F=Y8[5]|0;G=Y8[6]|0;H=Y8[7]|0;constructor(){super(32)}}class nY extends AQ{A=U8[0]|0;B=U8[1]|0;C=U8[2]|0;D=U8[3]|0;E=U8[4]|0;F=U8[5]|0;G=U8[6]|0;H=U8[7]|0;constructor(){super(28)}}var $X=(()=>iq(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),rY=(()=>$X[0])(),sY=(()=>$X[1])(),C8=new Uint32Array(80),B8=new Uint32Array(80);class T$ extends KJ{constructor($){super(128,$,16,!1)}get(){let{Ah:$,Al:J,Bh:Q,Bl:q,Ch:X,Cl:Z,Dh:G,Dl:Y,Eh:U,El:W,Fh:z,Fl:M,Gh:O,Gl:N,Hh:j,Hl:E}=this;return[$,J,Q,q,X,Z,G,Y,U,W,z,M,O,N,j,E]}set($,J,Q,q,X,Z,G,Y,U,W,z,M,O,N,j,E){this.Ah=$|0,this.Al=J|0,this.Bh=Q|0,this.Bl=q|0,this.Ch=X|0,this.Cl=Z|0,this.Dh=G|0,this.Dl=Y|0,this.Eh=U|0,this.El=W|0,this.Fh=z|0,this.Fl=M|0,this.Gh=O|0,this.Gl=N|0,this.Hh=j|0,this.Hl=E|0}process($,J){for(let V=0;V<16;V++,J+=4)C8[V]=$.getUint32(J),B8[V]=$.getUint32(J+=4);for(let V=16;V<80;V++){let H=C8[V-15]|0,F=B8[V-15]|0,x=S8(H,F,1)^S8(H,F,8)^LQ(H,F,7),g=x8(H,F,1)^x8(H,F,8)^TQ(H,F,7),v=C8[V-2]|0,C=B8[V-2]|0,B=S8(v,C,19)^I$(v,C,61)^LQ(v,C,6),P=x8(v,C,19)^L$(v,C,61)^TQ(v,C,6),S=rq(g,P,B8[V-7],B8[V-16]),y=sq(S,x,B,C8[V-7],C8[V-16]);C8[V]=y|0,B8[V]=S|0}let{Ah:Q,Al:q,Bh:X,Bl:Z,Ch:G,Cl:Y,Dh:U,Dl:W,Eh:z,El:M,Fh:O,Fl:N,Gh:j,Gl:E,Hh:D,Hl:L}=this;for(let V=0;V<80;V++){let H=S8(z,M,14)^S8(z,M,18)^I$(z,M,41),F=x8(z,M,14)^x8(z,M,18)^L$(z,M,41),x=z&O^~z&j,g=M&N^~M&E,v=aq(L,F,g,sY[V],B8[V]),C=tq(v,D,H,x,rY[V],C8[V]),B=v|0,P=S8(Q,q,28)^I$(Q,q,34)^I$(Q,q,39),S=x8(Q,q,28)^L$(Q,q,34)^L$(Q,q,39),y=Q&X^Q&G^X&G,K=q&Z^q&Y^Z&Y;D=j|0,L=E|0,j=O|0,E=N|0,O=z|0,N=M|0,{h:z,l:M}=a0(U|0,W|0,C|0,B|0),U=G|0,W=Y|0,G=X|0,Y=Z|0,X=Q|0,Z=q|0;let A=oq(B,S,K);Q=nq(A,C,P,y),q=A|0}({h:Q,l:q}=a0(this.Ah|0,this.Al|0,Q|0,q|0)),{h:X,l:Z}=a0(this.Bh|0,this.Bl|0,X|0,Z|0),{h:G,l:Y}=a0(this.Ch|0,this.Cl|0,G|0,Y|0),{h:U,l:W}=a0(this.Dh|0,this.Dl|0,U|0,W|0),{h:z,l:M}=a0(this.Eh|0,this.El|0,z|0,M|0),{h:O,l:N}=a0(this.Fh|0,this.Fl|0,O|0,N|0),{h:j,l:E}=a0(this.Gh|0,this.Gl|0,j|0,E|0),{h:D,l:L}=a0(this.Hh|0,this.Hl|0,D|0,L|0),this.set(Q,q,X,Z,G,Y,U,W,z,M,O,N,j,E,D,L)}roundClean(){u0(C8,B8)}destroy(){u0(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class JX extends T${Ah=M0[0]|0;Al=M0[1]|0;Bh=M0[2]|0;Bl=M0[3]|0;Ch=M0[4]|0;Cl=M0[5]|0;Dh=M0[6]|0;Dl=M0[7]|0;Eh=M0[8]|0;El=M0[9]|0;Fh=M0[10]|0;Fl=M0[11]|0;Gh=M0[12]|0;Gl=M0[13]|0;Hh=M0[14]|0;Hl=M0[15]|0;constructor(){super(64)}}class aY extends T${Ah=W0[0]|0;Al=W0[1]|0;Bh=W0[2]|0;Bl=W0[3]|0;Ch=W0[4]|0;Cl=W0[5]|0;Dh=W0[6]|0;Dl=W0[7]|0;Eh=W0[8]|0;El=W0[9]|0;Fh=W0[10]|0;Fl=W0[11]|0;Gh=W0[12]|0;Gl=W0[13]|0;Hh=W0[14]|0;Hl=W0[15]|0;constructor(){super(48)}}var R0=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),H0=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class tY extends T${Ah=R0[0]|0;Al=R0[1]|0;Bh=R0[2]|0;Bl=R0[3]|0;Ch=R0[4]|0;Cl=R0[5]|0;Dh=R0[6]|0;Dl=R0[7]|0;Eh=R0[8]|0;El=R0[9]|0;Fh=R0[10]|0;Fl=R0[11]|0;Gh=R0[12]|0;Gl=R0[13]|0;Hh=R0[14]|0;Hl=R0[15]|0;constructor(){super(28)}}class eY extends T${Ah=H0[0]|0;Al=H0[1]|0;Bh=H0[2]|0;Bl=H0[3]|0;Ch=H0[4]|0;Cl=H0[5]|0;Dh=H0[6]|0;Dl=H0[7]|0;Eh=H0[8]|0;El=H0[9]|0;Fh=H0[10]|0;Fl=H0[11]|0;Gh=H0[12]|0;Gl=H0[13]|0;Hh=H0[14]|0;Hl=H0[15]|0;constructor(){super(32)}}var P0=BQ(()=>new eq,IQ(1));var QX=BQ(()=>new JX,IQ(3));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var XX=BigInt(0),qX=BigInt(1);function VJ($,J=""){if(typeof $!=="boolean"){let Q=J&&`"${J}" `;throw new Error(Q+"expected boolean, got type="+typeof $)}return $}function $7($){if(typeof $==="bigint"){if(!DJ($))throw new Error("positive bigint expected, got "+$)}else s0($);return $}function ZX($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?XX:BigInt("0x"+$)}function NJ($){return ZX(n8($))}function d0($){return ZX(n8(v8(o($)).reverse()))}function jJ($,J){s0(J),$=$7($);let Q=r8($.toString(16).padStart(J*2,"0"));if(Q.length!==J)throw new Error("number too large");return Q}function RJ($,J){return jJ($,J).reverse()}function v8($){return Uint8Array.from($)}function HJ($){return Uint8Array.from($,(J,Q)=>{let q=J.charCodeAt(0);if(J.length!==1||q>127)throw new Error(`string contains non-ASCII character "${$[Q]}" with code ${q} at position ${Q}`);return q})}var DJ=($)=>typeof $==="bigint"&&XX<=$;function J7($,J,Q){return DJ($)&&DJ(J)&&DJ(Q)&&J<=$&&$<Q}function a8($,J,Q,q){if(!J7(J,Q,q))throw new Error("expected valid "+$+": "+Q+" <= n < "+q+", got "+J)}var GX=($)=>(qX<<BigInt($))-qX;function z8($,J={},Q={}){if(!$||typeof $!=="object")throw new Error("expected valid options object");function q(Z,G,Y){let U=$[Z];if(Y&&U===void 0)return;let W=typeof U;if(W!==G||U===null)throw new Error(`param "${Z}" is invalid: expected ${G}, got ${W}`)}let X=(Z,G)=>Object.entries(Z).forEach(([Y,U])=>q(Y,U,G));X(J,!1),X(Q,!0)}function wQ($){let J=new WeakMap;return(Q,...q)=>{let X=J.get(Q);if(X!==void 0)return X;let Z=$(Q,...q);return J.set(Q,Z),Z}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var A0=BigInt(0),C0=BigInt(1),_8=BigInt(2),zX=BigInt(3),WX=BigInt(4),MX=BigInt(5),Q7=BigInt(7),KX=BigInt(8),q7=BigInt(9),OX=BigInt(16);function r($,J){let Q=$%J;return Q>=A0?Q:J+Q}function _0($,J,Q){let q=$;while(J-- >A0)q*=q,q%=Q;return q}function YX($,J){if($===A0)throw new Error("invert: expected non-zero number");if(J<=A0)throw new Error("invert: expected positive modulus, got "+J);let Q=r($,J),q=J,X=A0,Z=C0,G=C0,Y=A0;while(Q!==A0){let W=q/Q,z=q%Q,M=X-G*W,O=Z-Y*W;q=Q,Q=z,X=G,Z=Y,G=M,Y=O}if(q!==C0)throw new Error("invert: does not exist");return r(X,J)}function EQ($,J,Q){if(!$.eql($.sqr(J),Q))throw new Error("Cannot find square root")}function DX($,J){let Q=($.ORDER+C0)/WX,q=$.pow(J,Q);return EQ($,q,J),q}function X7($,J){let Q=($.ORDER-MX)/KX,q=$.mul(J,_8),X=$.pow(q,Q),Z=$.mul(J,X),G=$.mul($.mul(Z,_8),X),Y=$.mul(Z,$.sub(G,$.ONE));return EQ($,Y,J),Y}function Z7($){let J=CJ($),Q=VX($),q=Q(J,J.neg(J.ONE)),X=Q(J,q),Z=Q(J,J.neg(q)),G=($+Q7)/OX;return(Y,U)=>{let W=Y.pow(U,G),z=Y.mul(W,q),M=Y.mul(W,X),O=Y.mul(W,Z),N=Y.eql(Y.sqr(z),U),j=Y.eql(Y.sqr(M),U);W=Y.cmov(W,z,N),z=Y.cmov(O,M,j);let E=Y.eql(Y.sqr(z),U),D=Y.cmov(W,z,E);return EQ(Y,D,U),D}}function VX($){if($<zX)throw new Error("sqrt is not defined for small field");let J=$-C0,Q=0;while(J%_8===A0)J/=_8,Q++;let q=_8,X=CJ($);while(UX(X,q)===1)if(q++>1000)throw new Error("Cannot find square root: probably non-prime P");if(Q===1)return DX;let Z=X.pow(q,J),G=(J+C0)/_8;return function Y(U,W){if(U.is0(W))return W;if(UX(U,W)!==1)throw new Error("Cannot find square root");let z=Q,M=U.mul(U.ONE,Z),O=U.pow(W,J),N=U.pow(W,G);while(!U.eql(O,U.ONE)){if(U.is0(O))return U.ZERO;let j=1,E=U.sqr(O);while(!U.eql(E,U.ONE))if(j++,E=U.sqr(E),j===z)throw new Error("Cannot find square root");let D=C0<<BigInt(z-j-1),L=U.pow(M,D);z=j,M=U.sqr(L),O=U.mul(O,M),N=U.mul(N,L)}return N}}function G7($){if($%WX===zX)return DX;if($%KX===MX)return X7;if($%OX===q7)return Z7($);return VX($)}var NX=($,J)=>(r($,J)&C0)===C0,Y7=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jX($){let J={ORDER:"bigint",BYTES:"number",BITS:"number"},Q=Y7.reduce((q,X)=>{return q[X]="function",q},J);return z8($,Q),$}function U7($,J,Q){if(Q<A0)throw new Error("invalid exponent, negatives unsupported");if(Q===A0)return $.ONE;if(Q===C0)return J;let q=$.ONE,X=J;while(Q>A0){if(Q&C0)q=$.mul(q,X);X=$.sqr(X),Q>>=C0}return q}function A$($,J,Q=!1){let q=new Array(J.length).fill(Q?$.ZERO:void 0),X=J.reduce((G,Y,U)=>{if($.is0(Y))return G;return q[U]=G,$.mul(G,Y)},$.ONE),Z=$.inv(X);return J.reduceRight((G,Y,U)=>{if($.is0(Y))return G;return q[U]=$.mul(G,q[U]),$.mul(G,Y)},Z),q}function UX($,J){let Q=($.ORDER-C0)/_8,q=$.pow(J,Q),X=$.eql(q,$.ONE),Z=$.eql(q,$.ZERO),G=$.eql(q,$.neg($.ONE));if(!X&&!Z&&!G)throw new Error("invalid Legendre symbol result");return X?1:Z?0:-1}function z7($,J){if(J!==void 0)s0(J);let Q=J!==void 0?J:$.toString(2).length,q=Math.ceil(Q/8);return{nBitLength:Q,nByteLength:q}}class RX{ORDER;BITS;BYTES;isLE;ZERO=A0;ONE=C0;_lengths;_sqrt;_mod;constructor($,J={}){if($<=A0)throw new Error("invalid field: expected ORDER > 0, got "+$);let Q=void 0;if(this.isLE=!1,J!=null&&typeof J==="object"){if(typeof J.BITS==="number")Q=J.BITS;if(typeof J.sqrt==="function")this.sqrt=J.sqrt;if(typeof J.isLE==="boolean")this.isLE=J.isLE;if(J.allowedLengths)this._lengths=J.allowedLengths?.slice();if(typeof J.modFromBytes==="boolean")this._mod=J.modFromBytes}let{nBitLength:q,nByteLength:X}=z7($,Q);if(X>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=$,this.BITS=q,this.BYTES=X,this._sqrt=void 0,Object.preventExtensions(this)}create($){return r($,this.ORDER)}isValid($){if(typeof $!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof $);return A0<=$&&$<this.ORDER}is0($){return $===A0}isValidNot0($){return!this.is0($)&&this.isValid($)}isOdd($){return($&C0)===C0}neg($){return r(-$,this.ORDER)}eql($,J){return $===J}sqr($){return r($*$,this.ORDER)}add($,J){return r($+J,this.ORDER)}sub($,J){return r($-J,this.ORDER)}mul($,J){return r($*J,this.ORDER)}pow($,J){return U7(this,$,J)}div($,J){return r($*YX(J,this.ORDER),this.ORDER)}sqrN($){return $*$}addN($,J){return $+J}subN($,J){return $-J}mulN($,J){return $*J}inv($){return YX($,this.ORDER)}sqrt($){if(!this._sqrt)this._sqrt=G7(this.ORDER);return this._sqrt(this,$)}toBytes($){return this.isLE?RJ($,this.BYTES):jJ($,this.BYTES)}fromBytes($,J=!1){o($);let{_lengths:Q,BYTES:q,isLE:X,ORDER:Z,_mod:G}=this;if(Q){if(!Q.includes($.length)||$.length>q)throw new Error("Field.fromBytes: expected "+Q+" bytes, got "+$.length);let U=new Uint8Array(q);U.set($,X?0:U.length-$.length),$=U}if($.length!==q)throw new Error("Field.fromBytes: expected "+q+" bytes, got "+$.length);let Y=X?d0($):NJ($);if(G)Y=r(Y,Z);if(!J){if(!this.isValid(Y))throw new Error("invalid field element: outside of range 0..ORDER")}return Y}invertBatch($){return A$(this,$)}cmov($,J,Q){return Q?J:$}}function CJ($,J={}){return new RX($,J)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var BJ=BigInt(0),kQ=BigInt(1);function HX($,J){let Q=J.negate();return $?Q:J}function IJ($,J){let Q=A$($.Fp,J.map((q)=>q.Z));return J.map((q,X)=>$.fromAffine(q.toAffine(Q[X])))}function LX($,J){if(!Number.isSafeInteger($)||$<=0||$>J)throw new Error("invalid window size, expected [1.."+J+"], got W="+$)}function FQ($,J){LX($,J);let Q=Math.ceil(J/$)+1,q=2**($-1),X=2**$,Z=GX($),G=BigInt($);return{windows:Q,windowSize:q,mask:Z,maxNumber:X,shiftBy:G}}function CX($,J,Q){let{windowSize:q,mask:X,maxNumber:Z,shiftBy:G}=Q,Y=Number($&X),U=$>>G;if(Y>q)Y-=Z,U+=kQ;let W=J*q,z=W+Math.abs(Y)-1,M=Y===0,O=Y<0,N=J%2!==0;return{nextN:U,offset:z,isZero:M,isNeg:O,isNegF:N,offsetF:W}}var PQ=new WeakMap,TX=new WeakMap;function fQ($){return TX.get($)||1}function BX($){if($!==BJ)throw new Error("invalid wNAF")}class SQ{BASE;ZERO;Fn;bits;constructor($,J){this.BASE=$.BASE,this.ZERO=$.ZERO,this.Fn=$.Fn,this.bits=J}_unsafeLadder($,J,Q=this.ZERO){let q=$;while(J>BJ){if(J&kQ)Q=Q.add(q);q=q.double(),J>>=kQ}return Q}precomputeWindow($,J){let{windows:Q,windowSize:q}=FQ(J,this.bits),X=[],Z=$,G=Z;for(let Y=0;Y<Q;Y++){G=Z,X.push(G);for(let U=1;U<q;U++)G=G.add(Z),X.push(G);Z=G.double()}return X}wNAF($,J,Q){if(!this.Fn.isValid(Q))throw new Error("invalid scalar");let q=this.ZERO,X=this.BASE,Z=FQ($,this.bits);for(let G=0;G<Z.windows;G++){let{nextN:Y,offset:U,isZero:W,isNeg:z,isNegF:M,offsetF:O}=CX(Q,G,Z);if(Q=Y,W)X=X.add(HX(M,J[O]));else q=q.add(HX(z,J[U]))}return BX(Q),{p:q,f:X}}wNAFUnsafe($,J,Q,q=this.ZERO){let X=FQ($,this.bits);for(let Z=0;Z<X.windows;Z++){if(Q===BJ)break;let{nextN:G,offset:Y,isZero:U,isNeg:W}=CX(Q,Z,X);if(Q=G,U)continue;else{let z=J[Y];q=q.add(W?z.negate():z)}}return BX(Q),q}getPrecomputes($,J,Q){let q=PQ.get(J);if(!q){if(q=this.precomputeWindow(J,$),$!==1){if(typeof Q==="function")q=Q(q);PQ.set(J,q)}}return q}cached($,J,Q){let q=fQ($);return this.wNAF(q,this.getPrecomputes(q,$,Q),J)}unsafe($,J,Q,q){let X=fQ($);if(X===1)return this._unsafeLadder($,J,q);return this.wNAFUnsafe(X,this.getPrecomputes(X,$,Q),J,q)}createCache($,J){LX(J,this.bits),TX.set($,J),PQ.delete($)}hasCache($){return fQ($)!==1}}function IX($,J,Q){if(J){if(J.ORDER!==$)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return jX(J),J}else return CJ($,{isLE:Q})}function AX($,J,Q={},q){if(q===void 0)q=$==="edwards";if(!J||typeof J!=="object")throw new Error(`expected valid ${$} CURVE object`);for(let U of["p","n","h"]){let W=J[U];if(!(typeof W==="bigint"&&W>BJ))throw new Error(`CURVE.${U} must be positive bigint`)}let X=IX(J.p,Q.Fp,q),Z=IX(J.n,Q.Fn,q),Y=["Gx","Gy","a",$==="weierstrass"?"b":"d"];for(let U of Y)if(!X.isValid(J[U]))throw new Error(`CURVE.${U} must be valid field element of CURVE.Fp`);return J=Object.freeze(Object.assign({},J)),{CURVE:J,Fp:X,Fn:Z}}function LJ($,J){return function Q(q){let X=$(q);return{secretKey:X,publicKey:J(X)}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var I8=BigInt(0),G0=BigInt(1),xQ=BigInt(2),W7=BigInt(8);function M7($,J,Q,q){let X=$.sqr(Q),Z=$.sqr(q),G=$.add($.mul(J.a,X),Z),Y=$.add($.ONE,$.mul(J.d,$.mul(X,Z)));return $.eql(G,Y)}function wX($,J={}){let Q=AX("edwards",$,J,J.FpFnLE),{Fp:q,Fn:X}=Q,Z=Q.CURVE,{h:G}=Z;z8(J,{},{uvRatio:"function"});let Y=xQ<<BigInt(X.BYTES*8)-G0,U=(D)=>q.create(D),W=J.uvRatio||((D,L)=>{try{return{isValid:!0,value:q.sqrt(q.div(D,L))}}catch(V){return{isValid:!1,value:I8}}});if(!M7(q,Z,Z.Gx,Z.Gy))throw new Error("bad curve params: generator point");function z(D,L,V=!1){let H=V?G0:I8;return a8("coordinate "+D,L,H,Y),L}function M(D){if(!(D instanceof j))throw new Error("EdwardsPoint expected")}let O=wQ((D,L)=>{let{X:V,Y:H,Z:F}=D,x=D.is0();if(L==null)L=x?W7:q.inv(F);let g=U(V*L),v=U(H*L),C=q.mul(F,L);if(x)return{x:I8,y:G0};if(C!==G0)throw new Error("invZ was invalid");return{x:g,y:v}}),N=wQ((D)=>{let{a:L,d:V}=Z;if(D.is0())throw new Error("bad point: ZERO");let{X:H,Y:F,Z:x,T:g}=D,v=U(H*H),C=U(F*F),B=U(x*x),P=U(B*B),S=U(v*L),y=U(B*U(S+C)),K=U(P+U(V*U(v*C)));if(y!==K)throw new Error("bad point: equation left != right (1)");let A=U(H*F),I=U(x*g);if(A!==I)throw new Error("bad point: equation left != right (2)");return!0});class j{static BASE=new j(Z.Gx,Z.Gy,G0,U(Z.Gx*Z.Gy));static ZERO=new j(I8,G0,G0,I8);static Fp=q;static Fn=X;X;Y;Z;T;constructor(D,L,V,H){this.X=z("x",D),this.Y=z("y",L),this.Z=z("z",V,!0),this.T=z("t",H),Object.freeze(this)}static CURVE(){return Z}static fromAffine(D){if(D instanceof j)throw new Error("extended point not allowed");let{x:L,y:V}=D||{};return z("x",L),z("y",V),new j(L,V,G0,U(L*V))}static fromBytes(D,L=!1){let V=q.BYTES,{a:H,d:F}=Z;D=v8(o(D,V,"point")),VJ(L,"zip215");let x=v8(D),g=D[V-1];x[V-1]=g&-129;let v=d0(x),C=L?Y:q.ORDER;a8("point.y",v,I8,C);let B=U(v*v),P=U(B-G0),S=U(F*B-H),{isValid:y,value:K}=W(P,S);if(!y)throw new Error("bad point: invalid y coordinate");let A=(K&G0)===G0,I=(g&128)!==0;if(!L&&K===I8&&I)throw new Error("bad point: x=0 and x_0=1");if(I!==A)K=U(-K);return j.fromAffine({x:K,y:v})}static fromHex(D,L=!1){return j.fromBytes(r8(D),L)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(D=8,L=!0){if(E.createCache(this,D),!L)this.multiply(xQ);return this}assertValidity(){N(this)}equals(D){M(D);let{X:L,Y:V,Z:H}=this,{X:F,Y:x,Z:g}=D,v=U(L*g),C=U(F*H),B=U(V*g),P=U(x*H);return v===C&&B===P}is0(){return this.equals(j.ZERO)}negate(){return new j(U(-this.X),this.Y,this.Z,U(-this.T))}double(){let{a:D}=Z,{X:L,Y:V,Z:H}=this,F=U(L*L),x=U(V*V),g=U(xQ*U(H*H)),v=U(D*F),C=L+V,B=U(U(C*C)-F-x),P=v+x,S=P-g,y=v-x,K=U(B*S),A=U(P*y),I=U(B*y),w=U(S*P);return new j(K,A,w,I)}add(D){M(D);let{a:L,d:V}=Z,{X:H,Y:F,Z:x,T:g}=this,{X:v,Y:C,Z:B,T:P}=D,S=U(H*v),y=U(F*C),K=U(g*V*P),A=U(x*B),I=U((H+F)*(v+C)-S-y),w=A-K,f=A+K,_=U(y-L*S),b=U(I*w),u=U(f*_),p=U(I*_),m=U(w*f);return new j(b,u,m,p)}subtract(D){return this.add(D.negate())}multiply(D){if(!X.isValidNot0(D))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:L,f:V}=E.cached(this,D,(H)=>IJ(j,H));return IJ(j,[L,V])[0]}multiplyUnsafe(D,L=j.ZERO){if(!X.isValid(D))throw new Error("invalid scalar: expected 0 <= sc < curve.n");if(D===I8)return j.ZERO;if(this.is0()||D===G0)return this;return E.unsafe(this,D,(V)=>IJ(j,V),L)}isSmallOrder(){return this.multiplyUnsafe(G).is0()}isTorsionFree(){return E.unsafe(this,Z.n).is0()}toAffine(D){return O(this,D)}clearCofactor(){if(G===G0)return this;return this.multiplyUnsafe(G)}toBytes(){let{x:D,y:L}=this.toAffine(),V=q.toBytes(L);return V[V.length-1]|=D&G0?128:0,V}toHex(){return n8(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let E=new SQ(j,X.BITS);return j.BASE.precompute(8),j}function EX($,J,Q={}){if(typeof J!=="function")throw new Error('"hash" function param is required');z8(Q,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:q}=Q,{BASE:X,Fp:Z,Fn:G}=$,Y=Q.randomBytes||s8,U=Q.adjustScalarBytes||((C)=>C),W=Q.domain||((C,B,P)=>{if(VJ(P,"phflag"),B.length||P)throw new Error("Contexts/pre-hash are not supported");return C});function z(C){return G.create(d0(C))}function M(C){let B=H.secretKey;o(C,H.secretKey,"secretKey");let P=o(J(C),2*B,"hashedSecretKey"),S=U(P.slice(0,B)),y=P.slice(B,2*B),K=z(S);return{head:S,prefix:y,scalar:K}}function O(C){let{head:B,prefix:P,scalar:S}=M(C),y=X.multiply(S),K=y.toBytes();return{head:B,prefix:P,scalar:S,point:y,pointBytes:K}}function N(C){return O(C).pointBytes}function j(C=Uint8Array.of(),...B){let P=R8(...B);return z(J(W(P,o(C,void 0,"context"),!!q)))}function E(C,B,P={}){if(C=o(C,void 0,"message"),q)C=q(C);let{prefix:S,scalar:y,pointBytes:K}=O(B),A=j(P.context,S,C),I=X.multiply(A).toBytes(),w=j(P.context,I,K,C),f=G.create(A+w*y);if(!G.isValid(f))throw new Error("sign failed: invalid s");let _=R8(I,G.toBytes(f));return o(_,H.signature,"result")}let D={zip215:!0};function L(C,B,P,S=D){let{context:y,zip215:K}=S,A=H.signature;if(C=o(C,A,"signature"),B=o(B,void 0,"message"),P=o(P,H.publicKey,"publicKey"),K!==void 0)VJ(K,"zip215");if(q)B=q(B);let I=A/2,w=C.subarray(0,I),f=d0(C.subarray(I,A)),_,b,u;try{_=$.fromBytes(P,K),b=$.fromBytes(w,K),u=X.multiplyUnsafe(f)}catch(D0){return!1}if(!K&&_.isSmallOrder())return!1;let p=j(y,b.toBytes(),_.toBytes(),B);return b.add(_.multiplyUnsafe(p)).subtract(u).clearCofactor().is0()}let V=Z.BYTES,H={secretKey:V,publicKey:V,signature:2*V,seed:V};function F(C=Y(H.seed)){return o(C,H.seed,"seed")}function x(C){return C$(C)&&C.length===G.BYTES}function g(C,B){try{return!!$.fromBytes(C,B)}catch(P){return!1}}let v={getExtendedPublicKey:O,randomSecretKey:F,isValidSecretKey:x,isValidPublicKey:g,toMontgomery(C){let{y:B}=$.fromBytes(C),P=H.publicKey,S=P===32;if(!S&&P!==57)throw new Error("only defined for 25519 and 448");let y=S?Z.div(G0+B,G0-B):Z.div(B-G0,B+G0);return Z.toBytes(y)},toMontgomerySecret(C){let B=H.secretKey;o(C,B);let P=J(C.subarray(0,B));return U(P).subarray(0,B)}};return Object.freeze({keygen:LJ(F,N),getPublicKey:N,sign:E,verify:L,utils:v,Point:$,lengths:H})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var FX=HJ("HashToScalar-");/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var w$=BigInt(0),t8=BigInt(1),TJ=BigInt(2);function K7($){return z8($,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...$})}function PX($){let J=K7($),{P:Q,type:q,adjustScalarBytes:X,powPminus2:Z,randomBytes:G}=J,Y=q==="x25519";if(!Y&&q!=="x448")throw new Error("invalid type");let U=G||s8,W=Y?255:448,z=Y?32:56,M=Y?BigInt(9):BigInt(5),O=Y?BigInt(121665):BigInt(39081),N=Y?TJ**BigInt(254):TJ**BigInt(447),j=Y?BigInt(8)*TJ**BigInt(251)-t8:BigInt(4)*TJ**BigInt(445)-t8,E=N+j+t8,D=(A)=>r(A,Q),L=V(M);function V(A){return RJ(D(A),z)}function H(A){let I=v8(o(A,z,"uCoordinate"));if(Y)I[31]&=127;return D(d0(I))}function F(A){return d0(X(v8(o(A,z,"scalar"))))}function x(A,I){let w=P(H(I),F(A));if(w===w$)throw new Error("invalid private or public key received");return V(w)}function g(A){return x(A,L)}let v=g,C=x;function B(A,I,w){let f=D(A*(I-w));return I=D(I-f),w=D(w+f),{x_2:I,x_3:w}}function P(A,I){a8("u",A,w$,Q),a8("scalar",I,N,E);let w=I,f=A,_=t8,b=w$,u=A,p=t8,m=w$;for(let $8=BigInt(W-1);$8>=w$;$8--){let Y0=w>>$8&t8;m^=Y0,{x_2:_,x_3:u}=B(m,_,u),{x_2:b,x_3:p}=B(m,b,p),m=Y0;let b0=_+b,c0=D(b0*b0),q$=_-b,X$=D(q$*q$),V9=c0-X$,xG=u+p,vG=u-p,N9=D(vG*b0),j9=D(xG*q$),R9=N9+j9,H9=N9-j9;u=D(R9*R9),p=D(f*D(H9*H9)),_=D(c0*X$),b=D(V9*(c0+D(O*V9)))}({x_2:_,x_3:u}=B(m,_,u)),{x_2:b,x_3:p}=B(m,b,p);let D0=Z(b);return D(_*D0)}let S={secretKey:z,publicKey:z,seed:z},y=(A=U(z))=>{return o(A,S.seed,"seed"),A},K={randomSecretKey:y};return Object.freeze({keygen:LJ(y,v),getSharedSecret:C,getPublicKey:v,scalarMult:x,scalarMultBase:g,utils:K,GuBytes:L.slice(),lengths:S})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *//*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var O7=BigInt(1),fX=BigInt(2),D7=BigInt(3),V7=BigInt(5),N7=BigInt(8),AJ=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),j7=(()=>({p:AJ,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:N7,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")}))();function SX($){let J=BigInt(10),Q=BigInt(20),q=BigInt(40),X=BigInt(80),Z=AJ,Y=$*$%Z*$%Z,U=_0(Y,fX,Z)*Y%Z,W=_0(U,O7,Z)*$%Z,z=_0(W,V7,Z)*W%Z,M=_0(z,J,Z)*z%Z,O=_0(M,Q,Z)*M%Z,N=_0(O,q,Z)*O%Z,j=_0(N,X,Z)*N%Z,E=_0(j,X,Z)*N%Z,D=_0(E,J,Z)*z%Z;return{pow_p_5_8:_0(D,fX,Z)*$%Z,b2:Y}}function xX($){return $[0]&=248,$[31]&=127,$[31]|=64,$}var kX=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function R7($,J){let Q=AJ,q=r(J*J*J,Q),X=r(q*q*J,Q),Z=SX($*X).pow_p_5_8,G=r($*q*Z,Q),Y=r(J*G*G,Q),U=G,W=r(G*kX,Q),z=Y===$,M=Y===r(-$,Q),O=Y===r(-$*kX,Q);if(z)G=U;if(M||O)G=W;if(NX(G,Q))G=r(-G,Q);return{isValid:z||M,value:G}}var H7=wX(j7,{uvRatio:R7});function C7($){return EX(H7,QX,Object.assign({adjustScalarBytes:xX},$))}var vQ=C7({});var E$=(()=>{let $=AJ;return PX({P:$,type:"x25519",powPminus2:(J)=>{let{pow_p_5_8:Q,b2:q}=SX(J);return r(_0(Q,D7,$)*q,$)},adjustScalarBytes:xX})})();class _Q{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor($,J){if(B$($),o(J,void 0,"key"),this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Q=this.blockLen,q=new Uint8Array(Q);q.set(J.length>Q?$.create().update(J).digest():J);for(let X=0;X<q.length;X++)q[X]^=54;this.iHash.update(q),this.oHash=$.create();for(let X=0;X<q.length;X++)q[X]^=106;this.oHash.update(q),u0(q)}update($){return o8(this),this.iHash.update($),this}digestInto($){o8(this),o($,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||=Object.create(Object.getPrototypeOf(this),{});let{oHash:J,iHash:Q,finished:q,destroyed:X,blockLen:Z,outputLen:G}=this;return $=$,$.finished=q,$.destroyed=X,$.blockLen=Z,$.outputLen=G,$.oHash=J._cloneInto($.oHash),$.iHash=Q._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}var wJ=($,J,Q)=>new _Q($,J).update(Q).digest();wJ.create=($,J)=>new _Q($,J);function B7($,J,Q){if(B$($),Q===void 0)Q=new Uint8Array($.outputLen);return wJ($,Q,J)}var gQ=Uint8Array.of(0),vX=Uint8Array.of();function I7($,J,Q,q=32){B$($),s0(q,"length");let X=$.outputLen;if(q>255*X)throw new Error("Length must be <= 255*HashLen");let Z=Math.ceil(q/X);if(Q===void 0)Q=vX;else o(Q,void 0,"info");let G=new Uint8Array(Z*X),Y=wJ.create($,J),U=Y._cloneInto(),W=new Uint8Array(Y.outputLen);for(let z=0;z<Z;z++)gQ[0]=z+1,U.update(z===0?vX:W).update(Q).update(gQ).digestInto(W),G.set(W,X*z),Y._cloneInto(U);return Y.destroy(),U.destroy(),u0(W,gQ),G.slice(0,q)}var f0=($,J,Q,q,X)=>I7($,B7($,J,Q),q,X);var gX=B9(JQ(),1);class yQ{key;nonces;constructor($="weba_l2_nonces"){this.key=$,this.nonces=new Set,this.load()}load(){let $=localStorage.getItem(this.key);if($)try{let J=JSON.parse($);if(Array.isArray(J))this.nonces=new Set(J)}catch(J){console.error("Failed to load replay store from localStorage",J)}}save(){try{localStorage.setItem(this.key,JSON.stringify(Array.from(this.nonces)))}catch($){console.error("Failed to save replay store to localStorage",$)}}async has($){return this.nonces.has($)}async add($){this.nonces.add($),this.save()}async reset(){this.nonces.clear(),this.save()}}function L7($){let J=[1024,4096,16384,65536,262144,1048576];for(let Q of J)if($<=Q)return Q;return Math.ceil($/1048576)*1048576}var _X="weba_l2_ed25519_sk";function w0($){if(typeof Buffer!=="undefined")return Buffer.from($).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"");let J="";return $.forEach((q)=>{J+=String.fromCharCode(q)}),btoa(J).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}function K0($){let J=$.length%4===0?"":"=".repeat(4-$.length%4),Q=$.replace(/-/g,"+").replace(/_/g,"/")+J;if(typeof Buffer!=="undefined")return new Uint8Array(Buffer.from(Q,"base64"));let q=atob(Q),X=new Uint8Array(q.length);for(let Z=0;Z<q.length;Z+=1)X[Z]=q.charCodeAt(Z);return X}function F$($){let J=gX.default($);if(J===void 0)throw new Error("Failed to canonicalize JSON");return J}function bQ($){let J=new Uint8Array($);return crypto.getRandomValues(J),J}function T7(){let $=localStorage.getItem(_X);if($)return K0($);let J=vQ.utils.randomSecretKey();return localStorage.setItem(_X,w0(J)),J}function A7($,J,Q){let q={layer1_ref:$,recipient:J,weba_version:Q};return new TextEncoder().encode(F$(q))}function bX($,J){let Q=new Uint8Array($.length+J.length);return Q.set($,0),Q.set(J,$.length),Q}function yX($){let J=new TextEncoder().encode("weba-l2/user-x25519"),Q=f0(P0,$,void 0,J,32);return{publicKey:E$.getPublicKey(Q),privateKey:Q}}async function mX($,J,Q,q){let X=await crypto.subtle.importKey("raw",J,"AES-GCM",!1,["encrypt"]),Z=await crypto.subtle.encrypt({name:"AES-GCM",iv:Q,additionalData:q},X,$);return new Uint8Array(Z)}async function hX($){let J=f0(P0,$.prfKey,void 0,void 0,32),Q=f0(P0,J,void 0,new TextEncoder().encode("weba-l2/kw"),32),q=f0(P0,J,void 0,new TextEncoder().encode("weba-l2/kw-iv"),12),X=$.aad??new Uint8Array;return mX($.recipientSk,Q,q,X)}async function uX($,J,Q,q){let X=await crypto.subtle.importKey("raw",J,"AES-GCM",!1,["decrypt"]),Z=await crypto.subtle.decrypt({name:"AES-GCM",iv:Q,additionalData:q},X,$);return new Uint8Array(Z)}async function pX($){let J=$.config.weba_version??"0.1",Q=$.config.recipient_kid,q=$.config.layer1_ref,X=$.user_kid??"user#sig-1",Z=T7(),G=F$($.layer2_plain),Y=new TextEncoder().encode(G),U=vQ.sign(Y,Z),W={alg:"Ed25519",kid:X,sig:w0(U),created_at:new Date().toISOString()},z={layer2_plain:$.layer2_plain,layer2_sig:W},M=new TextEncoder().encode(F$(z)),O=32,j=L7(M.length+32)-M.length-32,E=bQ(Math.max(0,j)),D="";E.forEach((A)=>{D+=A.toString(16).padStart(2,"0")}),z._padding=D;let L=A7(q,Q,J),V=new TextEncoder().encode(F$(z)),H=K0($.config.recipient_x25519),F=bQ(32),x=E$.getPublicKey(F),g=E$.getSharedSecret(F,H),v=g,C,B="X25519";if($.config.recipient_pqc){let A=$.pqcProvider;if(!A)throw new Error("PQC requested but no provider is available");let I=K0($.config.recipient_pqc),w=A.encapsulate(I);C=w.encapsulation,v=bX(g,w.sharedSecret),B=`X25519+${A.kemId}`}let P=f0(P0,v,L,void 0,32),S=f0(P0,P,void 0,new TextEncoder().encode("weba-l2/key"),32),y=f0(P0,P,void 0,new TextEncoder().encode("weba-l2/iv"),12),K=await mX(V,S,y,L);return{weba_version:J,layer1_ref:q,layer2:{enc:"HPKE-v1",suite:{kem:B,kdf:"HKDF-SHA256",aead:"AES-256-GCM"},recipient:Q,encapsulated:{classical:w0(x),...C?{pqc:w0(C)}:{}},ciphertext:w0(K),aad:w0(L)},meta:{created_at:new Date().toISOString(),nonce:w0(bQ(16)),...$.config.campaign_id?{campaign_id:$.config.campaign_id}:{},...$.config.key_policy?{key_policy:$.config.key_policy}:{}}}}function dX(){let $=document.getElementById("weba-l2-config");if(!$||!$.textContent)return null;try{return JSON.parse($.textContent)}catch{return null}}class mQ{seenNonces=new Set;store;constructor($){this.store=$}async checkAndMark($){if(this.store){if(await this.store.has($))return!1;return await this.store.add($),!0}if(this.seenNonces.has($))return!1;return this.seenNonces.add($),!0}async reset(){if(this.store)await this.store.reset();this.seenNonces.clear()}}async function EJ($,J,Q){try{let q=K0($.layer2.aad),X={layer1_ref:$.layer1_ref,recipient:$.layer2.recipient,weba_version:$.weba_version},Z=new TextEncoder().encode(F$(X));if(w0(Z)!==$.layer2.aad)throw new Error("AAD mismatch");let G=K0($.layer2.encapsulated.classical),Y=E$.getSharedSecret(J,G),U=Y;if($.layer2.encapsulated.pqc){let j=Q?.pqcProvider,E=Q?.pqcRecipientSk;if(!j||!E)throw new Error("Missing PQC KEM for envelope");let D=K0($.layer2.encapsulated.pqc),L=j.decapsulate(E,D);U=bX(Y,L)}let W=f0(P0,U,q,void 0,32),z=f0(P0,W,void 0,new TextEncoder().encode("weba-l2/key"),32),M=f0(P0,W,void 0,new TextEncoder().encode("weba-l2/iv"),12),O=K0($.layer2.ciphertext),N=await uX(O,z,M,q);return JSON.parse(new TextDecoder().decode(N))}catch(q){throw new Error("Decryption failed")}}async function cX($){let J=f0(P0,$.prfKey,void 0,void 0,32),Q=f0(P0,J,void 0,new TextEncoder().encode("weba-l2/kw"),32),q=f0(P0,J,void 0,new TextEncoder().encode("weba-l2/kw-iv"),12),X=$.keywrap.aad?K0($.keywrap.aad):new Uint8Array,Z=K0($.keywrap.wrapped_key);return uX(Z,Q,q,X)}function w7($){$.querySelectorAll("input").forEach((Q)=>{if(Q.type==="checkbox"||Q.type==="radio")Q.checked=!1,Q.removeAttribute("checked");else Q.value="",Q.removeAttribute("value")}),$.querySelectorAll("textarea").forEach((Q)=>{Q.value="",Q.textContent=""}),$.querySelectorAll("select").forEach((Q)=>{Q.selectedIndex=-1,Q.querySelectorAll("option").forEach((q)=>q.removeAttribute("selected"))}),$.getElementById("json-ld")?.remove(),$.getElementById("data-layer")?.remove();let J=$.getElementById("json-debug");if(J)J.textContent=""}function E7($,J){let Q=JSON.stringify(J,null,2),q=$.createElement("script");q.type="application/ld+json",q.id="weba-user-vc",q.textContent=Q,$.body.appendChild(q);let X=$.createElement("div");X.className="weba-user-verification no-print",X.style.cssText="margin-top:2rem;padding:1rem;border:1px solid #10b981;border-radius:8px;background:#f0fdf4;font-size:0.85rem;",X.innerHTML=`
    <details>
      <summary style="cursor: pointer; display: flex; align-items: center; gap: 0.5rem; color: #047857; font-weight: 600;">
        <span></span> 
      </summary>
      <div style="padding: 1rem 0;">
        <pre style="background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 6px; overflow-x: auto; font-size: 0.8rem; line-height: 1.4;"></pre>
      </div>
    </details>
  `;let Z=X.querySelector("pre");if(Z)Z.textContent=Q;$.body.appendChild(X)}function F7($,J){let Q=$.createElement("script");Q.id="weba-l2-envelope",Q.type="application/json",Q.textContent=JSON.stringify(J,null,2),$.body.appendChild(Q)}function P7($,J){let Q=$.getElementById("weba-draft-state");if(Q)Q.remove();let q=$.createElement("script");q.id="weba-draft-state",q.type="application/json",q.textContent=JSON.stringify(J,null,2),$.body.appendChild(q)}function f7($,J){let Q=new Date,q=Q.getFullYear()+("0"+(Q.getMonth()+1)).slice(-2)+("0"+Q.getDate()).slice(-2)+"-"+("0"+Q.getHours()).slice(-2)+("0"+Q.getMinutes()).slice(-2),X=Math.random().toString(36).substring(2,8);return`${$}_${q}_${J}_${X}.html`}function k7($,J){let q=new DOMParser().parseFromString($,"text/html");if(J?.stripPlaintext)w7(q);if(J?.embeddedVc)E7(q,J.embeddedVc);if(J?.l2Envelope)F7(q,J.l2Envelope);if(J?.draftState)P7(q,J.draftState);return q.documentElement.outerHTML}function lX($){let J=k7($.documentHtml,$.options),Q=new Blob([J],{type:"text/html"}),q=URL.createObjectURL(Q),X=document.createElement("a");if(X.href=q,X.download=f7($.title,$.filenameSuffix),X.click(),$.isFinal)setTimeout(()=>window.location.reload(),1000)}class P${formId;static DRAFT_STATE_VERSION=1;static L2_REPLAY_STORE_KEY="weba_l2_nonces";constructor(){this.formId="WebA_"+window.location.pathname}updateJsonLd(){let J=window.generatedJsonStructure||{};document.querySelectorAll("[data-json-path]").forEach((X)=>{let Z=X.dataset.jsonPath;if(Z)J[Z]=X.value}),document.querySelectorAll('[type="radio"]:checked').forEach((X)=>{J[X.name]=X.value}),document.querySelectorAll("table.data-table.dynamic").forEach((X)=>{let Z=X.dataset.tableKey;if(Z){let G=[];X.querySelectorAll("tbody tr").forEach((Y)=>{let U={},W=!1;if(Y.querySelectorAll("[data-base-key]").forEach((z)=>{if(z.type==="checkbox"){if(U[z.dataset.baseKey]=z.checked,z.checked)W=!0}else if(U[z.dataset.baseKey]=z.value,z.value)W=!0}),W)G.push(U)}),J[Z]=G}});let Q=document.getElementById("json-ld");if(Q)Q.textContent=JSON.stringify(J,null,2);let q=document.getElementById("json-debug");if(q)q.textContent=JSON.stringify(J,null,2);return J}getL2Config(){return window.webaL2Config||null}async signAndDownload(){let $=this.updateJsonLd(),J=window,Q=J.generatedJsonStructure&&J.generatedJsonStructure.name||"Response",q=window.location.href.split("#")[0],X=this.getL2Config(),Z=document.getElementById("weba-l2-encrypt");if(!!(X?.enabled&&(Z?Z.checked:X.default_enabled))){if(!X?.recipient_kid||!X?.recipient_x25519||!X?.layer1_ref){alert("L2 encryption config is missing required fields.");return}try{let U=await pX({layer2_plain:$,config:X,user_kid:X.user_kid});this.downloadHtml("submit",!0,{l2Envelope:U,stripPlaintext:!0})}catch(U){console.error(U),alert("L2 encryption failed. Please check your recipient key settings.")}return}if(!h0.getPublicKey()){if(!await h0.register()){alert("Key registration failed.");return}}let Y={"@context":["https://www.w3.org/2018/credentials/v1"],type:["VerifiableCredential","WebAFormResponse"],issuer:h0.getIssuerDid(),issuanceDate:new Date().toISOString(),credentialSubject:{id:`urn:uuid:${crypto.randomUUID()}`,type:"WebAFormResponse",templateId:q,answers:$}};try{let U=await h0.sign(Y);this.downloadHtml("submitted",!0,{embeddedVc:U})}catch(U){console.error(U),alert("Signing failed. Please ensure you are in a secure context (HTTPS/localhost).")}}saveToLS(){let $=this.updateJsonLd();localStorage.setItem(this.formId,JSON.stringify($))}restoreFromLS(){let $=localStorage.getItem(this.formId);if(!$)return;try{let J=JSON.parse($);document.querySelectorAll("[data-json-path]").forEach((Q)=>{let q=Q.dataset.jsonPath;if(J[q]!==void 0)Q.value=J[q]}),document.querySelectorAll("table.data-table.dynamic").forEach((Q)=>{let q=Q.dataset.tableKey,X=J[q];if(Array.isArray(X)){let Z=Q.querySelector("tbody");if(!Z)return;let G=Z.querySelectorAll(".template-row");X.forEach((Y,U)=>{let W;if(U===0)W=Z.querySelector(".template-row");else{let z=Z.querySelector(".template-row");if(z){W=z.cloneNode(!0),W.classList.remove("template-row");let M=W.querySelector(".remove-row-btn");if(M)M.style.visibility="visible";Z.appendChild(W)}}if(W)W.querySelectorAll("input, select").forEach((z)=>{let M=z.dataset.baseKey;if(M&&Y[M]!==void 0)if(z.type==="checkbox")z.checked=!!Y[M];else z.value=Y[M]})})}})}catch(J){console.error(J)}}clearData(){if(confirm("Clear all saved data? / "))localStorage.removeItem(this.formId),window.location.reload()}bakeValues(){this.updateJsonLd(),document.querySelectorAll("input, textarea, select").forEach(($)=>{if($.closest(".template-row"))return;if($.type==="checkbox"||$.type==="radio")if($.checked)$.setAttribute("checked","checked");else $.removeAttribute("checked");else if($.setAttribute("value",$.value),$.tagName==="TEXTAREA")$.textContent=$.value})}downloadHtml($,J,Q){let q=window,X=q.generatedJsonStructure&&q.generatedJsonStructure.name||"web-a-form";lX({documentHtml:document.documentElement.outerHTML,title:X,filenameSuffix:$,isFinal:J,options:Q})}buildDraftState(){let $=this.updateJsonLd(),J=new Date().toISOString(),Q=localStorage.getItem(P$.L2_REPLAY_STORE_KEY),q;if(Q)try{let X=JSON.parse(Q);if(Array.isArray(X))q=X.filter((Z)=>typeof Z==="string")}catch(X){console.warn("Failed to parse L2 replay store for draft",X)}return{version:P$.DRAFT_STATE_VERSION,savedAt:J,formId:this.formId,formData:$,l2State:q?{replayNonces:q}:void 0}}saveDraft(){let $=this.buildDraftState();this.bakeValues(),this.downloadHtml("draft",!1,{draftState:$})}submitDocument(){this.bakeValues(),document.querySelectorAll(".search-suggestions").forEach(($)=>$.remove()),this.downloadHtml("submit",!0)}}class hQ{calc;data;constructor($,J){this.calc=$,this.data=J}applyI18n(){let $={en:{add_row:"+ Add Row",work_save_btn:"Save Progress",clear_btn:"Clear Data",sign_btn:"Submit"},ja:{add_row:"+ ",work_save_btn:"",clear_btn:"",sign_btn:""}},J=(navigator.language||"en").startsWith("ja")?"ja":"en",Q=$[J]||$.en;document.querySelectorAll("[data-i18n]").forEach((q)=>{let X=q.dataset.i18n;if(Q[X])q.textContent=Q[X]})}initTables(){document.querySelectorAll(".data-table.dynamic tbody").forEach(($)=>{this.renumberRows($)})}renumberRows($){Array.from($.querySelectorAll("tr")).filter((Q)=>{return Q.querySelectorAll("td").length>0}).forEach((Q,q)=>{let X=q+1;Q.querySelectorAll(".auto-num").forEach((Z)=>{if(Z.value!=X)Z.value=X.toString(),Z.dispatchEvent(new Event("input",{bubbles:!0}))})})}removeTableRow($){let J=$.closest("tr"),Q=J.parentElement;if(J.classList.contains("template-row"))J.querySelectorAll("input").forEach((q)=>{if(q.type==="checkbox")q.checked=!1;else q.value=""});else{if(J.remove(),Q)this.renumberRows(Q);this.calc.recalculate(),this.data.updateJsonLd()}}addTableRow($,J){let Q=document.getElementById("tbl_"+J);if(!Q)return;let q=Q.querySelector("tbody");if(!q)return;let X=q.querySelector(".template-row");if(!X)return;let Z=X.cloneNode(!0);Z.classList.remove("template-row"),Z.querySelectorAll("input").forEach((Y)=>{if(Y.type==="checkbox")Y.checked=Y.hasAttribute("checked");else Y.value=Y.getAttribute("value")||""});let G=Z.querySelector(".remove-row-btn");if(G)G.style.visibility="visible";Z.querySelectorAll("[data-copy-from]").forEach((Y)=>{let U=Y.dataset.copyFrom;if(U){let W=Z.querySelector(`[data-base-key="${U}"]`);if(W&&W.value)Y.value=W.value}}),q.appendChild(Z),this.renumberRows(q),this.calc.recalculate()}switchTab($,J){document.querySelectorAll(".tab-btn").forEach((q)=>q.classList.remove("active")),document.querySelectorAll(".tab-content").forEach((q)=>q.classList.remove("active")),$.classList.add("active");let Q=document.getElementById(J);if(Q)Q.classList.add("active")}}function iX($){let J=document.getElementById($);if(!J||!J.textContent)return null;try{return JSON.parse(J.textContent)}catch{return null}}function oX(){let $=iX("weba-l2-envelope");if(!$)return;let J=iX("weba-l2-keywrap"),Q=document.querySelector(".weba-form-container")||document.body,q=document.createElement("div");q.className="weba-l2-unlock",q.style.cssText="margin-top:2rem;padding:1rem;border:1px solid #cbd5f5;border-radius:10px;background:#f8fafc;";let X=document.createElement("div");X.textContent="Encrypted Submission",X.style.cssText="font-weight:600;color:#334155;margin-bottom:0.5rem;",q.appendChild(X);let Z=document.createElement("div");Z.textContent="Locked. Unlock with Passkey.",Z.style.cssText="color:#64748b;margin-bottom:0.75rem;",q.appendChild(Z);let G=document.createElement("button");G.textContent="Unlock (Passkey)",G.style.cssText="padding:0.5rem 1rem;border:1px solid #94a3b8;border-radius:6px;background:#fff;cursor:pointer;",q.appendChild(G);let Y=document.createElement("pre");Y.style.cssText="margin-top:1rem;padding:1rem;background:#0f172a;color:#e2e8f0;border-radius:8px;overflow:auto;font-size:0.85rem;display:none;",q.appendChild(Y);let U=document.createElement("details");U.style.cssText="margin-top:0.75rem; display:none;",U.innerHTML='<summary style="cursor:pointer;color:#64748b;">Show signature</summary><pre style="margin-top:0.5rem;padding:0.75rem;background:#0b1220;color:#cbd5f5;border-radius:6px;overflow:auto;font-size:0.8rem;"></pre>',q.appendChild(U);let W=document.createElement("button");W.textContent="Export JSON",W.style.cssText="margin-top:0.75rem;padding:0.45rem 0.9rem;border:1px solid #94a3b8;border-radius:6px;background:#fff;cursor:pointer;display:none;",W.disabled=!0,q.appendChild(W),G.addEventListener("click",async()=>{if(!J){Z.textContent="Key wrap package not found.";return}G.disabled=!0,Z.textContent="Waiting for passkey...";try{let z=K0(J.prf_salt),M=await i8(J.credential_id,z),O=await cX({keywrap:J,prfKey:M}),N=await EJ($,O);S7(N.layer2_plain),document.body.classList.add("weba-l2-readonly"),Y.textContent=JSON.stringify(N.layer2_plain,null,2),Y.style.display="block";let j=U.querySelector("pre");if(j)j.textContent=JSON.stringify(N.layer2_sig,null,2);U.style.display="block",W.style.display="inline-block",W.disabled=!1,Z.textContent="Unlocked.",W.onclick=()=>{let E=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),D=URL.createObjectURL(E),L=document.createElement("a");L.href=D,L.download="weba-l2-decrypted.json",L.click()}}catch(z){console.error(z),Z.textContent="Unlock failed.",G.disabled=!1}}),Q.appendChild(q)}function S7($){if(!$||typeof $!=="object")return;let J=$;document.querySelectorAll("[data-json-path]").forEach((Q)=>{let q=Q.dataset.jsonPath;if(!q||!(q in J))return;let X=J[q];if(Q.type==="checkbox")Q.checked=Boolean(X);else if(Q.type==="radio")Q.checked=Q.value===String(X);else Q.value=X===null||X===void 0?"":String(X)}),document.querySelectorAll('input[type="radio"]').forEach((Q)=>{let q=Q.name;if(!q||!(q in J))return;let X=J[q];Q.checked=Q.value===String(X)}),document.querySelectorAll("table.data-table.dynamic").forEach((Q)=>{let q=Q.dataset.tableKey;if(!q)return;let X=J[q];if(!Array.isArray(X))return;let Z=Q.querySelector("tbody");if(!Z)return;let G=Z.querySelector("tr.template-row");if(!G)return;Array.from(Z.querySelectorAll("tr")).forEach((Y)=>{if(!Y.classList.contains("template-row"))Y.remove()}),X.forEach((Y,U)=>{let W=U===0?G:G.cloneNode(!0);if(U>0){W.classList.remove("template-row");let z=W.querySelector(".remove-row-btn");if(z)z.style.visibility="visible";Z.appendChild(W)}if(Y&&typeof Y==="object")W.querySelectorAll("input, select, textarea").forEach((z)=>{let M=z.dataset.baseKey;if(!M)return;let O=Y[M];if(z.type==="checkbox")z.checked=Boolean(O);else z.value=O===null||O===void 0?"":String(O)})})}),document.querySelectorAll("input").forEach((Q)=>{if(Q.type==="checkbox"||Q.type==="radio")Q.disabled=!0;else Q.readOnly=!0}),document.querySelectorAll("textarea").forEach((Q)=>{Q.readOnly=!0}),document.querySelectorAll("select").forEach((Q)=>{Q.disabled=!0}),document.querySelectorAll(".form-toolbar button, .add-row-btn, .remove-row-btn").forEach((Q)=>{Q.disabled=!0})}function t0($){return document.getElementById($)}function nX(){if(!t0("weba-l2-keywrap-tool"))return;let J=t0("kwp-recipient-sk"),Q=t0("kwp-credential-id"),q=t0("kwp-prf-salt"),X=t0("kwp-aad"),Z=t0("kwp-kid"),G=t0("kwp-status"),Y=t0("kwp-output"),U=t0("kwp-generate-salt"),W=t0("kwp-wrap");if(!J||!Q||!q||!G||!Y||!W)return;U?.addEventListener("click",()=>{let z=new Uint8Array(32);crypto.getRandomValues(z),q.value=w0(z)}),W.addEventListener("click",async()=>{G.textContent="Waiting for passkey...",W.disabled=!0;try{if(!J.value||!Q.value||!q.value)throw new Error("Missing required fields.");let z=K0(J.value.trim()),M=K0(q.value.trim()),O=await i8(Q.value.trim(),M),N=X?.value?K0(X.value.trim()):void 0,j=await hX({recipientSk:z,prfKey:O,aad:N}),E={alg:"WebAuthn-PRF-AESGCM-v1",kid:Z?.value||"issuer#passkey-1",credential_id:Q.value.trim(),prf_salt:w0(M),wrapped_key:w0(j),...N?{aad:w0(N)}:{}};Y.textContent=JSON.stringify(E,null,2),G.textContent="Key wrap ready."}catch(z){console.error(z),G.textContent="Key wrap failed."}finally{W.disabled=!1}})}function rX($){if(typeof DOMParser!=="undefined")return new DOMParser().parseFromString($,"text/html");if(typeof document!=="undefined"){let J=document.implementation.createHTMLDocument("");return J.documentElement.innerHTML=$,J}return null}function sX($,J){let Q=rX($);if(Q)return Q.getElementById(J)?.textContent??null;let q=new RegExp(`<script[^>]*id=["']${J}["'][^>]*>([\\s\\S]*?)<\\/script>`,"i"),X=$.match(q);return X?X[1]:null}function x7($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v7($,J){let Q=rX($);if(Q)return Q.querySelector(`script[type="${J}"]`)?.textContent??null;let q=new RegExp(`<script[^>]*type=["']${x7(J)}["'][^>]*>([\\s\\S]*?)<\\/script>`,"i"),X=$.match(q);return X?X[1]:null}function aX($){let J=sX($,"data-layer");if(J)try{return JSON.parse(J)}catch{return null}let Q=v7($,"application/ld+json");if(Q)try{return JSON.parse(Q)}catch{return null}return null}function uQ($){let J=sX($,"weba-l2-envelope");if(!J)return null;try{return JSON.parse(J)}catch{return null}}function _7($){let J={},Q=(q,X)=>{if(q===null||q===void 0){J[X]=null;return}if(Array.isArray(q)){q.forEach((Z,G)=>{Q(Z,X?`${X}[${G}]`:`[${G}]`)});return}if(typeof q==="object"){Object.entries(q).forEach(([Z,G])=>{let Y=X?`${X}.${Z}`:Z;Q(G,Y)});return}J[X]=q};if(Q($,""),""in J)delete J[""];return J}function eX($){let J={_filename:$.filename},Q=new Set(["_filename"]);if($.includeJson)Q.add("_json"),J._json=JSON.stringify($.plain);let q=_7($.plain||{});for(let X of Object.keys(q)){if($.omitKey&&$.omitKey(X))continue;Q.add(X),J[X]=q[X]}if($.sig)Q.add("_l2_sig"),J._l2_sig=JSON.stringify($.sig);return{row:J,keys:Q}}function tX($){if($===null||$===void 0)return"";let J=String($);if(/[",\n]/.test(J))return`"${J.replace(/"/g,'""')}"`;return J}function $Z($,J){let Q=[];return Q.push(J.map(tX).join(",")),$.forEach((q)=>{let X=J.map((Z)=>tX(q[Z])).join(",");Q.push(X)}),"\uFEFF"+Q.join(`
`)}var s={_context:{masterData:{}},setMasterData($){this._context.masterData=$},escapeHtml($){if(!$)return"";return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},formatHint($){return this.escapeHtml($).replace(/&lt;br\s*\/?&gt;/gi,"<br>").replace(/\r?\n/g,"<br>")},getStyle($){if(!$)return"";let J="";if($.includes("size:L"))J+="font-size: 1.25em;";if($.includes("size:S"))J+="font-size: 0.8em;";if($.includes("size:XL"))J+="font-size: 1.5em; font-weight: bold;";if($.includes("align:R"))J+="text-align: right;";if($.includes("align:C"))J+="text-align: center;";if($.includes("bold"))J+="font-weight: bold;";return J},getExtraAttrs($){if(!$)return"";let J="",Q=$.match(/(?:len|max):(\d+)/);if(Q)J+=` maxlength="${Q[1]}"`;let q=$.match(/(?:val|value)="([^"]+)"/);if(q)J+=` value="${this.escapeHtml(q[1])}"`;else{let X=$.match(/(?:val|value)=([^\s\)]+)/);if(X)J+=` value="${this.escapeHtml(X[1])}"`}return J},text:function($,J,Q){let q=(Q||"").match(/(?:val|value)="([^"]+)"/)||(Q||"").match(/(?:val|value)='([^']+)'/)||(Q||"").match(/(?:val|value)=([^ ]+)/),X=(Q||"").match(/placeholder="([^"]+)"/)||(Q||"").match(/placeholder='([^']+)'/),Z=(Q||"").match(/hint="([^"]+)"/)||(Q||"").match(/hint='([^']+)'/),G=q?q[1]:"",Y=X?X[1]:"",U=Z?`<div class="form-hint">${this.formatHint(Z[1])}</div>`:"";return`
        <div class="form-row" style="${this.getStyle(Q)}">
            <label class="form-label">${this.escapeHtml(J)}</label>
            <input type="text" class="form-input" data-json-path="${$}" value="${this.escapeHtml(G)}" placeholder="${this.escapeHtml(Y)}" style="${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>
            ${U}
        </div>`},number:function($,J,Q){let q=(Q||"").match(/placeholder="([^"]+)"/)||(Q||"").match(/placeholder='([^']+)'/),X=(Q||"").match(/hint="([^"]+)"/)||(Q||"").match(/hint='([^']+)'/),Z=q?q[1]:"",G=X?`<div class="form-row"><div class="form-hint">${this.formatHint(X[1])}</div></div>`:"";return`
        <div class="form-row">
            <label class="form-label">${this.escapeHtml(J)}</label>
            <input type="number" class="form-input" data-json-path="${$}" placeholder="${this.escapeHtml(Z)}" style="${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>
            ${G}
        </div>`},date:function($,J,Q){return`
        <div class="form-row">
            <label class="form-label">${this.escapeHtml(J)}</label>
            <input type="date" class="form-input" data-json-path="${$}" style="${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>
        </div>`},textarea:function($,J,Q){let q=(Q||"").match(/placeholder="([^"]+)"/)||(Q||"").match(/placeholder='([^']+)'/),X=(Q||"").match(/hint="([^"]+)"/)||(Q||"").match(/hint='([^']+)'/),Z=q?q[1]:"",G=X?`<div class="form-hint">${this.formatHint(X[1])}</div>`:"",Y=(Q||"").match(/(?:val|value)="([^"]+)"/)||(Q||"").match(/(?:val|value)='([^']+)'/)||(Q||"").match(/(?:val|value)=([^ ]+)/),U=Y?Y[1]:"";return`
        <div class="form-row vertical" style="${this.getStyle(Q)}">
            <label class="form-label">${this.escapeHtml(J)}</label>
            <textarea class="form-input" rows="5" data-json-path="${$}" placeholder="${this.escapeHtml(Z)}" style="${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>${this.escapeHtml(U)}</textarea>
            ${G}
        </div>`},radioStart:function($,J,Q){return`
        <div class="form-row vertical" style="${this.getStyle(Q)}">
            <label class="form-label">${this.escapeHtml(J)}</label>
            <div class="radio-group" style="padding-left: 10px;">`},radioOption:function($,J,Q,q){return`
            <label style="display:block; margin-bottom:5px;">
                <input type="radio" name="${$}" value="${this.escapeHtml(J)}" ${q?"checked":""}> ${this.escapeHtml(Q)}
            </label>`},calc:function($,J,Q){let q=(Q||"").match(/formula="([^"]+)"/)||(Q||"").match(/formula='([^']+)'/),X=q?q[1]:"";return`
        <div class="form-row">
            <label class="form-label">${this.escapeHtml(J)}</label>
            <input type="text" readonly class="form-input" data-json-path="${$}" data-formula="${this.escapeHtml(X)}" style="background:#f9f9f9; ${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>
        </div>`},search:function($,J,Q){let q=(Q||"").match(/src:([^\s)]+)/),X=(Q||"").match(/label:(\d+)/),Z=(Q||"").match(/value:(\d+)/),G=(Q||"").match(/placeholder="([^"]+)"/)||(Q||"").match(/placeholder='([^']+)'/),Y=(Q||"").match(/hint="([^"]+)"/)||(Q||"").match(/hint='([^']+)'/),U=q?q[1]:"",W=G?G[1]:"",z=Y?`<div class="form-hint">${this.formatHint(Y[1])}</div>`:"",M=X?` data-master-label-index="${X[1]}"`:"",O=Z?` data-master-value-index="${Z[1]}"`:"";return`
        <div class="form-row autocomplete-container" style="position:relative; z-index:100;">
            <label class="form-label">${this.escapeHtml(J)}</label>
            <div style="flex:1; position:relative;">
                <input type="text" class="form-input search-input" autocomplete="off" 
                    data-json-path="${$}" 
                    data-master-src="${U}"${M}${O}
                    placeholder="${this.escapeHtml(W)}" 
                    style="${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>
                <div class="search-suggestions" style="display:none; position:absolute; top:100%; left:0; width:100%; background:white; border:1px solid #ccc; max-height:200px; overflow-y:auto; box-shadow:0 4px 6px rgba(0,0,0,0.1); border-radius:0 0 4px 4px; z-index:1001;"></div>
            </div>
            ${z}
        </div>`},renderInput($,J,Q,q=!1){let X=(Q||"").match(/placeholder="([^"]+)"/)||(Q||"").match(/placeholder='([^']+)'/),Z=X?`placeholder="${this.escapeHtml(X[1])}"`:"",G=q?"form-input template-input":"form-input",Y=q?`data-base-key="${J}"`:`data-json-path="${J}"`;if($==="calc"){let N=(Q||"").match(/formula="([^"]+)"/)||(Q||"").match(/formula='([^']+)'/),j=N?N[1]:"";return`<input type="text" readonly class="${G}" ${Y} data-formula="${this.escapeHtml(j)}" style="background:#f9f9f9; text-align:right; ${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>`}if($==="datalist"){let N=(Q||"").match(/src:([a-zA-Z0-9_\-\u0080-\uFFFF]+)/),j=(Q||"").match(/label:(\d+)/),E="",D=N?N[1]:"";if(D&&this._context.masterData&&this._context.masterData[D]){let V=this._context.masterData[D],H=j?parseInt(j[1]||"1")-1:1;V.forEach((F)=>{if(F.length>H)E+=`<option value="${this.escapeHtml(F[H]||"")}"></option>`})}let L="list_"+J+"_"+Math.floor(Math.random()*1e4);return`<input type="text" list="${L}" class="${G}" ${Y} ${Z} style="${this.getStyle(Q)}"${this.getExtraAttrs(Q)}><datalist id="${L}">${E}</datalist>`}if($==="search"){let N=(Q||"").match(/src:([a-zA-Z0-9_\-\u0080-\uFFFF]+)/),j=(Q||"").match(/label:(\d+)/),E=(Q||"").match(/value:(\d+)/),D=N?N[1]:"",L=j?` data-master-label-index="${j[1]}"`:"",V=E?` data-master-value-index="${E[1]}"`:"",H=G+" search-input",F="";if((Q||"").includes("suggest:column"))F=' data-suggest-source="column"';let x=(Q||"").match(/copy:([^\s)]+)/),g=x?` data-copy-from="${x[1]}"`:"";return`<div style="display:inline-block; position:relative; width: 100%; min-width: 100px;">
                        <input type="text" class="${H}" ${Y} autocomplete="off" data-master-src="${D}"${L}${V} ${Z} style="${x?"background-color: #ffffea;":""} ${this.getStyle(Q)}"${this.getExtraAttrs(Q)}${F}${g}>
                    </div>`}if($==="number"){let N=(Q||"").match(/copy:([^\s)]+)/),j=N?` data-copy-from="${N[1]}"`:"";return`<input type="number" class="${G}" ${Y} ${Z} style="text-align:right; ${N?"background-color: #ffffea;":""} ${this.getStyle(Q)}"${this.getExtraAttrs(Q)}${j}>`}if($==="date")return`<input type="date" class="${G}" ${Y} style="${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>`;if($==="checkbox")return`<input type="checkbox" class="${G}" ${Y} style="${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>`;if($==="autonum"||(Q||"").includes("autonum"))return`<input type="number" readonly class="${G+" auto-num"}" ${Y} data-autonum="true" style="background:transparent; border:none; text-align:center; width:100%; font-weight:bold; cursor:default; ${this.getStyle(Q)}"${this.getExtraAttrs(Q)}>`;let U="",W="";if((Q||"").includes("suggest:column"))W=" search-input",U=' data-suggest-source="column"';let z=(Q||"").match(/copy:([^\s)]+)/),M=z?` data-copy-from="${z[1]}"`:"";return`<input type="text" class="${G}${W}" ${Y} ${Z} style="${z?"background-color: #ffffea;":""} ${this.getStyle(Q)}"${this.getExtraAttrs(Q)}${U}${M}>`},tableRow($,J=!1){let Q=$.map((q)=>{let X=q.trim(),Z=X.match(/^\[(?:([a-z]+):)?([^\]:\(\)]+)(?:\s*\((.*)\)|:([^\]]+))?\]$/);if(Z){let[G,Y,U,W,z]=Z,M=(U||"").trim(),O=W||z||"";if(M.includes(" ")){let j=M.split(/\s+/);M=j[0],O=j.slice(1).join(" ")+" "+O}return`<td>${this.renderInput(Y||"text",M,O,J)}</td>`}else return`<td>${this.escapeHtml(X)}</td>`}).join("");return`<tr ${J?'class="template-row"':""}>${Q}</tr>`}};/*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT */function NZ($){return typeof $==="undefined"||$===null}function g7($){return typeof $==="object"&&$!==null}function b7($){if(Array.isArray($))return $;else if(NZ($))return[];return[$]}function y7($,J){var Q,q,X,Z;if(J){Z=Object.keys(J);for(Q=0,q=Z.length;Q<q;Q+=1)X=Z[Q],$[X]=J[X]}return $}function m7($,J){var Q="",q;for(q=0;q<J;q+=1)Q+=$;return Q}function h7($){return $===0&&Number.NEGATIVE_INFINITY===1/$}var u7=NZ,p7=g7,d7=b7,c7=m7,l7=h7,i7=y7,q0={isNothing:u7,isObject:p7,toArray:d7,repeat:c7,isNegativeZero:l7,extend:i7};function jZ($,J){var Q="",q=$.reason||"(unknown reason)";if(!$.mark)return q;if($.mark.name)Q+='in "'+$.mark.name+'" ';if(Q+="("+($.mark.line+1)+":"+($.mark.column+1)+")",!J&&$.mark.snippet)Q+=`

`+$.mark.snippet;return q+" "+Q}function k$($,J){if(Error.call(this),this.name="YAMLException",this.reason=$,this.mark=J,this.message=jZ(this,!1),Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);else this.stack=new Error().stack||""}k$.prototype=Object.create(Error.prototype);k$.prototype.constructor=k$;k$.prototype.toString=function $(J){return this.name+": "+jZ(this,J)};var E0=k$;function pQ($,J,Q,q,X){var Z="",G="",Y=Math.floor(X/2)-1;if(q-J>Y)Z=" ... ",J=q-Y+Z.length;if(Q-q>Y)G=" ...",Q=q+Y-G.length;return{str:Z+$.slice(J,Q).replace(/\t/g,"")+G,pos:q-J+Z.length}}function dQ($,J){return q0.repeat(" ",J-$.length)+$}function o7($,J){if(J=Object.create(J||null),!$.buffer)return null;if(!J.maxLength)J.maxLength=79;if(typeof J.indent!=="number")J.indent=1;if(typeof J.linesBefore!=="number")J.linesBefore=3;if(typeof J.linesAfter!=="number")J.linesAfter=2;var Q=/\r?\n|\r|\0/g,q=[0],X=[],Z,G=-1;while(Z=Q.exec($.buffer))if(X.push(Z.index),q.push(Z.index+Z[0].length),$.position<=Z.index&&G<0)G=q.length-2;if(G<0)G=q.length-1;var Y="",U,W,z=Math.min($.line+J.linesAfter,X.length).toString().length,M=J.maxLength-(J.indent+z+3);for(U=1;U<=J.linesBefore;U++){if(G-U<0)break;W=pQ($.buffer,q[G-U],X[G-U],$.position-(q[G]-q[G-U]),M),Y=q0.repeat(" ",J.indent)+dQ(($.line-U+1).toString(),z)+" | "+W.str+`
`+Y}W=pQ($.buffer,q[G],X[G],$.position,M),Y+=q0.repeat(" ",J.indent)+dQ(($.line+1).toString(),z)+" | "+W.str+`
`,Y+=q0.repeat("-",J.indent+z+3+W.pos)+`^
`;for(U=1;U<=J.linesAfter;U++){if(G+U>=X.length)break;W=pQ($.buffer,q[G+U],X[G+U],$.position-(q[G]-q[G+U]),M),Y+=q0.repeat(" ",J.indent)+dQ(($.line+U+1).toString(),z)+" | "+W.str+`
`}return Y.replace(/\n$/,"")}var n7=o7,r7=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],s7=["scalar","sequence","mapping"];function a7($){var J={};if($!==null)Object.keys($).forEach(function(Q){$[Q].forEach(function(q){J[String(q)]=Q})});return J}function t7($,J){if(J=J||{},Object.keys(J).forEach(function(Q){if(r7.indexOf(Q)===-1)throw new E0('Unknown option "'+Q+'" is met in definition of "'+$+'" YAML type.')}),this.options=J,this.tag=$,this.kind=J.kind||null,this.resolve=J.resolve||function(){return!0},this.construct=J.construct||function(Q){return Q},this.instanceOf=J.instanceOf||null,this.predicate=J.predicate||null,this.represent=J.represent||null,this.representName=J.representName||null,this.defaultStyle=J.defaultStyle||null,this.multi=J.multi||!1,this.styleAliases=a7(J.styleAliases||null),s7.indexOf(this.kind)===-1)throw new E0('Unknown kind "'+this.kind+'" is specified for "'+$+'" YAML type.')}var O0=t7;function JZ($,J){var Q=[];return $[J].forEach(function(q){var X=Q.length;Q.forEach(function(Z,G){if(Z.tag===q.tag&&Z.kind===q.kind&&Z.multi===q.multi)X=G}),Q[X]=q}),Q}function e7(){var $={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},J,Q;function q(X){if(X.multi)$.multi[X.kind].push(X),$.multi.fallback.push(X);else $[X.kind][X.tag]=$.fallback[X.tag]=X}for(J=0,Q=arguments.length;J<Q;J+=1)arguments[J].forEach(q);return $}function lQ($){return this.extend($)}lQ.prototype.extend=function $(J){var Q=[],q=[];if(J instanceof O0)q.push(J);else if(Array.isArray(J))q=q.concat(J);else if(J&&(Array.isArray(J.implicit)||Array.isArray(J.explicit))){if(J.implicit)Q=Q.concat(J.implicit);if(J.explicit)q=q.concat(J.explicit)}else throw new E0("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");Q.forEach(function(Z){if(!(Z instanceof O0))throw new E0("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Z.loadKind&&Z.loadKind!=="scalar")throw new E0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Z.multi)throw new E0("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),q.forEach(function(Z){if(!(Z instanceof O0))throw new E0("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var X=Object.create(lQ.prototype);return X.implicit=(this.implicit||[]).concat(Q),X.explicit=(this.explicit||[]).concat(q),X.compiledImplicit=JZ(X,"implicit"),X.compiledExplicit=JZ(X,"explicit"),X.compiledTypeMap=e7(X.compiledImplicit,X.compiledExplicit),X};var RZ=lQ,HZ=new O0("tag:yaml.org,2002:str",{kind:"scalar",construct:function($){return $!==null?$:""}}),CZ=new O0("tag:yaml.org,2002:seq",{kind:"sequence",construct:function($){return $!==null?$:[]}}),BZ=new O0("tag:yaml.org,2002:map",{kind:"mapping",construct:function($){return $!==null?$:{}}}),IZ=new RZ({explicit:[HZ,CZ,BZ]});function $1($){if($===null)return!0;var J=$.length;return J===1&&$==="~"||J===4&&($==="null"||$==="Null"||$==="NULL")}function J1(){return null}function Q1($){return $===null}var LZ=new O0("tag:yaml.org,2002:null",{kind:"scalar",resolve:$1,construct:J1,predicate:Q1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function q1($){if($===null)return!1;var J=$.length;return J===4&&($==="true"||$==="True"||$==="TRUE")||J===5&&($==="false"||$==="False"||$==="FALSE")}function X1($){return $==="true"||$==="True"||$==="TRUE"}function Z1($){return Object.prototype.toString.call($)==="[object Boolean]"}var TZ=new O0("tag:yaml.org,2002:bool",{kind:"scalar",resolve:q1,construct:X1,predicate:Z1,represent:{lowercase:function($){return $?"true":"false"},uppercase:function($){return $?"TRUE":"FALSE"},camelcase:function($){return $?"True":"False"}},defaultStyle:"lowercase"});function G1($){return 48<=$&&$<=57||65<=$&&$<=70||97<=$&&$<=102}function Y1($){return 48<=$&&$<=55}function U1($){return 48<=$&&$<=57}function z1($){if($===null)return!1;var J=$.length,Q=0,q=!1,X;if(!J)return!1;if(X=$[Q],X==="-"||X==="+")X=$[++Q];if(X==="0"){if(Q+1===J)return!0;if(X=$[++Q],X==="b"){Q++;for(;Q<J;Q++){if(X=$[Q],X==="_")continue;if(X!=="0"&&X!=="1")return!1;q=!0}return q&&X!=="_"}if(X==="x"){Q++;for(;Q<J;Q++){if(X=$[Q],X==="_")continue;if(!G1($.charCodeAt(Q)))return!1;q=!0}return q&&X!=="_"}if(X==="o"){Q++;for(;Q<J;Q++){if(X=$[Q],X==="_")continue;if(!Y1($.charCodeAt(Q)))return!1;q=!0}return q&&X!=="_"}}if(X==="_")return!1;for(;Q<J;Q++){if(X=$[Q],X==="_")continue;if(!U1($.charCodeAt(Q)))return!1;q=!0}if(!q||X==="_")return!1;return!0}function W1($){var J=$,Q=1,q;if(J.indexOf("_")!==-1)J=J.replace(/_/g,"");if(q=J[0],q==="-"||q==="+"){if(q==="-")Q=-1;J=J.slice(1),q=J[0]}if(J==="0")return 0;if(q==="0"){if(J[1]==="b")return Q*parseInt(J.slice(2),2);if(J[1]==="x")return Q*parseInt(J.slice(2),16);if(J[1]==="o")return Q*parseInt(J.slice(2),8)}return Q*parseInt(J,10)}function M1($){return Object.prototype.toString.call($)==="[object Number]"&&($%1===0&&!q0.isNegativeZero($))}var AZ=new O0("tag:yaml.org,2002:int",{kind:"scalar",resolve:z1,construct:W1,predicate:M1,represent:{binary:function($){return $>=0?"0b"+$.toString(2):"-0b"+$.toString(2).slice(1)},octal:function($){return $>=0?"0o"+$.toString(8):"-0o"+$.toString(8).slice(1)},decimal:function($){return $.toString(10)},hexadecimal:function($){return $>=0?"0x"+$.toString(16).toUpperCase():"-0x"+$.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),K1=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function O1($){if($===null)return!1;if(!K1.test($)||$[$.length-1]==="_")return!1;return!0}function D1($){var J,Q;if(J=$.replace(/_/g,"").toLowerCase(),Q=J[0]==="-"?-1:1,"+-".indexOf(J[0])>=0)J=J.slice(1);if(J===".inf")return Q===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;else if(J===".nan")return NaN;return Q*parseFloat(J,10)}var V1=/^[-+]?[0-9]+e/;function N1($,J){var Q;if(isNaN($))switch(J){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===$)switch(J){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===$)switch(J){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(q0.isNegativeZero($))return"-0.0";return Q=$.toString(10),V1.test(Q)?Q.replace("e",".e"):Q}function j1($){return Object.prototype.toString.call($)==="[object Number]"&&($%1!==0||q0.isNegativeZero($))}var wZ=new O0("tag:yaml.org,2002:float",{kind:"scalar",resolve:O1,construct:D1,predicate:j1,represent:N1,defaultStyle:"lowercase"}),EZ=IZ.extend({implicit:[LZ,TZ,AZ,wZ]}),FZ=EZ,PZ=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),fZ=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function R1($){if($===null)return!1;if(PZ.exec($)!==null)return!0;if(fZ.exec($)!==null)return!0;return!1}function H1($){var J,Q,q,X,Z,G,Y,U=0,W=null,z,M,O;if(J=PZ.exec($),J===null)J=fZ.exec($);if(J===null)throw new Error("Date resolve error");if(Q=+J[1],q=+J[2]-1,X=+J[3],!J[4])return new Date(Date.UTC(Q,q,X));if(Z=+J[4],G=+J[5],Y=+J[6],J[7]){U=J[7].slice(0,3);while(U.length<3)U+="0";U=+U}if(J[9]){if(z=+J[10],M=+(J[11]||0),W=(z*60+M)*60000,J[9]==="-")W=-W}if(O=new Date(Date.UTC(Q,q,X,Z,G,Y,U)),W)O.setTime(O.getTime()-W);return O}function C1($){return $.toISOString()}var kZ=new O0("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:R1,construct:H1,instanceOf:Date,represent:C1});function B1($){return $==="<<"||$===null}var SZ=new O0("tag:yaml.org,2002:merge",{kind:"scalar",resolve:B1}),sQ=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function I1($){if($===null)return!1;var J,Q,q=0,X=$.length,Z=sQ;for(Q=0;Q<X;Q++){if(J=Z.indexOf($.charAt(Q)),J>64)continue;if(J<0)return!1;q+=6}return q%8===0}function L1($){var J,Q,q=$.replace(/[\r\n=]/g,""),X=q.length,Z=sQ,G=0,Y=[];for(J=0;J<X;J++){if(J%4===0&&J)Y.push(G>>16&255),Y.push(G>>8&255),Y.push(G&255);G=G<<6|Z.indexOf(q.charAt(J))}if(Q=X%4*6,Q===0)Y.push(G>>16&255),Y.push(G>>8&255),Y.push(G&255);else if(Q===18)Y.push(G>>10&255),Y.push(G>>2&255);else if(Q===12)Y.push(G>>4&255);return new Uint8Array(Y)}function T1($){var J="",Q=0,q,X,Z=$.length,G=sQ;for(q=0;q<Z;q++){if(q%3===0&&q)J+=G[Q>>18&63],J+=G[Q>>12&63],J+=G[Q>>6&63],J+=G[Q&63];Q=(Q<<8)+$[q]}if(X=Z%3,X===0)J+=G[Q>>18&63],J+=G[Q>>12&63],J+=G[Q>>6&63],J+=G[Q&63];else if(X===2)J+=G[Q>>10&63],J+=G[Q>>4&63],J+=G[Q<<2&63],J+=G[64];else if(X===1)J+=G[Q>>2&63],J+=G[Q<<4&63],J+=G[64],J+=G[64];return J}function A1($){return Object.prototype.toString.call($)==="[object Uint8Array]"}var xZ=new O0("tag:yaml.org,2002:binary",{kind:"scalar",resolve:I1,construct:L1,predicate:A1,represent:T1}),w1=Object.prototype.hasOwnProperty,E1=Object.prototype.toString;function F1($){if($===null)return!0;var J=[],Q,q,X,Z,G,Y=$;for(Q=0,q=Y.length;Q<q;Q+=1){if(X=Y[Q],G=!1,E1.call(X)!=="[object Object]")return!1;for(Z in X)if(w1.call(X,Z))if(!G)G=!0;else return!1;if(!G)return!1;if(J.indexOf(Z)===-1)J.push(Z);else return!1}return!0}function P1($){return $!==null?$:[]}var vZ=new O0("tag:yaml.org,2002:omap",{kind:"sequence",resolve:F1,construct:P1}),f1=Object.prototype.toString;function k1($){if($===null)return!0;var J,Q,q,X,Z,G=$;Z=new Array(G.length);for(J=0,Q=G.length;J<Q;J+=1){if(q=G[J],f1.call(q)!=="[object Object]")return!1;if(X=Object.keys(q),X.length!==1)return!1;Z[J]=[X[0],q[X[0]]]}return!0}function S1($){if($===null)return[];var J,Q,q,X,Z,G=$;Z=new Array(G.length);for(J=0,Q=G.length;J<Q;J+=1)q=G[J],X=Object.keys(q),Z[J]=[X[0],q[X[0]]];return Z}var _Z=new O0("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:k1,construct:S1}),x1=Object.prototype.hasOwnProperty;function v1($){if($===null)return!0;var J,Q=$;for(J in Q)if(x1.call(Q,J)){if(Q[J]!==null)return!1}return!0}function _1($){return $!==null?$:{}}var gZ=new O0("tag:yaml.org,2002:set",{kind:"mapping",resolve:v1,construct:_1}),aQ=FZ.extend({implicit:[kZ,SZ],explicit:[xZ,vZ,_Z,gZ]}),A8=Object.prototype.hasOwnProperty,FJ=1,bZ=2,yZ=3,PJ=4,cQ=1,g1=2,QZ=3,b1=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y1=/[\x85\u2028\u2029]/,m1=/[,\[\]\{\}]/,mZ=/^(?:!|!!|![a-z\-]+!)$/i,hZ=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function qZ($){return Object.prototype.toString.call($)}function e0($){return $===10||$===13}function g8($){return $===9||$===32}function k0($){return $===9||$===32||$===10||$===13}function $$($){return $===44||$===91||$===93||$===123||$===125}function h1($){var J;if(48<=$&&$<=57)return $-48;if(J=$|32,97<=J&&J<=102)return J-97+10;return-1}function u1($){if($===120)return 2;if($===117)return 4;if($===85)return 8;return 0}function p1($){if(48<=$&&$<=57)return $-48;return-1}function XZ($){return $===48?"\x00":$===97?"\x07":$===98?"\b":$===116?"\t":$===9?"\t":$===110?`
`:$===118?"\v":$===102?"\f":$===114?"\r":$===101?"\x1B":$===32?" ":$===34?'"':$===47?"/":$===92?"\\":$===78?"":$===95?"":$===76?"\u2028":$===80?"\u2029":""}function d1($){if($<=65535)return String.fromCharCode($);return String.fromCharCode(($-65536>>10)+55296,($-65536&1023)+56320)}function uZ($,J,Q){if(J==="__proto__")Object.defineProperty($,J,{configurable:!0,enumerable:!0,writable:!0,value:Q});else $[J]=Q}var pZ=new Array(256),dZ=new Array(256);for(L8=0;L8<256;L8++)pZ[L8]=XZ(L8)?1:0,dZ[L8]=XZ(L8);var L8;function c1($,J){this.input=$,this.filename=J.filename||null,this.schema=J.schema||aQ,this.onWarning=J.onWarning||null,this.legacy=J.legacy||!1,this.json=J.json||!1,this.listener=J.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=$.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function cZ($,J){var Q={name:$.filename,buffer:$.input.slice(0,-1),position:$.position,line:$.line,column:$.position-$.lineStart};return Q.snippet=n7(Q),new E0(J,Q)}function d($,J){throw cZ($,J)}function fJ($,J){if($.onWarning)$.onWarning.call(null,cZ($,J))}var ZZ={YAML:function $(J,Q,q){var X,Z,G;if(J.version!==null)d(J,"duplication of %YAML directive");if(q.length!==1)d(J,"YAML directive accepts exactly one argument");if(X=/^([0-9]+)\.([0-9]+)$/.exec(q[0]),X===null)d(J,"ill-formed argument of the YAML directive");if(Z=parseInt(X[1],10),G=parseInt(X[2],10),Z!==1)d(J,"unacceptable YAML version of the document");if(J.version=q[0],J.checkLineBreaks=G<2,G!==1&&G!==2)fJ(J,"unsupported YAML version of the document")},TAG:function $(J,Q,q){var X,Z;if(q.length!==2)d(J,"TAG directive accepts exactly two arguments");if(X=q[0],Z=q[1],!mZ.test(X))d(J,"ill-formed tag handle (first argument) of the TAG directive");if(A8.call(J.tagMap,X))d(J,'there is a previously declared suffix for "'+X+'" tag handle');if(!hZ.test(Z))d(J,"ill-formed tag prefix (second argument) of the TAG directive");try{Z=decodeURIComponent(Z)}catch(G){d(J,"tag prefix is malformed: "+Z)}J.tagMap[X]=Z}};function T8($,J,Q,q){var X,Z,G,Y;if(J<Q){if(Y=$.input.slice(J,Q),q){for(X=0,Z=Y.length;X<Z;X+=1)if(G=Y.charCodeAt(X),!(G===9||32<=G&&G<=1114111))d($,"expected valid JSON character")}else if(b1.test(Y))d($,"the stream contains non-printable characters");$.result+=Y}}function GZ($,J,Q,q){var X,Z,G,Y;if(!q0.isObject(Q))d($,"cannot merge mappings; the provided source object is unacceptable");X=Object.keys(Q);for(G=0,Y=X.length;G<Y;G+=1)if(Z=X[G],!A8.call(J,Z))uZ(J,Z,Q[Z]),q[Z]=!0}function J$($,J,Q,q,X,Z,G,Y,U){var W,z;if(Array.isArray(X)){X=Array.prototype.slice.call(X);for(W=0,z=X.length;W<z;W+=1){if(Array.isArray(X[W]))d($,"nested arrays are not supported inside keys");if(typeof X==="object"&&qZ(X[W])==="[object Object]")X[W]="[object Object]"}}if(typeof X==="object"&&qZ(X)==="[object Object]")X="[object Object]";if(X=String(X),J===null)J={};if(q==="tag:yaml.org,2002:merge")if(Array.isArray(Z))for(W=0,z=Z.length;W<z;W+=1)GZ($,J,Z[W],Q);else GZ($,J,Z,Q);else{if(!$.json&&!A8.call(Q,X)&&A8.call(J,X))$.line=G||$.line,$.lineStart=Y||$.lineStart,$.position=U||$.position,d($,"duplicated mapping key");uZ(J,X,Z),delete Q[X]}return J}function tQ($){var J=$.input.charCodeAt($.position);if(J===10)$.position++;else if(J===13){if($.position++,$.input.charCodeAt($.position)===10)$.position++}else d($,"a line break is expected");$.line+=1,$.lineStart=$.position,$.firstTabInLine=-1}function $0($,J,Q){var q=0,X=$.input.charCodeAt($.position);while(X!==0){while(g8(X)){if(X===9&&$.firstTabInLine===-1)$.firstTabInLine=$.position;X=$.input.charCodeAt(++$.position)}if(J&&X===35)do X=$.input.charCodeAt(++$.position);while(X!==10&&X!==13&&X!==0);if(e0(X)){tQ($),X=$.input.charCodeAt($.position),q++,$.lineIndent=0;while(X===32)$.lineIndent++,X=$.input.charCodeAt(++$.position)}else break}if(Q!==-1&&q!==0&&$.lineIndent<Q)fJ($,"deficient indentation");return q}function xJ($){var J=$.position,Q;if(Q=$.input.charCodeAt(J),(Q===45||Q===46)&&Q===$.input.charCodeAt(J+1)&&Q===$.input.charCodeAt(J+2)){if(J+=3,Q=$.input.charCodeAt(J),Q===0||k0(Q))return!0}return!1}function eQ($,J){if(J===1)$.result+=" ";else if(J>1)$.result+=q0.repeat(`
`,J-1)}function l1($,J,Q){var q,X,Z,G,Y,U,W,z,M=$.kind,O=$.result,N;if(N=$.input.charCodeAt($.position),k0(N)||$$(N)||N===35||N===38||N===42||N===33||N===124||N===62||N===39||N===34||N===37||N===64||N===96)return!1;if(N===63||N===45){if(X=$.input.charCodeAt($.position+1),k0(X)||Q&&$$(X))return!1}$.kind="scalar",$.result="",Z=G=$.position,Y=!1;while(N!==0){if(N===58){if(X=$.input.charCodeAt($.position+1),k0(X)||Q&&$$(X))break}else if(N===35){if(q=$.input.charCodeAt($.position-1),k0(q))break}else if($.position===$.lineStart&&xJ($)||Q&&$$(N))break;else if(e0(N))if(U=$.line,W=$.lineStart,z=$.lineIndent,$0($,!1,-1),$.lineIndent>=J){Y=!0,N=$.input.charCodeAt($.position);continue}else{$.position=G,$.line=U,$.lineStart=W,$.lineIndent=z;break}if(Y)T8($,Z,G,!1),eQ($,$.line-U),Z=G=$.position,Y=!1;if(!g8(N))G=$.position+1;N=$.input.charCodeAt(++$.position)}if(T8($,Z,G,!1),$.result)return!0;return $.kind=M,$.result=O,!1}function i1($,J){var Q,q,X;if(Q=$.input.charCodeAt($.position),Q!==39)return!1;$.kind="scalar",$.result="",$.position++,q=X=$.position;while((Q=$.input.charCodeAt($.position))!==0)if(Q===39)if(T8($,q,$.position,!0),Q=$.input.charCodeAt(++$.position),Q===39)q=$.position,$.position++,X=$.position;else return!0;else if(e0(Q))T8($,q,X,!0),eQ($,$0($,!1,J)),q=X=$.position;else if($.position===$.lineStart&&xJ($))d($,"unexpected end of the document within a single quoted scalar");else $.position++,X=$.position;d($,"unexpected end of the stream within a single quoted scalar")}function o1($,J){var Q,q,X,Z,G,Y;if(Y=$.input.charCodeAt($.position),Y!==34)return!1;$.kind="scalar",$.result="",$.position++,Q=q=$.position;while((Y=$.input.charCodeAt($.position))!==0)if(Y===34)return T8($,Q,$.position,!0),$.position++,!0;else if(Y===92){if(T8($,Q,$.position,!0),Y=$.input.charCodeAt(++$.position),e0(Y))$0($,!1,J);else if(Y<256&&pZ[Y])$.result+=dZ[Y],$.position++;else if((G=u1(Y))>0){X=G,Z=0;for(;X>0;X--)if(Y=$.input.charCodeAt(++$.position),(G=h1(Y))>=0)Z=(Z<<4)+G;else d($,"expected hexadecimal character");$.result+=d1(Z),$.position++}else d($,"unknown escape sequence");Q=q=$.position}else if(e0(Y))T8($,Q,q,!0),eQ($,$0($,!1,J)),Q=q=$.position;else if($.position===$.lineStart&&xJ($))d($,"unexpected end of the document within a double quoted scalar");else $.position++,q=$.position;d($,"unexpected end of the stream within a double quoted scalar")}function n1($,J){var Q=!0,q,X,Z,G=$.tag,Y,U=$.anchor,W,z,M,O,N,j=Object.create(null),E,D,L,V;if(V=$.input.charCodeAt($.position),V===91)z=93,N=!1,Y=[];else if(V===123)z=125,N=!0,Y={};else return!1;if($.anchor!==null)$.anchorMap[$.anchor]=Y;V=$.input.charCodeAt(++$.position);while(V!==0){if($0($,!0,J),V=$.input.charCodeAt($.position),V===z)return $.position++,$.tag=G,$.anchor=U,$.kind=N?"mapping":"sequence",$.result=Y,!0;else if(!Q)d($,"missed comma between flow collection entries");else if(V===44)d($,"expected the node content, but found ','");if(D=E=L=null,M=O=!1,V===63){if(W=$.input.charCodeAt($.position+1),k0(W))M=O=!0,$.position++,$0($,!0,J)}if(q=$.line,X=$.lineStart,Z=$.position,Q$($,J,FJ,!1,!0),D=$.tag,E=$.result,$0($,!0,J),V=$.input.charCodeAt($.position),(O||$.line===q)&&V===58)M=!0,V=$.input.charCodeAt(++$.position),$0($,!0,J),Q$($,J,FJ,!1,!0),L=$.result;if(N)J$($,Y,j,D,E,L,q,X,Z);else if(M)Y.push(J$($,null,j,D,E,L,q,X,Z));else Y.push(E);if($0($,!0,J),V=$.input.charCodeAt($.position),V===44)Q=!0,V=$.input.charCodeAt(++$.position);else Q=!1}d($,"unexpected end of the stream within a flow collection")}function r1($,J){var Q,q,X=cQ,Z=!1,G=!1,Y=J,U=0,W=!1,z,M;if(M=$.input.charCodeAt($.position),M===124)q=!1;else if(M===62)q=!0;else return!1;$.kind="scalar",$.result="";while(M!==0)if(M=$.input.charCodeAt(++$.position),M===43||M===45)if(cQ===X)X=M===43?QZ:g1;else d($,"repeat of a chomping mode identifier");else if((z=p1(M))>=0)if(z===0)d($,"bad explicit indentation width of a block scalar; it cannot be less than one");else if(!G)Y=J+z-1,G=!0;else d($,"repeat of an indentation width identifier");else break;if(g8(M)){do M=$.input.charCodeAt(++$.position);while(g8(M));if(M===35)do M=$.input.charCodeAt(++$.position);while(!e0(M)&&M!==0)}while(M!==0){tQ($),$.lineIndent=0,M=$.input.charCodeAt($.position);while((!G||$.lineIndent<Y)&&M===32)$.lineIndent++,M=$.input.charCodeAt(++$.position);if(!G&&$.lineIndent>Y)Y=$.lineIndent;if(e0(M)){U++;continue}if($.lineIndent<Y){if(X===QZ)$.result+=q0.repeat(`
`,Z?1+U:U);else if(X===cQ){if(Z)$.result+=`
`}break}if(q)if(g8(M))W=!0,$.result+=q0.repeat(`
`,Z?1+U:U);else if(W)W=!1,$.result+=q0.repeat(`
`,U+1);else if(U===0){if(Z)$.result+=" "}else $.result+=q0.repeat(`
`,U);else $.result+=q0.repeat(`
`,Z?1+U:U);Z=!0,G=!0,U=0,Q=$.position;while(!e0(M)&&M!==0)M=$.input.charCodeAt(++$.position);T8($,Q,$.position,!1)}return!0}function YZ($,J){var Q,q=$.tag,X=$.anchor,Z=[],G,Y=!1,U;if($.firstTabInLine!==-1)return!1;if($.anchor!==null)$.anchorMap[$.anchor]=Z;U=$.input.charCodeAt($.position);while(U!==0){if($.firstTabInLine!==-1)$.position=$.firstTabInLine,d($,"tab characters must not be used in indentation");if(U!==45)break;if(G=$.input.charCodeAt($.position+1),!k0(G))break;if(Y=!0,$.position++,$0($,!0,-1)){if($.lineIndent<=J){Z.push(null),U=$.input.charCodeAt($.position);continue}}if(Q=$.line,Q$($,J,yZ,!1,!0),Z.push($.result),$0($,!0,-1),U=$.input.charCodeAt($.position),($.line===Q||$.lineIndent>J)&&U!==0)d($,"bad indentation of a sequence entry");else if($.lineIndent<J)break}if(Y)return $.tag=q,$.anchor=X,$.kind="sequence",$.result=Z,!0;return!1}function s1($,J,Q){var q,X,Z,G,Y,U,W=$.tag,z=$.anchor,M={},O=Object.create(null),N=null,j=null,E=null,D=!1,L=!1,V;if($.firstTabInLine!==-1)return!1;if($.anchor!==null)$.anchorMap[$.anchor]=M;V=$.input.charCodeAt($.position);while(V!==0){if(!D&&$.firstTabInLine!==-1)$.position=$.firstTabInLine,d($,"tab characters must not be used in indentation");if(q=$.input.charCodeAt($.position+1),Z=$.line,(V===63||V===58)&&k0(q)){if(V===63){if(D)J$($,M,O,N,j,null,G,Y,U),N=j=E=null;L=!0,D=!0,X=!0}else if(D)D=!1,X=!0;else d($,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line");$.position+=1,V=q}else{if(G=$.line,Y=$.lineStart,U=$.position,!Q$($,Q,bZ,!1,!0))break;if($.line===Z){V=$.input.charCodeAt($.position);while(g8(V))V=$.input.charCodeAt(++$.position);if(V===58){if(V=$.input.charCodeAt(++$.position),!k0(V))d($,"a whitespace character is expected after the key-value separator within a block mapping");if(D)J$($,M,O,N,j,null,G,Y,U),N=j=E=null;L=!0,D=!1,X=!1,N=$.tag,j=$.result}else if(L)d($,"can not read an implicit mapping pair; a colon is missed");else return $.tag=W,$.anchor=z,!0}else if(L)d($,"can not read a block mapping entry; a multiline key may not be an implicit key");else return $.tag=W,$.anchor=z,!0}if($.line===Z||$.lineIndent>J){if(D)G=$.line,Y=$.lineStart,U=$.position;if(Q$($,J,PJ,!0,X))if(D)j=$.result;else E=$.result;if(!D)J$($,M,O,N,j,E,G,Y,U),N=j=E=null;$0($,!0,-1),V=$.input.charCodeAt($.position)}if(($.line===Z||$.lineIndent>J)&&V!==0)d($,"bad indentation of a mapping entry");else if($.lineIndent<J)break}if(D)J$($,M,O,N,j,null,G,Y,U);if(L)$.tag=W,$.anchor=z,$.kind="mapping",$.result=M;return L}function a1($){var J,Q=!1,q=!1,X,Z,G;if(G=$.input.charCodeAt($.position),G!==33)return!1;if($.tag!==null)d($,"duplication of a tag property");if(G=$.input.charCodeAt(++$.position),G===60)Q=!0,G=$.input.charCodeAt(++$.position);else if(G===33)q=!0,X="!!",G=$.input.charCodeAt(++$.position);else X="!";if(J=$.position,Q){do G=$.input.charCodeAt(++$.position);while(G!==0&&G!==62);if($.position<$.length)Z=$.input.slice(J,$.position),G=$.input.charCodeAt(++$.position);else d($,"unexpected end of the stream within a verbatim tag")}else{while(G!==0&&!k0(G)){if(G===33)if(!q){if(X=$.input.slice(J-1,$.position+1),!mZ.test(X))d($,"named tag handle cannot contain such characters");q=!0,J=$.position+1}else d($,"tag suffix cannot contain exclamation marks");G=$.input.charCodeAt(++$.position)}if(Z=$.input.slice(J,$.position),m1.test(Z))d($,"tag suffix cannot contain flow indicator characters")}if(Z&&!hZ.test(Z))d($,"tag name cannot contain such characters: "+Z);try{Z=decodeURIComponent(Z)}catch(Y){d($,"tag name is malformed: "+Z)}if(Q)$.tag=Z;else if(A8.call($.tagMap,X))$.tag=$.tagMap[X]+Z;else if(X==="!")$.tag="!"+Z;else if(X==="!!")$.tag="tag:yaml.org,2002:"+Z;else d($,'undeclared tag handle "'+X+'"');return!0}function t1($){var J,Q;if(Q=$.input.charCodeAt($.position),Q!==38)return!1;if($.anchor!==null)d($,"duplication of an anchor property");Q=$.input.charCodeAt(++$.position),J=$.position;while(Q!==0&&!k0(Q)&&!$$(Q))Q=$.input.charCodeAt(++$.position);if($.position===J)d($,"name of an anchor node must contain at least one character");return $.anchor=$.input.slice(J,$.position),!0}function e1($){var J,Q,q;if(q=$.input.charCodeAt($.position),q!==42)return!1;q=$.input.charCodeAt(++$.position),J=$.position;while(q!==0&&!k0(q)&&!$$(q))q=$.input.charCodeAt(++$.position);if($.position===J)d($,"name of an alias node must contain at least one character");if(Q=$.input.slice(J,$.position),!A8.call($.anchorMap,Q))d($,'unidentified alias "'+Q+'"');return $.result=$.anchorMap[Q],$0($,!0,-1),!0}function Q$($,J,Q,q,X){var Z,G,Y,U=1,W=!1,z=!1,M,O,N,j,E,D;if($.listener!==null)$.listener("open",$);if($.tag=null,$.anchor=null,$.kind=null,$.result=null,Z=G=Y=PJ===Q||yZ===Q,q){if($0($,!0,-1)){if(W=!0,$.lineIndent>J)U=1;else if($.lineIndent===J)U=0;else if($.lineIndent<J)U=-1}}if(U===1)while(a1($)||t1($))if($0($,!0,-1)){if(W=!0,Y=Z,$.lineIndent>J)U=1;else if($.lineIndent===J)U=0;else if($.lineIndent<J)U=-1}else Y=!1;if(Y)Y=W||X;if(U===1||PJ===Q){if(FJ===Q||bZ===Q)E=J;else E=J+1;if(D=$.position-$.lineStart,U===1)if(Y&&(YZ($,D)||s1($,D,E))||n1($,E))z=!0;else{if(G&&r1($,E)||i1($,E)||o1($,E))z=!0;else if(e1($)){if(z=!0,$.tag!==null||$.anchor!==null)d($,"alias node should not have any properties")}else if(l1($,E,FJ===Q)){if(z=!0,$.tag===null)$.tag="?"}if($.anchor!==null)$.anchorMap[$.anchor]=$.result}else if(U===0)z=Y&&YZ($,D)}if($.tag===null){if($.anchor!==null)$.anchorMap[$.anchor]=$.result}else if($.tag==="?"){if($.result!==null&&$.kind!=="scalar")d($,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+$.kind+'"');for(M=0,O=$.implicitTypes.length;M<O;M+=1)if(j=$.implicitTypes[M],j.resolve($.result)){if($.result=j.construct($.result),$.tag=j.tag,$.anchor!==null)$.anchorMap[$.anchor]=$.result;break}}else if($.tag!=="!"){if(A8.call($.typeMap[$.kind||"fallback"],$.tag))j=$.typeMap[$.kind||"fallback"][$.tag];else{j=null,N=$.typeMap.multi[$.kind||"fallback"];for(M=0,O=N.length;M<O;M+=1)if($.tag.slice(0,N[M].tag.length)===N[M].tag){j=N[M];break}}if(!j)d($,"unknown tag !<"+$.tag+">");if($.result!==null&&j.kind!==$.kind)d($,"unacceptable node kind for !<"+$.tag+'> tag; it should be "'+j.kind+'", not "'+$.kind+'"');if(!j.resolve($.result,$.tag))d($,"cannot resolve a node with !<"+$.tag+"> explicit tag");else if($.result=j.construct($.result,$.tag),$.anchor!==null)$.anchorMap[$.anchor]=$.result}if($.listener!==null)$.listener("close",$);return $.tag!==null||$.anchor!==null||z}function $4($){var J=$.position,Q,q,X,Z=!1,G;$.version=null,$.checkLineBreaks=$.legacy,$.tagMap=Object.create(null),$.anchorMap=Object.create(null);while((G=$.input.charCodeAt($.position))!==0){if($0($,!0,-1),G=$.input.charCodeAt($.position),$.lineIndent>0||G!==37)break;Z=!0,G=$.input.charCodeAt(++$.position),Q=$.position;while(G!==0&&!k0(G))G=$.input.charCodeAt(++$.position);if(q=$.input.slice(Q,$.position),X=[],q.length<1)d($,"directive name must not be less than one character in length");while(G!==0){while(g8(G))G=$.input.charCodeAt(++$.position);if(G===35){do G=$.input.charCodeAt(++$.position);while(G!==0&&!e0(G));break}if(e0(G))break;Q=$.position;while(G!==0&&!k0(G))G=$.input.charCodeAt(++$.position);X.push($.input.slice(Q,$.position))}if(G!==0)tQ($);if(A8.call(ZZ,q))ZZ[q]($,q,X);else fJ($,'unknown document directive "'+q+'"')}if($0($,!0,-1),$.lineIndent===0&&$.input.charCodeAt($.position)===45&&$.input.charCodeAt($.position+1)===45&&$.input.charCodeAt($.position+2)===45)$.position+=3,$0($,!0,-1);else if(Z)d($,"directives end mark is expected");if(Q$($,$.lineIndent-1,PJ,!1,!0),$0($,!0,-1),$.checkLineBreaks&&y1.test($.input.slice(J,$.position)))fJ($,"non-ASCII line breaks are interpreted as content");if($.documents.push($.result),$.position===$.lineStart&&xJ($)){if($.input.charCodeAt($.position)===46)$.position+=3,$0($,!0,-1);return}if($.position<$.length-1)d($,"end of the stream or a document separator is expected");else return}function lZ($,J){if($=String($),J=J||{},$.length!==0){if($.charCodeAt($.length-1)!==10&&$.charCodeAt($.length-1)!==13)$+=`
`;if($.charCodeAt(0)===65279)$=$.slice(1)}var Q=new c1($,J),q=$.indexOf("\x00");if(q!==-1)Q.position=q,d(Q,"null byte is not allowed in input");Q.input+="\x00";while(Q.input.charCodeAt(Q.position)===32)Q.lineIndent+=1,Q.position+=1;while(Q.position<Q.length-1)$4(Q);return Q.documents}function J4($,J,Q){if(J!==null&&typeof J==="object"&&typeof Q==="undefined")Q=J,J=null;var q=lZ($,Q);if(typeof J!=="function")return q;for(var X=0,Z=q.length;X<Z;X+=1)J(q[X])}function Q4($,J){var Q=lZ($,J);if(Q.length===0)return;else if(Q.length===1)return Q[0];throw new E0("expected a single document in the stream, but found more")}var q4=J4,X4=Q4,iZ={loadAll:q4,load:X4},oZ=Object.prototype.toString,nZ=Object.prototype.hasOwnProperty,$9=65279,Z4=9,S$=10,G4=13,Y4=32,U4=33,z4=34,iQ=35,W4=37,M4=38,K4=39,O4=42,rZ=44,D4=45,kJ=58,V4=61,N4=62,j4=63,R4=64,sZ=91,aZ=93,H4=96,tZ=123,C4=124,eZ=125,B0={};B0[0]="\\0";B0[7]="\\a";B0[8]="\\b";B0[9]="\\t";B0[10]="\\n";B0[11]="\\v";B0[12]="\\f";B0[13]="\\r";B0[27]="\\e";B0[34]="\\\"";B0[92]="\\\\";B0[133]="\\N";B0[160]="\\_";B0[8232]="\\L";B0[8233]="\\P";var B4=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],I4=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function L4($,J){var Q,q,X,Z,G,Y,U;if(J===null)return{};Q={},q=Object.keys(J);for(X=0,Z=q.length;X<Z;X+=1){if(G=q[X],Y=String(J[G]),G.slice(0,2)==="!!")G="tag:yaml.org,2002:"+G.slice(2);if(U=$.compiledTypeMap.fallback[G],U&&nZ.call(U.styleAliases,Y))Y=U.styleAliases[Y];Q[G]=Y}return Q}function T4($){var J,Q,q;if(J=$.toString(16).toUpperCase(),$<=255)Q="x",q=2;else if($<=65535)Q="u",q=4;else if($<=4294967295)Q="U",q=8;else throw new E0("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+Q+q0.repeat("0",q-J.length)+J}var A4=1,x$=2;function w4($){this.schema=$.schema||aQ,this.indent=Math.max(1,$.indent||2),this.noArrayIndent=$.noArrayIndent||!1,this.skipInvalid=$.skipInvalid||!1,this.flowLevel=q0.isNothing($.flowLevel)?-1:$.flowLevel,this.styleMap=L4(this.schema,$.styles||null),this.sortKeys=$.sortKeys||!1,this.lineWidth=$.lineWidth||80,this.noRefs=$.noRefs||!1,this.noCompatMode=$.noCompatMode||!1,this.condenseFlow=$.condenseFlow||!1,this.quotingType=$.quotingType==='"'?x$:A4,this.forceQuotes=$.forceQuotes||!1,this.replacer=typeof $.replacer==="function"?$.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function UZ($,J){var Q=q0.repeat(" ",J),q=0,X=-1,Z="",G,Y=$.length;while(q<Y){if(X=$.indexOf(`
`,q),X===-1)G=$.slice(q),q=Y;else G=$.slice(q,X+1),q=X+1;if(G.length&&G!==`
`)Z+=Q;Z+=G}return Z}function oQ($,J){return`
`+q0.repeat(" ",$.indent*J)}function E4($,J){var Q,q,X;for(Q=0,q=$.implicitTypes.length;Q<q;Q+=1)if(X=$.implicitTypes[Q],X.resolve(J))return!0;return!1}function SJ($){return $===Y4||$===Z4}function v$($){return 32<=$&&$<=126||161<=$&&$<=55295&&$!==8232&&$!==8233||57344<=$&&$<=65533&&$!==$9||65536<=$&&$<=1114111}function zZ($){return v$($)&&$!==$9&&$!==G4&&$!==S$}function WZ($,J,Q){var q=zZ($),X=q&&!SJ($);return(Q?q:q&&$!==rZ&&$!==sZ&&$!==aZ&&$!==tZ&&$!==eZ)&&$!==iQ&&!(J===kJ&&!X)||zZ(J)&&!SJ(J)&&$===iQ||J===kJ&&X}function F4($){return v$($)&&$!==$9&&!SJ($)&&$!==D4&&$!==j4&&$!==kJ&&$!==rZ&&$!==sZ&&$!==aZ&&$!==tZ&&$!==eZ&&$!==iQ&&$!==M4&&$!==O4&&$!==U4&&$!==C4&&$!==V4&&$!==N4&&$!==K4&&$!==z4&&$!==W4&&$!==R4&&$!==H4}function P4($){return!SJ($)&&$!==kJ}function f$($,J){var Q=$.charCodeAt(J),q;if(Q>=55296&&Q<=56319&&J+1<$.length){if(q=$.charCodeAt(J+1),q>=56320&&q<=57343)return(Q-55296)*1024+q-56320+65536}return Q}function $G($){var J=/^\n* /;return J.test($)}var JG=1,nQ=2,QG=3,qG=4,e8=5;function f4($,J,Q,q,X,Z,G,Y){var U,W=0,z=null,M=!1,O=!1,N=q!==-1,j=-1,E=F4(f$($,0))&&P4(f$($,$.length-1));if(J||G)for(U=0;U<$.length;W>=65536?U+=2:U++){if(W=f$($,U),!v$(W))return e8;E=E&&WZ(W,z,Y),z=W}else{for(U=0;U<$.length;W>=65536?U+=2:U++){if(W=f$($,U),W===S$){if(M=!0,N)O=O||U-j-1>q&&$[j+1]!==" ",j=U}else if(!v$(W))return e8;E=E&&WZ(W,z,Y),z=W}O=O||N&&(U-j-1>q&&$[j+1]!==" ")}if(!M&&!O){if(E&&!G&&!X($))return JG;return Z===x$?e8:nQ}if(Q>9&&$G($))return e8;if(!G)return O?qG:QG;return Z===x$?e8:nQ}function k4($,J,Q,q,X){$.dump=function(){if(J.length===0)return $.quotingType===x$?'""':"''";if(!$.noCompatMode){if(B4.indexOf(J)!==-1||I4.test(J))return $.quotingType===x$?'"'+J+'"':"'"+J+"'"}var Z=$.indent*Math.max(1,Q),G=$.lineWidth===-1?-1:Math.max(Math.min($.lineWidth,40),$.lineWidth-Z),Y=q||$.flowLevel>-1&&Q>=$.flowLevel;function U(W){return E4($,W)}switch(f4(J,Y,$.indent,G,U,$.quotingType,$.forceQuotes&&!q,X)){case JG:return J;case nQ:return"'"+J.replace(/'/g,"''")+"'";case QG:return"|"+MZ(J,$.indent)+KZ(UZ(J,Z));case qG:return">"+MZ(J,$.indent)+KZ(UZ(S4(J,G),Z));case e8:return'"'+x4(J)+'"';default:throw new E0("impossible error: invalid scalar style")}}()}function MZ($,J){var Q=$G($)?String(J):"",q=$[$.length-1]===`
`,X=q&&($[$.length-2]===`
`||$===`
`),Z=X?"+":q?"":"-";return Q+Z+`
`}function KZ($){return $[$.length-1]===`
`?$.slice(0,-1):$}function S4($,J){var Q=/(\n+)([^\n]*)/g,q=function(){var W=$.indexOf(`
`);return W=W!==-1?W:$.length,Q.lastIndex=W,OZ($.slice(0,W),J)}(),X=$[0]===`
`||$[0]===" ",Z,G;while(G=Q.exec($)){var Y=G[1],U=G[2];Z=U[0]===" ",q+=Y+(!X&&!Z&&U!==""?`
`:"")+OZ(U,J),X=Z}return q}function OZ($,J){if($===""||$[0]===" ")return $;var Q=/ [^ ]/g,q,X=0,Z,G=0,Y=0,U="";while(q=Q.exec($)){if(Y=q.index,Y-X>J)Z=G>X?G:Y,U+=`
`+$.slice(X,Z),X=Z+1;G=Y}if(U+=`
`,$.length-X>J&&G>X)U+=$.slice(X,G)+`
`+$.slice(G+1);else U+=$.slice(X);return U.slice(1)}function x4($){var J="",Q=0,q;for(var X=0;X<$.length;Q>=65536?X+=2:X++)if(Q=f$($,X),q=B0[Q],!q&&v$(Q)){if(J+=$[X],Q>=65536)J+=$[X+1]}else J+=q||T4(Q);return J}function v4($,J,Q){var q="",X=$.tag,Z,G,Y;for(Z=0,G=Q.length;Z<G;Z+=1){if(Y=Q[Z],$.replacer)Y=$.replacer.call(Q,String(Z),Y);if(W8($,J,Y,!1,!1)||typeof Y==="undefined"&&W8($,J,null,!1,!1)){if(q!=="")q+=","+(!$.condenseFlow?" ":"");q+=$.dump}}$.tag=X,$.dump="["+q+"]"}function DZ($,J,Q,q){var X="",Z=$.tag,G,Y,U;for(G=0,Y=Q.length;G<Y;G+=1){if(U=Q[G],$.replacer)U=$.replacer.call(Q,String(G),U);if(W8($,J+1,U,!0,!0,!1,!0)||typeof U==="undefined"&&W8($,J+1,null,!0,!0,!1,!0)){if(!q||X!=="")X+=oQ($,J);if($.dump&&S$===$.dump.charCodeAt(0))X+="-";else X+="- ";X+=$.dump}}$.tag=Z,$.dump=X||"[]"}function _4($,J,Q){var q="",X=$.tag,Z=Object.keys(Q),G,Y,U,W,z;for(G=0,Y=Z.length;G<Y;G+=1){if(z="",q!=="")z+=", ";if($.condenseFlow)z+='"';if(U=Z[G],W=Q[U],$.replacer)W=$.replacer.call(Q,U,W);if(!W8($,J,U,!1,!1))continue;if($.dump.length>1024)z+="? ";if(z+=$.dump+($.condenseFlow?'"':"")+":"+($.condenseFlow?"":" "),!W8($,J,W,!1,!1))continue;z+=$.dump,q+=z}$.tag=X,$.dump="{"+q+"}"}function g4($,J,Q,q){var X="",Z=$.tag,G=Object.keys(Q),Y,U,W,z,M,O;if($.sortKeys===!0)G.sort();else if(typeof $.sortKeys==="function")G.sort($.sortKeys);else if($.sortKeys)throw new E0("sortKeys must be a boolean or a function");for(Y=0,U=G.length;Y<U;Y+=1){if(O="",!q||X!=="")O+=oQ($,J);if(W=G[Y],z=Q[W],$.replacer)z=$.replacer.call(Q,W,z);if(!W8($,J+1,W,!0,!0,!0))continue;if(M=$.tag!==null&&$.tag!=="?"||$.dump&&$.dump.length>1024,M)if($.dump&&S$===$.dump.charCodeAt(0))O+="?";else O+="? ";if(O+=$.dump,M)O+=oQ($,J);if(!W8($,J+1,z,!0,M))continue;if($.dump&&S$===$.dump.charCodeAt(0))O+=":";else O+=": ";O+=$.dump,X+=O}$.tag=Z,$.dump=X||"{}"}function VZ($,J,Q){var q,X,Z,G,Y,U;X=Q?$.explicitTypes:$.implicitTypes;for(Z=0,G=X.length;Z<G;Z+=1)if(Y=X[Z],(Y.instanceOf||Y.predicate)&&(!Y.instanceOf||typeof J==="object"&&J instanceof Y.instanceOf)&&(!Y.predicate||Y.predicate(J))){if(Q)if(Y.multi&&Y.representName)$.tag=Y.representName(J);else $.tag=Y.tag;else $.tag="?";if(Y.represent){if(U=$.styleMap[Y.tag]||Y.defaultStyle,oZ.call(Y.represent)==="[object Function]")q=Y.represent(J,U);else if(nZ.call(Y.represent,U))q=Y.represent[U](J,U);else throw new E0("!<"+Y.tag+'> tag resolver accepts not "'+U+'" style');$.dump=q}return!0}return!1}function W8($,J,Q,q,X,Z,G){if($.tag=null,$.dump=Q,!VZ($,Q,!1))VZ($,Q,!0);var Y=oZ.call($.dump),U=q,W;if(q)q=$.flowLevel<0||$.flowLevel>J;var z=Y==="[object Object]"||Y==="[object Array]",M,O;if(z)M=$.duplicates.indexOf(Q),O=M!==-1;if($.tag!==null&&$.tag!=="?"||O||$.indent!==2&&J>0)X=!1;if(O&&$.usedDuplicates[M])$.dump="*ref_"+M;else{if(z&&O&&!$.usedDuplicates[M])$.usedDuplicates[M]=!0;if(Y==="[object Object]"){if(q&&Object.keys($.dump).length!==0){if(g4($,J,$.dump,X),O)$.dump="&ref_"+M+$.dump}else if(_4($,J,$.dump),O)$.dump="&ref_"+M+" "+$.dump}else if(Y==="[object Array]"){if(q&&$.dump.length!==0){if($.noArrayIndent&&!G&&J>0)DZ($,J-1,$.dump,X);else DZ($,J,$.dump,X);if(O)$.dump="&ref_"+M+$.dump}else if(v4($,J,$.dump),O)$.dump="&ref_"+M+" "+$.dump}else if(Y==="[object String]"){if($.tag!=="?")k4($,$.dump,J,Z,U)}else if(Y==="[object Undefined]")return!1;else{if($.skipInvalid)return!1;throw new E0("unacceptable kind of an object to dump "+Y)}if($.tag!==null&&$.tag!=="?"){if(W=encodeURI($.tag[0]==="!"?$.tag.slice(1):$.tag).replace(/!/g,"%21"),$.tag[0]==="!")W="!"+W;else if(W.slice(0,18)==="tag:yaml.org,2002:")W="!!"+W.slice(18);else W="!<"+W+">";$.dump=W+" "+$.dump}}return!0}function b4($,J){var Q=[],q=[],X,Z;rQ($,Q,q);for(X=0,Z=q.length;X<Z;X+=1)J.duplicates.push(Q[q[X]]);J.usedDuplicates=new Array(Z)}function rQ($,J,Q){var q,X,Z;if($!==null&&typeof $==="object")if(X=J.indexOf($),X!==-1){if(Q.indexOf(X)===-1)Q.push(X)}else if(J.push($),Array.isArray($))for(X=0,Z=$.length;X<Z;X+=1)rQ($[X],J,Q);else{q=Object.keys($);for(X=0,Z=q.length;X<Z;X+=1)rQ($[q[X]],J,Q)}}function y4($,J){J=J||{};var Q=new w4(J);if(!Q.noRefs)b4($,Q);var q=$;if(Q.replacer)q=Q.replacer.call({"":q},"",q);if(W8(Q,0,q,!0,!0))return Q.dump+`
`;return""}var m4=y4,h4={dump:m4};function J9($,J){return function(){throw new Error("Function yaml."+$+" is removed in js-yaml 4. Use yaml."+J+" instead, which is now safe by default.")}}var u4=O0,p4=RZ,d4=IZ,c4=EZ,l4=FZ,i4=aQ,o4=iZ.load,n4=iZ.loadAll,r4=h4.dump,s4=E0,a4={binary:xZ,float:wZ,map:BZ,null:LZ,pairs:_Z,set:gZ,timestamp:kZ,bool:TZ,int:AZ,merge:SZ,omap:vZ,seq:CZ,str:HZ},t4=J9("safeLoad","load"),e4=J9("safeLoadAll","loadAll"),$U=J9("safeDump","dump"),XG={Type:u4,Schema:p4,FAILSAFE_SCHEMA:d4,JSON_SCHEMA:c4,CORE_SCHEMA:l4,DEFAULT_SCHEMA:i4,load:o4,loadAll:n4,dump:r4,YAMLException:s4,types:a4,safeLoad:t4,safeLoadAll:e4,safeDump:$U};function ZG($){let J=$.split(`
`),Q="",q={"@context":"https://schema.org","@type":"CreativeWork"},X=[],Z=(C)=>{let B=C.trim();if(!B)return null;try{return JSON.parse(B)}catch{}try{return XG.load(B)}catch{}return null},G={},Y=!1,U="",W=!1;J.forEach((C)=>{let B=C.trim();if(B==="```agg"){W=!0;return}if(W){if(B==="```")W=!1;return}let P=B.match(/^\[master:([^\]]+)\]$/);if(P){U=P[1]||"",G[U]=[],Y=!0;return}if(Y&&U){if(B.startsWith("|")){let S=B.split("|").slice(1,-1).map((K)=>K.trim());if(!S.every((K)=>K.match(/^-+$/))&&U&&G[U])G[U].push(S)}else if(B.length>0)Y=!1}}),s.setMasterData(G);let z=null,M=null,O=!1,N=!1,j="";q.fields=[],q.tables={},q.masterData=G;let E=[],D=null,L="",V=!1,H=[],F=(C)=>{L+=C},x=(C)=>{return C.replace(/\[(?:([a-z]+):)?([^\]\s:\(\)]+)(?:\s*\((.*?)\))?\]/g,(B,P,S,y)=>{let K=(y||"").match(/placeholder="([^"]+)"/)||(y||"").match(/placeholder='([^']+)'/),A=K?K[1]:S;return q.fields.push({key:S,label:A,type:P||"text"}),s.renderInput(P||"text",S,y||"")})};if(J.forEach((C)=>{let B=C.trim();if(B==="```agg"){V=!0,H=[];return}if(V){if(B==="```"){V=!1;let K=Z(H.join(`
`));if(K)X.push(K);H=[]}else H.push(C);return}let P=B.match(/^\[master:([^\]]+)\]$/);if(P){j=P[1]||"";return}let S=B.match(/^\[dynamic\s*-?\s*table:([^\]]+)\]$/);if(S){M=S[1]||"",q.tables[M]=[];return}if(B.startsWith("|")){if(!O){F('<div class="form-row vertical"><div class="table-wrapper">');let I="data-table",w="";if(M)I+=" dynamic",w=`id="tbl_${M}" data-table-key="${M}"`;else if(j)I+=" master",w=`data-master-key="${j}"`;F(`<table class="${I}" ${w}>`),F("<tbody>"),O=!0,N=!!j}let K=B.split("|").slice(1,-1).map((I)=>I.trim());if(K.every((I)=>I.match(/^-+$/)));else if(M)if(!K.some((w)=>w.includes("[")))F(`<tr>${K.map((w)=>`<th>${s.escapeHtml(w)}</th>`).join("")}<th class="row-action-cell"></th></tr>`);else{let w=M;K.forEach((_)=>{let b=_.trim().match(/^\[(?:([a-z]+):)?([^\]:\(\)]+)(?:\s*\((.*)\)|:([^\]]+))?\]$/);if(b){let[u,p,m,D0,$8]=b,Y0=m.trim(),b0=D0||$8||"";if(Y0.includes(" ")){let X$=Y0.split(/\s+/);Y0=X$[0],b0=X$.slice(1).join(" ")+" "+b0}let c0=b0.match(/placeholder="([^"]+)"/)||b0.match(/placeholder='([^']+)'/),q$=c0?c0[1]:Y0;q.tables[w].push({key:Y0,label:q$,type:p||"text"})}});let f=s.tableRow(K,!0);f=f.replace("</tr>",'<td class="row-action-cell"><button type="button" class="remove-row-btn" onclick="removeTableRow(this)" tabindex="-1"></button></td></tr>'),F(f)}else if(N)F(s.tableRow(K));else F(s.tableRow(K));return}else if(O){if(F("</tbody></table></div>"),M)F(`<button type="button" class="add-row-btn" onclick="addTableRow(this, '${M}')" data-i18n="add_row">+ </button>`),M=null;F("</div>"),O=!1,N=!1,j=""}let y=B.match(/^(#{1,6})\s+(.*)$/);if(y){let K=y[1]?y[1].length:1,A=y[2]||"";if(K===1)F(`<h1>${s.escapeHtml(A)}</h1>`),q.name=A;else if(K===2){if(D)F("</div>");let I=A.includes("(Config)")||A.includes("(Hidden)")||A.includes("(System)"),w="tab-"+(E.length+1);E.push({id:w,title:A,isSystem:I}),D=w;let f=!I&&E.filter((b)=>!b.isSystem).length===1?" active":"",_=I?' style="display:none !important;"':"";F(`<div id="${w}" class="tab-content${f}" data-tab-title="${s.escapeHtml(A)}"${_}>`)}else F(`<h${K}>${s.escapeHtml(A)}</h${K}>`);z=null}else if(C.startsWith("  - ")||C.startsWith("\t- ")){if(z){let K=B.replace(/^-\s*/,""),A=!1;if(K.startsWith("[x] "))A=!0,K=K.substring(4);F(s.radioOption(z.key,K,K,A))}}else if(B.startsWith("- [")){let K=B.match(/^-\s*\[([a-z]+):([^\]\s:\(\)]+)(?:\s*\((.*)\))?\]\s*(.*)$/);if(K){let[A,I,w,f,_]=K;z=null;let b=(_||"").trim();if(q.fields.push({key:w,label:b,type:I}),I==="radio")z={key:w,label:b,attrs:f||""},F(s.radioStart(w,b,f));else if(I==="text")F(s.text(w,b,f));else if(I==="number")F(s.number(w,b,f));else if(I==="date")F(s.date(w,b,f));else if(I==="textarea")F(s.textarea(w,b,f));else if(I==="search")F(s.search(w,b,f));else if(I==="calc")F(s.calc(w,b,f));else if(I==="datalist")F(s.renderInput(I,w,f));else if(I&&s[I])F(s[I](w,b,f));else console.warn(`Unknown type: ${I}`,Object.keys(s)),F(`<p style="color:red">Unknown type: ${I}</p>`)}}else if(B.startsWith("---")){if(!D)F("<hr>");z=null}else if(B.startsWith("<")){if(z)F("</div></div>"),z=null;F(x(B))}else if(B.length>0){if(z)F("</div></div>"),z=null;F(`<p>${s.escapeHtml(x(B))}</p>`)}else if(z)F("</div></div>"),z=null}),O){if(F("</tbody></table></div>"),M)F(`<button type="button" class="add-row-btn" onclick="addTableRow(this, '${M}')" data-i18n="add_row">+ </button>`),M=null;F("</div>")}if(z)F("</div></div>");if(D)F("</div>");let g=`
            <div style="flex:1"></div>
            <button class="btn-clear" onclick="window.clearData()" data-i18n="clear_btn">Clear</button>
            <button class="secondary" onclick="window.saveDraft()" data-i18n="work_save_btn">Save Progress</button>
            <button class="primary" onclick="window.signAndDownload()" data-i18n="sign_btn">Submit</button>
    `,v=`<div class="no-print form-toolbar" style="display: flex; gap: 10px; align-items: center; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #eee;">
            ${g}
        </div>`;if(E.length>0){let C='<div class="tabs-nav">',B=0;if(E.forEach((P,S)=>{if(P.isSystem)return;C+=`<button class="tab-btn${B===0?" active":""}" onclick="switchTab(this, '${P.id}')">${s.escapeHtml(P.title)}</button>`,B++}),C+=`<div class="no-print" style="display: flex; gap: 10px; align-items: center; flex-grow: 1;">
            ${g}
        </div>`,C+="</div>",L.includes("</h1>"))Q=L.replace("</h1>","</h1>"+C);else Q=C+L}else Q=L+v;if(X.length===1)q.aggSpec=X[0];else if(X.length>1)q.aggSpec=X;return{html:Q,jsonStructure:q}}var Q9=typeof window!=="undefined"&&window.__WEBA_BUILD_TIME__?window.__WEBA_BUILD_TIME__:typeof process!=="undefined"&&process.env&&process.env.BUILD_TIME?process.env.BUILD_TIME:"";function JU($){if(!$)return"Build: dev";return`Build: ${$.replace("T"," ").replace(".000Z","Z")}`}function GG($,J){let Q=J.trim().replace(/^\$\./,"");if(!Q)return[];let q=Q.split("."),X=[$];for(let Z of q){let G=Z.match(/^(.*)\[(\d*)\]$/),Y=G?G[1]:Z,U=G?G[2]:null,W=G&&U==="",z=G&&U!==""&&U!==null?parseInt(U,10):null,M=[];for(let O of X){if(O===null||O===void 0)continue;let N=Y?O[Y]:O;if(W){if(Array.isArray(N))M.push(...N);continue}if(z!==null){if(Array.isArray(N)&&N[z]!==void 0)M.push(N[z]);continue}if(N!==void 0)M.push(N)}X=M}return X}function QU($,J,Q){if(!J){$.innerHTML="";return}let q="",X=J.dashboard?.cards||J.metrics?.map((G)=>({id:G.id,label:G.name,op:G.type,path:G.path}))||[];if(X.length>0){let G=X.map((Y)=>{let U=0,W=[];if(Q.forEach((z)=>{if(Y.path)W.push(...GG(z.plain,Y.path))}),Y.op==="count")U=Q.length;else if(Y.op==="sum")U=W.reduce((z,M)=>z+(Number(M)||0),0);else if(Y.op==="avg")U=W.length?W.reduce((z,M)=>z+(Number(M)||0),0)/W.length:0;else if(Y.op==="boolean_count")U=W.filter((z)=>!!z).length;if(typeof U==="number"&&Y.format==="currency")U=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY"}).format(U);else if(typeof U==="number")U=U.toLocaleString();return`
        <div class="metric-card">
          <label>${Y.label}</label>
          <div class="value">${U}</div>
        </div>
      `}).join("");q+=`<div class="dashboard-grid">${G}</div>`}let Z=J.dashboard?.charts||[];if(Z.length>0){let G=Z.map((Y)=>{if(Y.type==="bar"){let U={};Q.forEach((O)=>{GG(O.plain,Y.source).forEach((j)=>{if(Y.filter){if(j[Y.filter.path]!==Y.filter.value)return}let E=j[Y.x];if(E)U[E]=(U[E]||0)+1})});let W=Object.entries(U).sort((O,N)=>N[1]-O[1]),z=Math.max(...Object.values(U),1),M=W.map(([O,N])=>`
          <div class="chart-bar-row">
            <div class="chart-bar-label">${O}</div>
            <div class="chart-bar-track"><div class="chart-bar-fill" style="width: ${N/z*100}%"></div></div>
            <div class="chart-bar-value">${N}</div>
          </div>
        `).join("");return`
          <div class="chart-card">
            <h4>${Y.title}</h4>
            <div class="chart-bars">${M}</div>
          </div>
        `}return""}).join("");q+=`<div class="chart-grid">${G}</div>`}$.innerHTML=q}function qU($,J,Q){if(J.length===0){$.innerHTML=`<div class="agg-empty-state">
      <div class="icon">\uD83D\uDCC2</div>
      <p>No records found. Please upload HTML files and click "Run Aggregation".</p>
    </div>`;return}let q=Q.map((Z)=>`<th>${Z}</th>`).join(""),X=J.map((Z,G)=>{let Y=Q.map((U)=>`<td>${Z[U]??""}</td>`).join("");return`<tr onclick="window.showRecordDetail(${G})">${Y}</tr>`}).join("");$.innerHTML=`
    <div class="agg-section-header">
      <h3>\uD83D\uDCCB Extracted Records</h3>
      <span class="count-badge">${J.length} records</span>
    </div>
    <div class="agg-table-container">
      <table class="agg-table">
        <thead><tr>${q}</tr></thead>
        <tbody>${X}</tbody>
      </table>
    </div>
  `,window._aggRows=J}var q9=null,X9=null;function XU(){let $=document.getElementById("weba-source-markdown");if(!$)return null;return $.textContent||null}function ZU(){if(q9&&X9)return{html:q9,structure:X9};let $=XU();if(!$)return null;let J=ZG($);return q9=J.html,X9=J.jsonStructure,{html:J.html,structure:J.jsonStructure}}function YG($,J){if(!J)return;let Q=J.trim().replace(/^\$\./,"");if(!Q)return;let q=Q.split("."),X=$;for(let Z of q){if(X===null||X===void 0)return;let G=Z.match(/^(.*)\[(\d+)\]$/);if(G){let Y=G[1]??"",U=parseInt(G[2]??"0",10),W=Y?X[Y]:X;X=Array.isArray(W)?W[U]:void 0;continue}X=X[Z]}return X}function UG($,J){if($ instanceof HTMLInputElement&&$.type==="checkbox"){$.checked=!!J;return}let Q=J===null||J===void 0?"":String(J);$.value=Q}function GU($,J){let Q=Array.isArray(J?.fields)?J.fields:[],q=new Set(Q.map((Y)=>Y.key)),X=new Set(Object.keys(J?.tables||{})),Z="",G=!1;for(let Y in $){if(Y.startsWith("@")||Y.startsWith("_")||q.has(Y)||X.has(Y))continue;if(!G)Z+='<div class="detail-group-header">Extra Information</div>',G=!0;Z+=`
      <div class="detail-row">
        <div class="detail-key">${Y}</div>
        <div class="detail-val-box"><pre class="val-json">${JSON.stringify($[Y],null,2)}</pre></div>
      </div>
    `}return Z}function YU($,J){let Q=J||{};$.querySelectorAll("input[data-json-path], textarea[data-json-path], select[data-json-path]").forEach((q)=>{let X=q.dataset.jsonPath||"",Z=YG(Q,X);UG(q,Z)}),$.querySelectorAll("input[type='radio']").forEach((q)=>{let X=q.name;if(!X)return;let Z=YG(Q,X);if(Z!==void 0)q.checked=String(Z)===q.value}),$.querySelectorAll(".data-table.dynamic").forEach((q)=>{let X=q.getAttribute("data-table-key")||"";if(!X)return;let Z=Array.isArray(Q[X])?Q[X]:[],G=q.querySelector("tbody"),Y=G?.querySelector("tr.template-row");if(!G||!Y)return;Y.style.display="none",Z.forEach((U,W)=>{let z=Y.cloneNode(!0);z.classList.remove("template-row"),z.style.display="",z.querySelectorAll("input, textarea, select").forEach((M)=>{let O=M.dataset.baseKey||M.dataset.jsonPath;if(!O)return;UG(M,U?.[O])}),z.querySelectorAll(".auto-num").forEach((M)=>{if(!M.value)M.value=String(W+1)}),z.querySelectorAll(".remove-row-btn").forEach((M)=>{M.style.display="none"}),G.appendChild(z)})}),$.querySelectorAll("input, textarea, select").forEach((q)=>{q.disabled=!0,q.classList.add("readonly")}),$.querySelectorAll(".add-row-btn").forEach((q)=>{q.style.display="none"})}function UU($){let J=window._aggRows;if(!J||!J[$])return;let Q=J[$],q=document.getElementById("weba-agg-detail");if(!q)return;let X=Q._raw||{},Z="",G=ZU(),Y="",U=document.getElementById("weba-structure"),W=[],z=null;if(U)try{let D=JSON.parse(U.textContent);W=D.fields||[],z=D}catch{}let M=(D)=>{if(D===null||D===void 0)return'<span class="val-null">N/A</span>';if(typeof D==="boolean")return`<span class="val-bool ${D}">${D?"Yes":"No"}</span>`;if(Array.isArray(D))return`<div class="val-array">${D.map((L)=>`<div class="array-item">${typeof L==="object"?JSON.stringify(L):L}</div>`).join("")}</div>`;if(typeof D==="object")return`<pre class="val-json">${JSON.stringify(D,null,2)}</pre>`;return`<span class="val-text">${D}</span>`};if(G)Y=`
      <div class="detail-form-preview" id="weba-agg-form-preview">
        ${G.html}
      </div>
      ${GU(X,G.structure||z||{})}
    `;else if(W.length>0){W.forEach((V)=>{if(V.type==="calc")return;let H=X[V.key];if(H!==void 0)Z+=`
          <div class="detail-row">
            <div class="detail-key">${V.label||V.key}</div>
            <div class="detail-val-box">${M(H)}</div>
          </div>
        `});let D=new Set(W.map((V)=>V.key)),L=!1;for(let V in X){if(V.startsWith("@")||V.startsWith("_")||D.has(V))continue;if(!L)Z+='<div class="detail-group-header">Extra Information</div>',L=!0;Z+=`
        <div class="detail-row">
          <div class="detail-key">${V}</div>
          <div class="detail-val-box">${M(X[V])}</div>
        </div>
      `}}else for(let D in X){if(D.startsWith("@")||D.startsWith("_"))continue;Z+=`
        <div class="detail-row">
          <div class="detail-key">${D}</div>
          <div class="detail-val-box">${M(X[D])}</div>
        </div>
      `}q.innerHTML=`
    <div class="detail-overlay" id="weba-detail-overlay">
      <div class="detail-modal">
        <div class="detail-modal-header">
          <div class="header-info">
            <span class="file-icon">\uD83D\uDCC4</span>
            <div class="text">
              <h3>Record Details</h3>
              <p>${Q._filename||"Standalone Record"}</p>
            </div>
          </div>
          <button class="close-btn" id="weba-detail-close"></button>
        </div>
        <div class="detail-modal-body">
          ${Y||`<div class="form-view">${Z}</div>`}
          <details class="raw-data-section">
            <summary>View Raw Source Data (JSON)</summary>
            <pre>${JSON.stringify(X,null,2)}</pre>
            ${Q._sig?`<h4>Signature</h4><pre>${JSON.stringify(Q._sig,null,2)}</pre>`:""}
          </details>
        </div>
      </div>
    </div>
  `,document.body.style.overflow="hidden";let O=document.getElementById("weba-detail-overlay"),N=document.getElementById("weba-detail-close"),j=()=>{if(q)q.innerHTML="";document.body.style.overflow=""};O?.addEventListener("click",(D)=>{if(D.stopPropagation(),D.target===O)j()}),N?.addEventListener("click",(D)=>{D.stopPropagation(),j()});let E=document.getElementById("weba-agg-form-preview");if(E)YU(E,X)}window.showRecordDetail=UU;function zU(){let $=document.getElementById("weba-l2-keys");if(!$)return null;try{return JSON.parse($.textContent)}catch{return null}}function WU(){let $=document.getElementById("weba-agg-spec");if(!$)return null;try{return JSON.parse($.textContent)}catch{return null}}async function MU($,J){let Q=uQ($);if(Q){if(!J)return{source:"l2",plain:null};try{let X=null;if(J.recipient_x25519_private)X=K0(J.recipient_x25519_private);if(!X&&J.org_root_key);if(X){let Z=await EJ(Q,X);return{source:"l2",plain:Z.layer2_plain,sig:Z.layer2_sig}}}catch(X){console.warn("L2 decryption failed",X)}}let q=aX($);if(q)return{source:"jsonld",plain:q.credentialSubject?.answers||q};return{source:"unknown",plain:null}}function zG(){let $=document.getElementById("aggregator-root");if(!$)return;$.innerHTML=`
    <div class="agg-layout">
      <aside class="agg-sidebar">
        <div class="agg-brand">
          <div class="agg-brand-main">
            <div class="brand-logo">Agg</div>
            <h1>Web/A Aggregator</h1>
          </div>
          <div class="agg-build-stamp" id="weba-agg-build"></div>
        </div>

        <div class="agg-config-card">
          <div class="card-header">1. Data Source</div>
          <div class="agg-form-field">
            <label>Upload Submitted Forms</label>
            <div class="btn-grid">
              <button id="weba-agg-file-trigger" class="agg-btn-secondary">\uD83D\uDCC4 Select Files</button>
              <button id="weba-agg-dir-trigger" class="agg-btn-secondary">\uD83D\uDCC1 Select Folder</button>
            </div>
            <input id="weba-agg-files" type="file" accept=".html" multiple style="display:none;" />
            <input id="weba-agg-dirs" type="file" webkitdirectory directory style="display:none;" />
            <p class="field-hint">Select files or an entire folder of HTML forms.</p>
          </div>

          <div class="agg-form-field">
            <label>Decryption Method</label>
            <div id="weba-agg-key-status" class="agg-status-chip">No keys detected</div>
            <div class="btn-group">
              <button id="weba-agg-passkey" class="agg-btn-small outline">\uD83D\uDD11 Use Passkey</button>
            </div>
            <p class="field-hint">Encryption is used for Layer 2 security.</p>
          </div>

          <div class="agg-form-field-row">
            <input id="weba-agg-include-json" type="checkbox" />
            <label for="weba-agg-include-json">Include JSON column in table</label>
          </div>
        </div>

        <div class="agg-actions-card">
          <button id="weba-agg-run" class="agg-btn-primary"> Run Aggregation</button>
          <div class="btn-grid">
            <button id="weba-agg-download" class="agg-btn-secondary" disabled>\uD83D\uDCE5 CSV</button>
            <button id="weba-agg-download-jsonl" class="agg-btn-secondary" disabled>\uD83D\uDCE5 JSONL</button>
          </div>
          <button id="weba-agg-clear" class="agg-btn-text">\uD83D\uDDD1 Clear Data</button>
          <div id="weba-agg-status" class="agg-status-message">Ready.</div>
        </div>
      </aside>

      <main class="agg-main">
        <div id="weba-agg-results" class="agg-results is-hidden">
          <div id="weba-agg-dashboard" class="agg-dashboard"></div>
          <div id="weba-agg-output" class="agg-output"></div>
        </div>
      </main>
    </div>

    <div id="weba-agg-detail"></div>

    <style>
      :root {
        --agg-primary: #2563eb;
        --agg-bg: #f8fafc;
        --agg-card-bg: #ffffff;
        --agg-text: #1e293b;
        --agg-text-dim: #64748b;
        --agg-border: #e2e8f0;
      }

      .agg-layout { display: flex; min-height: 80vh; gap: 24px; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; color: var(--agg-text); }
      .agg-sidebar { width: 320px; flex-shrink: 0; display: flex; flex-direction: column; gap: 20px; }
      .agg-main { flex: 1; display: flex; flex-direction: column; gap: 24px; }

      .agg-brand { padding: 12px 0; display: flex; align-items: center; justify-content: space-between; gap: 12px; }
      .agg-brand-main { display: flex; align-items: center; gap: 12px; }
      .brand-logo { background: var(--agg-primary); color: white; width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.8rem; }
      .agg-brand h1 { font-size: 1.25rem; font-weight: 700; margin: 0; }
      .agg-build-stamp { font-size: 0.65rem; color: var(--agg-text-dim); padding: 2px 8px; border-radius: 999px; border: 1px solid var(--agg-border); background: #f1f5f9; white-space: nowrap; }

      .agg-config-card, .agg-actions-card { background: var(--agg-card-bg); border: 1px solid var(--agg-border); border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
      .card-header { font-size: 0.85rem; font-weight: 600; text-transform: uppercase; color: var(--agg-text-dim); margin-bottom: 16px; border-bottom: 1px solid var(--agg-border); padding-bottom: 8px; }

      .agg-form-field { margin-bottom: 16px; }
      .agg-form-field label { display: block; font-size: 0.9rem; font-weight: 600; margin-bottom: 6px; }
      .agg-form-field input[type="file"] { width: 100%; font-size: 0.85rem; }
      .field-hint { font-size: 0.75rem; color: var(--agg-text-dim); margin: 4px 0 0; }

      .agg-form-field-row { display: flex; align-items: center; gap: 8px; margin-top: 12px; }
      .agg-form-field-row label { font-size: 0.85rem; cursor: pointer; }

      .agg-status-chip { background: #f1f5f9; padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; color: var(--agg-text-dim); display: inline-block; margin-bottom: 8px; }
      .agg-status-chip.ready { background: #dcfce7; color: #166534; }

      .btn-group { display: flex; gap: 8px; }
      .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
      
      .agg-btn-primary { background: var(--agg-primary); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: 600; cursor: pointer; width: 100%; margin-bottom: 12px; transition: opacity 0.2s; }
      .agg-btn-primary:active { opacity: 0.8; }
      
      .agg-btn-secondary { background: white; border: 1px solid var(--agg-border); color: var(--agg-text); padding: 8px; border-radius: 8px; font-size: 0.85rem; cursor: pointer; }
      .agg-btn-secondary:disabled { opacity: 0.5; cursor: not-allowed; }
      
      .agg-btn-small { padding: 4px 12px; border-radius: 6px; font-size: 0.8rem; cursor: pointer; }
      .agg-btn-small.outline { background: white; border: 1px solid var(--agg-primary); color: var(--agg-primary); }

      .agg-btn-text { background: none; border: none; color: #ef4444; font-size: 0.85rem; padding: 8px; cursor: pointer; width: 100%; margin-top: 12px; }

      .agg-status-message { font-size: 0.85rem; color: var(--agg-text-dim); text-align: center; margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--agg-border); }

      .agg-results.is-hidden { display: none; }

      /* Dashboard */
      .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 16px; }
      .metric-card { background: white; border: 1px solid var(--agg-border); border-radius: 12px; padding: 16px; display: flex; flex-direction: column; gap: 4px; border-left: 4px solid var(--agg-primary); }
      .metric-card label { font-size: 0.75rem; color: var(--agg-text-dim); font-weight: 600; text-transform: uppercase; }
      .metric-card .value { font-size: 1.5rem; font-weight: 700; color: var(--agg-text); }

      /* Charts */
      .chart-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(360px, 1fr)); gap: 20px; margin-top: 24px; }
      .chart-card { background: white; border: 1px solid var(--agg-border); border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
      .chart-card h4 { margin: 0 0 16px 0; font-size: 0.95rem; font-weight: 700; color: var(--agg-text); border-bottom: 2px solid #f1f5f9; padding-bottom: 10px; }
      .chart-bars { display: flex; flex-direction: column; gap: 12px; }
      .chart-bar-row { display: flex; align-items: center; gap: 12px; font-size: 0.85rem; }
      .chart-bar-label { width: 120px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; font-weight: 500; }
      .chart-bar-track { flex: 1; height: 12px; background: #f1f5f9; border-radius: 6px; overflow: hidden; }
      .chart-bar-fill { height: 100%; background: var(--agg-primary); border-radius: 6px; }
      .chart-bar-value { width: 30px; text-align: right; font-weight: 700; color: var(--agg-text-dim); }

      /* Results Styling */
      .agg-section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
      .count-badge { background: var(--agg-primary); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; }

      .agg-table-container { background: white; border: 1px solid var(--agg-border); border-radius: 12px; overflow: auto; box-shadow: 0 1px 3px rgba(0,0,0,0.05); max-height: 500px; }
      .agg-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; text-align: left; }
      .agg-table th { background: #f8fafc; padding: 12px; border-bottom: 1px solid var(--agg-border); font-weight: 600; color: var(--agg-text-dim); position: sticky; top: 0; }
      .agg-table td { padding: 12px; border-bottom: 1px solid var(--agg-border); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
      .agg-table tr:hover { background: #f1f5f9; cursor: pointer; }

      .agg-empty-state { text-align: center; padding: 48px; color: var(--agg-text-dim); background: white; border: 2px dashed var(--agg-border); border-radius: 12px; }
      .agg-empty-state .icon { font-size: 2rem; margin-bottom: 12px; }

      /* Detail Modal Overhaul */
      .detail-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.75); backdrop-filter: blur(4px); display: flex; align-items: flex-end; justify-content: center; z-index: 10000; }
      @media (min-width: 768px) { .detail-overlay { align-items: center; } }

      .detail-modal { background: white; width: 100%; max-width: 720px; border-radius: 20px 20px 0 0; display: flex; flex-direction: column; max-height: 94vh; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); animation: slideUp 0.3s ease-out; }
      @media (min-width: 768px) { .detail-modal { border-radius: 16px; max-height: 85vh; } }

      @keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

      .detail-modal-header { padding: 16px 24px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
      .header-info { display: flex; gap: 12px; align-items: center; }
      .file-icon { font-size: 1.5rem; }
      .header-info h3 { margin: 0; font-size: 1.1rem; }
      .header-info p { margin: 0; font-size: 0.8rem; color: var(--agg-text-dim); }
      .close-btn { border: none; background: #f1f5f9; width: 32px; height: 32px; border-radius: 50%; font-size: 1rem; cursor: pointer; color: #64748b; }

      .detail-modal-body { padding: 24px; overflow-y: auto; flex: 1; }
      
      .form-view { display: flex; flex-direction: column; gap: 16px; }
      .detail-group-header { font-size: 0.8rem; font-weight: 700; color: var(--agg-primary); text-transform: uppercase; background: #eff6ff; padding: 4px 12px; border-radius: 4px; margin-top: 12px; }
      
      .detail-row { display: grid; grid-template-columns: 140px 1fr; gap: 16px; border-bottom: 1px solid #f1f5f9; padding-bottom: 12px; align-items: flex-start; }
      .detail-key { font-size: 0.85rem; font-weight: 600; color: #64748b; padding-top: 2px; }
      
      .val-null { color: #cbd5e1; font-family: monospace; }
      .val-bool.true { color: #16a34a; font-weight: bold; }
      .val-bool.false { color: #dc2626; font-weight: bold; }
      .val-text { line-height: 1.5; color: #0f172a; }
      .val-json { font-size: 0.8rem; background: #f8fafc; padding: 8px; border-radius: 6px; border: 1px solid #e2e8f0; margin: 0; }
      
      .raw-data-section { margin-top: 32px; border-top: 1px solid #e2e8f0; padding-top: 20px; }
      .raw-data-section summary { font-size: 0.85rem; font-weight: 600; cursor: pointer; color: var(--agg-text-dim); }
      .raw-data-section pre { margin-top: 12px; font-size: 0.75rem; background: #1e293b; color: #e2e8f0; padding: 12px; border-radius: 8px; overflow-x: auto; }

      .detail-form-preview { background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 16px; }
      .detail-form-preview .form-row { margin-bottom: 16px; }
      .detail-form-preview .form-label { font-weight: 600; margin-bottom: 6px; display: block; }
      .detail-form-preview .form-input { width: 100%; padding: 8px 10px; border: 1px solid #cbd5f5; border-radius: 6px; background: #f8fafc; }
      .detail-form-preview .form-input.readonly { color: #0f172a; }
      .detail-form-preview .table-wrapper { overflow-x: auto; }
      .detail-form-preview table { border-collapse: collapse; width: 100%; font-size: 0.9rem; }
      .detail-form-preview th, .detail-form-preview td { border: 1px solid #e2e8f0; padding: 8px; text-align: left; }
      .detail-form-preview .remove-row-btn { display: none; }
      .detail-form-preview .tabs-nav { display: none; }
      .detail-form-preview .tab-content { display: block; }
      .detail-form-preview .form-toolbar { display: none; }
      .detail-form-preview .no-print { display: none; }
    </style>
  `;let J=$.querySelector("#weba-agg-files"),Q=$.querySelector("#weba-agg-dirs"),q=$.querySelector("#weba-agg-file-trigger"),X=$.querySelector("#weba-agg-dir-trigger"),Z=$.querySelector("#weba-agg-status"),G=$.querySelector("#weba-agg-output"),Y=$.querySelector("#weba-agg-dashboard"),U=$.querySelector("#weba-agg-results"),W=$.querySelector("#weba-agg-include-json"),z=$.querySelector("#weba-agg-run"),M=$.querySelector("#weba-agg-download"),O=$.querySelector("#weba-agg-download-jsonl"),N=$.querySelector("#weba-agg-key-status"),j=$.querySelector("#weba-agg-passkey"),E=$.querySelector("#weba-agg-clear"),D=$.querySelector("#weba-agg-build"),L="",V="",H=[],F=null,x=zU(),g=WU();if(N)N.textContent=x?.recipient_kid?`Loaded (${x.recipient_kid})`:x?"Loaded":"No keys detected",N.classList.toggle("ready",!!x);if(g?.export?.jsonl===!1&&O)O.disabled=!0;if(D)D.textContent=JU(Q9),D.title=Q9?`Built at ${Q9}`:"Build time not available";let v=(B)=>{if(!U)return;U.classList.toggle("is-hidden",!B)};j?.addEventListener("click",async()=>{try{if(!h0.getPublicKey()){if(!await h0.register())return}alert("Please authenticate with your Passkey to decrypt.");let B=new Uint8Array(32),P=await h0.derivePrf(B);if(!P)throw new Error("PRF not supported or enabled on this key, or authentication failed.");if(F={recipient_x25519_private:w0(yX(P).privateKey)},j.textContent=" Passkey Active",j.disabled=!0,N)N.textContent="Passkey Enabled",N.classList.add("ready");if(J?.files&&J.files.length>0||Q?.files&&Q.files.length>0)C()}catch(B){console.error(B),alert("Passkey error: "+B.message)}}),q?.addEventListener("click",()=>J?.click()),X?.addEventListener("click",()=>Q?.click()),J?.addEventListener("change",()=>C()),Q?.addEventListener("change",()=>C());let C=async()=>{let B=J?.files?Array.from(J.files):[],P=Q?.files?Array.from(Q.files):[],S=[...B,...P].filter((m)=>m.name.toLowerCase().endsWith(".html")&&!m.name.startsWith("."));if(!(S.length>0)){if(Z)Z.textContent="Select HTML files first.";v(!1);return}if(Z)Z.textContent="Processing...";if(M)M.disabled=!0;if(O)O.disabled=!0;v(!0);let K=$.querySelector(".agg-brand h1");H=[];let A=[],I=new Set(["_filename"]),w=0,f=0,_=new mQ(new yQ),b=F||x;if(K)K.innerHTML='Web/A Aggregator <span style="font-size:0.75rem; background:#10b981; color:white; padding:2px 8px; border-radius:4px; margin-left:8px; vertical-align:middle;">REAL DATA</span>';console.log(`Running aggregation on ${S.length} files...`);for(let m of S)try{let D0=await m.text(),$8=uQ(D0);if($8?.meta?.nonce){if(!await _.checkAndMark($8.meta.nonce)){console.warn(`Replay detected in ${m.name} (nonce: ${$8.meta.nonce}). Skipping.`);continue}}let Y0=await MU(D0,b);if(Y0.source!=="unknown"&&Y0.plain){H.push({filename:m.name,plain:Y0.plain,sig:Y0.sig});let b0=eX({plain:Y0.plain,filename:m.name,includeJson:!!W?.checked,sig:Y0.sig,omitKey:(c0)=>c0.startsWith("@")});b0.keys.forEach((c0)=>I.add(c0)),A.push({...b0.row,_raw:Y0.plain,_sig:Y0.sig}),w+=1}else console.warn(`Could not extract from ${m.name}`),f+=1}catch(D0){console.error(`Error processing ${m.name}`,D0),f+=1}let u=Array.from(I).sort((m,D0)=>{if(m==="_filename")return-1;if(D0==="_filename")return 1;return m.localeCompare(D0)});if(L=$Z(A,u),M)M.disabled=A.length===0;let p=g?.export?.jsonl!==!1;if(V=H.map((m)=>JSON.stringify({_filename:m.filename,_l2_sig:m.sig??null,...m.plain})).join(`
`),O)O.disabled=H.length===0||!p;if(Z)Z.textContent=`Completed. Processed ${w} entries. Errors: ${f}.`;if(Y)QU(Y,g,H);if(G)qU(G,A,u)};E?.addEventListener("click",()=>{if(H=[],L="",V="",J)J.value="";if(Q)Q.value="";if(Z)Z.textContent="Data cleared.";if(M)M.disabled=!0;if(O)O.disabled=!0;if(Y)Y.innerHTML="";if(G)G.innerHTML="";v(!1),window._aggRows=[]}),z?.addEventListener("click",()=>{C().catch((B)=>{if(Z)Z.textContent="Failed to aggregate.";console.error(B)})}),M?.addEventListener("click",()=>{if(!L)return;let B=new Blob([L],{type:"text/csv;charset=utf-8"}),P=URL.createObjectURL(B),S=document.createElement("a");S.href=P,S.download="weba-aggregated.csv",S.click(),URL.revokeObjectURL(P)}),O?.addEventListener("click",()=>{if(!V)return;let B=new Blob([V],{type:"application/x-jsonlines;charset=utf-8"}),P=URL.createObjectURL(B),S=document.createElement("a");S.href=P,S.download="weba-aggregated.jsonl",S.click(),URL.revokeObjectURL(P)})}var WG="weba_l2_nonces";function KU(){let $=document.getElementById("weba-draft-state");if(!$?.textContent)return null;try{return JSON.parse($.textContent)}catch(J){return console.warn("Failed to parse draft state",J),null}}function OU($){if(!$||!$.formData)return;let J="WebA_"+window.location.pathname;try{localStorage.setItem(J,JSON.stringify($.formData))}catch(Q){console.warn("Failed to restore draft form data",Q)}if($.l2State?.replayNonces?.length)try{let Q=localStorage.getItem(WG),q=Q?JSON.parse(Q):[],X=new Set;if(Array.isArray(q))q.forEach((Z)=>{if(typeof Z==="string")X.add(Z)});$.l2State.replayNonces.forEach((Z)=>{if(typeof Z==="string")X.add(Z)}),localStorage.setItem(WG,JSON.stringify(Array.from(X)))}catch(Q){console.warn("Failed to restore draft L2 replay store",Q)}}function MG(){console.log("Web/A Runtime Booting...");let $=new mJ,J=new P$,Q=new hQ($,J),q=window,X=document.getElementById("weba-structure");if(X?.textContent)try{q.generatedJsonStructure=JSON.parse(X.textContent)}catch(Y){console.warn("Failed to parse weba structure JSON",Y)}let Z=dX();if(Z)q.webaL2Config=Z;q.saveDraft=()=>J.saveDraft(),q.submitDocument=()=>J.submitDocument(),q.signAndDownload=()=>J.signAndDownload(),q.clearData=()=>J.clearData(),q.removeTableRow=(Y)=>Q.removeTableRow(Y),q.addTableRow=(Y,U)=>Q.addTableRow(Y,U),q.switchTab=(Y,U)=>Q.switchTab(Y,U),q.recalculate=()=>$.recalculate(),q.escapeHtml=(Y)=>{if(!Y)return"";let U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return Y.toString().replace(/[&<>"']/g,(W)=>U[W]||W)},OU(KU()),J.restoreFromLS(),Q.applyI18n(),Q.initTables(),$.recalculate(),oX(),nX(),zG();let G;document.addEventListener("input",(Y)=>{let U=Y.target;if(Y.isTrusted)U.dataset.dirty="true";let W=U.dataset.baseKey||U.dataset.jsonPath;if(W)(U.closest("tr")||document).querySelectorAll(`[data-copy-from="${W}"]`).forEach((O)=>{if(!O.dataset.dirty){if(O.value!==U.value)O.value=U.value,O.dispatchEvent(new Event("input"))}});$.recalculate(),J.updateJsonLd(),clearTimeout(G),G=setTimeout(()=>J.saveToLS(),1000)}),console.log("Web/A Runtime Ready.")}class Z9{suggestionsVisible=!1;activeSearchInput=null;globalBox=null;constructor(){}init(){console.log("Initializing Search Engine (Bundle)...");let $=window;if($.generatedJsonStructure&&$.generatedJsonStructure.masterData){let J=Object.keys($.generatedJsonStructure.masterData);console.log("Master Data Keys available:",J.join(", "))}this.setupEventDelegation()}normalize($){if(!$)return"";let J=$.toString().toLowerCase();return J=J.replace(/[---]/g,(Q)=>{return String.fromCharCode(Q.charCodeAt(0)-65248)}),J=J.replace(/[-]/g,(Q)=>String.fromCharCode(Q.charCodeAt(0)-65248)),J.trim()}clean($){if(!$)return"";let J=this.normalize($);return J=J.replace(/(|||||npo||)/g,""),J=J.replace(/(\(\)|\(\)|\(\))/g,""),J.trim()}toIndex($){let J=parseInt($||"",10);return Number.isFinite(J)?J-1:-1}getGlobalBox(){if(!this.globalBox){if(this.globalBox=document.getElementById("web-a-search-suggestions"),!this.globalBox)this.globalBox=document.createElement("div"),this.globalBox.id="web-a-search-suggestions",this.globalBox.className="search-suggestions",Object.assign(this.globalBox.style,{display:"none",position:"absolute",background:"white",border:"1px solid #ccc",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",zIndex:"9999",maxHeight:"200px",overflowY:"auto",borderRadius:"4px"}),document.body.appendChild(this.globalBox)}return this.globalBox}hideSuggestions(){let $=this.getGlobalBox();if($)$.style.display="none";this.suggestionsVisible=!1,this.activeSearchInput=null}setupEventDelegation(){document.addEventListener("click",($)=>{if(this.suggestionsVisible&&!$.target.closest("#web-a-search-suggestions")&&$.target!==this.activeSearchInput)this.hideSuggestions()}),document.addEventListener("scroll",()=>{if(this.suggestionsVisible)this.hideSuggestions()},!0),document.body.addEventListener("input",($)=>{if($.target.classList.contains("search-input"))this.handleSearchInput($.target)}),document.body.addEventListener("click",($)=>{if($.target.classList.contains("suggestion-item"))this.handleSelection($.target)})}handleSearchInput($){this.activeSearchInput=$;let J=window,Q=$.dataset.masterSrc,q=$.dataset.suggestSource;if(!Q&&!q)return;let X=this.toIndex($.dataset.masterLabelIndex),Z=this.toIndex($.dataset.masterValueIndex),G=$.value;if(!G){this.hideSuggestions();return}let Y=[],U=this.normalize(G);if(q==="column"){let W=$.dataset.baseKey,z=$.closest("table");if(z&&W){let M=new Set;z.querySelectorAll(`[data-base-key="${W}"]`).forEach((O)=>{if(O===$)return;let N=O.value;if(N&&this.normalize(N).includes(U)){if(!M.has(N))M.add(N),Y.push({val:N,row:[N],label:N,score:10})}})}}else if(Q){let W=J.generatedJsonStructure.masterData;if(!W||!W[Q])return;W[Q].forEach((M,O)=>{if(O===0)return;if(M.some((j)=>this.normalize(j||"").includes(U))){let j=X>=0?M[X]||"":"",E=Z>=0?M[Z]||"":"",D=Z>=0?E:X>=0?j:M[1]||M[0]||"";Y.push({val:D,row:M,label:j,score:10,idx:O})}})}this.renderSuggestions($,Y,X)}renderSuggestions($,J,Q){if(J.length===0){this.hideSuggestions();return}let q=window,X=J.slice(0,10),Z="";X.forEach((z)=>{let M=q.escapeHtml(JSON.stringify(z.row)),O=Q>=0?z.label||z.row.join(" : "):z.row.join(" : ");Z+=`<div class="suggestion-item" data-val="${q.escapeHtml(z.val)}" data-row="${M}" style="padding:8px; cursor:pointer; border-bottom:1px solid #eee; font-size:14px; color:#333;">${q.escapeHtml(O)}</div>`});let G=this.getGlobalBox();G.innerHTML=Z;let Y=$.getBoundingClientRect(),U=window.scrollY||document.documentElement.scrollTop,W=window.scrollX||document.documentElement.scrollLeft;G.style.width=Math.max(Y.width,200)+"px",G.style.left=Y.left+W+"px",G.style.top=Y.bottom+U+"px",G.querySelectorAll(".suggestion-item").forEach((z)=>{z.onmouseenter=()=>z.style.background="#f0f8ff",z.onmouseleave=()=>z.style.background="white"}),G.style.display="block",this.suggestionsVisible=!0}handleSelection($){if(!this.activeSearchInput)return;let J=window,Q=this.activeSearchInput,q=$.dataset.val||"",X=$.dataset.row||"[]";try{let Z=JSON.parse(X),G=Q.dataset.masterSrc,Y=G?J.generatedJsonStructure.masterData[G][0]:[],U=!1;if(Y.length>0&&Z.length>0){let W=Q.closest("tr");if(W){let z=Array.from(W.querySelectorAll("input, select, textarea"));Y.forEach((M,O)=>{if(!M)return;let N=Z[O];this.fillField(z,M,N,Q,()=>{U=!0})})}}if(!U)Q.value=q,Q.dispatchEvent(new Event("input",{bubbles:!0}))}catch(Z){console.error(Z)}this.hideSuggestions()}fillField($,J,Q,q,X){let Z=this.normalize(J),G=$.find((Y)=>{let U=Y.dataset.baseKey||Y.dataset.jsonPath,W=this.normalize(Y.getAttribute("placeholder")||"");return U&&this.normalize(U)===Z||W===Z});if(G){if(G.value=Q||"",G.dispatchEvent(new Event("input",{bubbles:!0})),G===q)X()}}}var DU=BigInt(0),_$=BigInt(1),VU=BigInt(2),NU=BigInt(7),jU=BigInt(256),RU=BigInt(113),DG=[],VG=[],NG=[];for(let $=0,J=_$,Q=1,q=0;$<24;$++){[Q,q]=[q,(2*Q+3*q)%5],DG.push(2*(5*q+Q)),VG.push(($+1)*($+2)/2%64);let X=DU;for(let Z=0;Z<7;Z++)if(J=(J<<_$^(J>>NU)*RU)%jU,J&VU)X^=_$<<(_$<<BigInt(Z))-_$;NG.push(X)}var jG=l$(NG,!0),HU=jG[0],CU=jG[1],KG=($,J,Q)=>Q>32?P9($,J,Q):E9($,J,Q),OG=($,J,Q)=>Q>32?f9($,J,Q):F9($,J,Q);function BU($,J=24){let Q=new Uint32Array(10);for(let q=24-J;q<24;q++){for(let G=0;G<10;G++)Q[G]=$[G]^$[G+10]^$[G+20]^$[G+30]^$[G+40];for(let G=0;G<10;G+=2){let Y=(G+8)%10,U=(G+2)%10,W=Q[U],z=Q[U+1],M=KG(W,z,1)^Q[Y],O=OG(W,z,1)^Q[Y+1];for(let N=0;N<50;N+=10)$[G+N]^=M,$[G+N+1]^=O}let X=$[2],Z=$[3];for(let G=0;G<24;G++){let Y=VG[G],U=KG(X,Z,Y),W=OG(X,Z,Y),z=DG[G];X=$[z],Z=$[z+1],$[z]=U,$[z+1]=W}for(let G=0;G<50;G+=10){for(let Y=0;Y<10;Y++)Q[Y]=$[G+Y];for(let Y=0;Y<10;Y++)$[G+Y]^=~Q[(Y+2)%10]&Q[(Y+4)%10]}$[0]^=HU[q],$[1]^=CU[q]}l0(Q)}class vJ{state;pos=0;posOut=0;finished=!1;state32;destroyed=!1;blockLen;suffix;outputLen;enableXOF=!1;rounds;constructor($,J,Q,q=!1,X=24){if(this.blockLen=$,this.suffix=J,this.outputLen=Q,this.enableXOF=q,this.rounds=X,Q8(Q,"outputLen"),!(0<$&&$<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=u$(this.state)}clone(){return this._cloneInto()}keccak(){hJ(this.state32),BU(this.state32,this.rounds),hJ(this.state32),this.posOut=0,this.pos=0}update($){m8(this),c($);let{blockLen:J,state:Q}=this,q=$.length;for(let X=0;X<q;){let Z=Math.min(J-this.pos,q-X);for(let G=0;G<Z;G++)Q[this.pos++]^=$[X++];if(this.pos===J)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:J,pos:Q,blockLen:q}=this;if($[Q]^=J,(J&128)!==0&&Q===q-1)this.keccak();$[q-1]^=128,this.keccak()}writeInto($){m8(this,!1),c($),this.finish();let J=this.state,{blockLen:Q}=this;for(let q=0,X=$.length;q<X;){if(this.posOut>=Q)this.keccak();let Z=Math.min(Q-this.posOut,X-q);$.set(J.subarray(this.posOut,this.posOut+Z),q),this.posOut+=Z,q+=Z}return $}xofInto($){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return Q8($),this.xofInto(new Uint8Array($))}digestInto($){if(h$($,this),this.finished)throw new Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,l0(this.state)}_cloneInto($){let{blockLen:J,suffix:Q,outputLen:q,rounds:X,enableXOF:Z}=this;return $||=new vJ(J,Q,q,Z,X),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=X,$.suffix=Q,$.outputLen=q,$.enableXOF=Z,$.destroyed=this.destroyed,$}}var RG=($,J,Q,q={})=>Y$(()=>new vJ(J,$,Q),q);var HG=RG(6,136,32,w8(8));var CG=RG(6,72,64,w8(10));var BG=($,J,Q,q={})=>Y$((X={})=>new vJ(J,$,X.dkLen===void 0?Q:X.dkLen,!0),q),IG=BG(31,168,16,w8(11)),_J=BG(31,136,32,w8(12));function G9($){if(!Number.isSafeInteger($)||$<0||$>4294967295)throw new Error("wrong u32 integer:"+$);return $}function TG($){return G9($),($&$-1)===0&&$!==0}function Y9($,J){G9($);let Q=0;for(let q=0;q<J;q++,$>>>=1)Q=Q<<1|$&1;return Q}function AG($){return G9($),31-Math.clz32($)}function LG($){let J=$.length;if(J<2||!TG(J))throw new Error("n must be a power of 2 and greater than 1. Got "+J);let Q=AG(J);for(let q=0;q<J;q++){let X=Y9(q,Q);if(q<X){let Z=$[q];$[q]=$[X],$[X]=Z}}return $}var U9=($,J)=>{let{N:Q,roots:q,dit:X,invertButterflies:Z=!1,skipStages:G=0,brp:Y=!0}=J,U=AG(Q);if(!TG(Q))throw new Error("FFT: Polynomial size should be power of two");let W=X!==Z;return(z)=>{if(z.length!==Q)throw new Error("FFT: wrong Polynomial length");if(X&&Y)LG(z);for(let M=0,O=1;M<U-G;M++){let N=X?M+1+G:U-M,j=1<<N,E=j>>1,D=Q>>N;for(let L=0;L<Q;L+=j)for(let V=0,H=O++;V<E;V++){let F=Z?X?Q-H:H:V*D,x=L+V,g=L+V+E,v=q[F],C=z[g],B=z[x];if(W){let P=$.mul(C,v);z[x]=$.add(B,P),z[g]=$.sub(B,P)}else if(Z)z[x]=$.add(C,B),z[g]=$.mul($.sub(C,B),v);else z[x]=$.add(B,C),z[g]=$.mul($.sub(B,C),v)}}if(!X&&Y)LG(z);return z}};/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */var z9=U$;function gJ($,J){if($.length!==J.length)return!1;let Q=0;for(let q=0;q<$.length;q++)Q|=$[q]^J[q];return Q===0}function wG($){return Uint8Array.from($)}function g$($,...J){let Q=(X)=>typeof X==="number"?X:X.bytesLen,q=J.reduce((X,Z)=>X+Q(Z),0);return{bytesLen:q,encode:(X)=>{let Z=new Uint8Array(q);for(let G=0,Y=0;G<J.length;G++){let U=J[G],W=Q(U),z=typeof U==="number"?X[G]:U.encode(X[G]);if(c(z,W,$),Z.set(z,Y),typeof U!=="number")z.fill(0);Y+=W}return Z},decode:(X)=>{c(X,q,$);let Z=[];for(let G of J){let Y=Q(G),U=X.subarray(0,Y);Z.push(typeof G==="number"?U:G.decode(U)),X=X.subarray(Y)}return Z}}}function bJ($,J){let Q=J*$.bytesLen;return{bytesLen:Q,encode:(q)=>{if(q.length!==J)throw new Error(`vecCoder.encode: wrong length=${q.length}. Expected: ${J}`);let X=new Uint8Array(Q);for(let Z=0,G=0;Z<q.length;Z++){let Y=$.encode(q[Z]);X.set(Y,G),Y.fill(0),G+=Y.length}return X},decode:(q)=>{c(q,Q);let X=[];for(let Z=0;Z<q.length;Z+=$.bytesLen)X.push($.decode(q.subarray(Z,Z+$.bytesLen)));return X}}}function g0(...$){for(let J of $)if(Array.isArray(J))for(let Q of J)Q.fill(0);else J.fill(0)}function W9($){return(1<<$)-1}var AW=Uint8Array.of();/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */var EG=($)=>{let{newPoly:J,N:Q,Q:q,F:X,ROOT_OF_UNITY:Z,brvBits:G,isKyber:Y}=$,U=(V,H=q)=>{let F=V%H|0;return(F>=0?F|0:H+F|0)|0},W=(V,H=q)=>{let F=U(V,H)|0;return(F>H>>1?F-H|0:F)|0};function z(){let V=J(Q);for(let H=0;H<Q;H++){let F=Y9(H,G),x=BigInt(Z)**BigInt(F)%BigInt(q);V[H]=Number(x)|0}return V}let M=z(),O={add:(V,H)=>U((V|0)+(H|0))|0,sub:(V,H)=>U((V|0)-(H|0))|0,mul:(V,H)=>U((V|0)*(H|0))|0,inv:(V)=>{throw new Error("not implemented")}},N={N:Q,roots:M,invertButterflies:!0,skipStages:Y?1:0,brp:!1},j=U9(O,{dit:!1,...N}),E=U9(O,{dit:!0,...N});return{mod:U,smod:W,nttZetas:M,NTT:{encode:(V)=>{return j(V)},decode:(V)=>{E(V);for(let H=0;H<V.length;H++)V[H]=U(X*V[H]);return V}},bitsCoder:(V,H)=>{let F=W9(V),x=V*(Q/8);return{bytesLen:x,encode:(g)=>{let v=new Uint8Array(x);for(let C=0,B=0,P=0,S=0;C<g.length;C++){B|=(H.encode(g[C])&F)<<P,P+=V;for(;P>=8;P-=8,B>>=8)v[S++]=B&W9(P)}return v},decode:(g)=>{let v=J(Q);for(let C=0,B=0,P=0,S=0;C<g.length;C++){B|=g[C]<<P,P+=8;for(;P>=V;P-=V,B>>=V)v[S++]=H.decode(B&F)}return v}}}}},IU=($)=>(J,Q)=>{if(!Q)Q=$.blockLen;let q=new Uint8Array(J.length+2);q.set(J);let X=J.length,Z=new Uint8Array(Q),G=$.create({}),Y=0,U=0;return{stats:()=>({calls:Y,xofs:U}),get:(W,z)=>{return q[X+0]=W,q[X+1]=z,G.destroy(),G=$.create({}).update(q),Y++,()=>{return U++,G.xofInto(Z)}},clean:()=>{G.destroy(),g0(Z,q)}}},FG=IU(IG);/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */var I0=256,M8=3329,LU=3303,TU=17,{mod:m$,nttZetas:AU,NTT:b8,bitsCoder:wU}=EG({N:I0,Q:M8,F:LU,ROOT_OF_UNITY:TU,newPoly:($)=>new Uint16Array($),brvBits:7,isKyber:!0}),M9={512:{N:I0,Q:M8,K:2,ETA1:3,ETA2:2,du:10,dv:4,RBGstrength:128},768:{N:I0,Q:M8,K:3,ETA1:2,ETA2:2,du:10,dv:4,RBGstrength:192},1024:{N:I0,Q:M8,K:4,ETA1:2,ETA2:2,du:11,dv:5,RBGstrength:256}},EU=($)=>{if($>=12)return{encode:(Q)=>Q,decode:(Q)=>Q};let J=2**($-1);return{encode:(Q)=>((Q<<$)+M8/2)/M8,decode:(Q)=>Q*M8+J>>>$}},b$=($)=>wU($,EU($));function y8($,J){for(let Q=0;Q<I0;Q++)$[Q]=m$($[Q]+J[Q])}function FU($,J){for(let Q=0;Q<I0;Q++)$[Q]=m$($[Q]-J[Q])}function PU($,J,Q,q,X){let Z=m$(J*q*X+$*Q),G=m$($*q+J*Q);return{c0:Z,c1:G}}function yJ($,J){for(let Q=0;Q<I0/2;Q++){let q=AU[64+(Q>>1)];if(Q&1)q=-q;let{c0:X,c1:Z}=PU($[2*Q+0],$[2*Q+1],J[2*Q+0],J[2*Q+1],q);$[2*Q+0]=X,$[2*Q+1]=Z}return $}function PG($){let J=new Uint16Array(I0);for(let Q=0;Q<I0;){let q=$();if(q.length%3)throw new Error("SampleNTT: unaligned block");for(let X=0;Q<I0&&X+3<=q.length;X+=3){let Z=(q[X+0]>>0|q[X+1]<<8)&4095,G=(q[X+1]>>4|q[X+2]<<4)&4095;if(Z<M8)J[Q++]=Z;if(Q<I0&&G<M8)J[Q++]=G}}return J}function y$($,J,Q,q){let X=$(q*I0/4,J,Q),Z=new Uint16Array(I0),G=u$(X),Y=0;for(let U=0,W=0,z=0,M=0;U<G.length;U++){let O=G[U];for(let N=0;N<32;N++)if(z+=O&1,O>>=1,Y+=1,Y===q)M=z,z=0;else if(Y===2*q)Z[W++]=m$(M-z),z=0,Y=0}if(Y)throw new Error(`sampleCBD: leftover bits: ${Y}`);return Z}var fU=($)=>{let{K:J,PRF:Q,XOF:q,HASH512:X,ETA1:Z,ETA2:G,du:Y,dv:U}=$,W=b$(1),z=b$(U),M=b$(Y),O=g$("publicKey",bJ(b$(12),J),32),N=bJ(b$(12),J),j=g$("ciphertext",bJ(M,J),z),E=g$("seed",32,32);return{secretCoder:N,lengths:{secretKey:N.bytesLen,publicKey:O.bytesLen,cipherText:j.bytesLen},keygen:(D)=>{c(D,32,"seed");let L=new Uint8Array(33);L.set(D),L[32]=J;let V=X(L),[H,F]=E.decode(V),x=[],g=[];for(let B=0;B<J;B++)x.push(b8.encode(y$(Q,F,B,Z)));let v=q(H);for(let B=0;B<J;B++){let P=b8.encode(y$(Q,F,J+B,Z));for(let S=0;S<J;S++){let y=PG(v.get(S,B));y8(P,yJ(y,x[S]))}g.push(P)}v.clean();let C={publicKey:O.encode([g,H]),secretKey:N.encode(x)};return g0(H,F,x,g,L,V),C},encrypt:(D,L,V)=>{let[H,F]=O.decode(D),x=[];for(let S=0;S<J;S++)x.push(b8.encode(y$(Q,V,S,Z)));let g=q(F),v=new Uint16Array(I0),C=[];for(let S=0;S<J;S++){let y=y$(Q,V,J+S,G),K=new Uint16Array(I0);for(let A=0;A<J;A++){let I=PG(g.get(S,A));y8(K,yJ(I,x[A]))}y8(y,b8.decode(K)),C.push(y),y8(v,yJ(H[S],x[S])),g0(K)}g.clean();let B=y$(Q,V,2*J,G);y8(B,b8.decode(v));let P=W.decode(L);return y8(P,B),g0(H,x,v,B),j.encode([C,P])},decrypt:(D,L)=>{let[V,H]=j.decode(D),F=N.decode(L),x=new Uint16Array(I0);for(let g=0;g<J;g++)y8(x,yJ(F[g],b8.encode(V[g])));return FU(H,b8.decode(x)),g0(x,F,V),W.encode(H)}}};function K9($){let J=fU($),{HASH256:Q,HASH512:q,KDF:X}=$,{secretCoder:Z,lengths:G}=J,Y=g$("secretKey",G.secretKey,G.publicKey,32,32),U=32,W=64;return{info:{type:"ml-kem"},lengths:{...G,seed:64,msg:32,msgRand:32,secretKey:Y.bytesLen},keygen:(z=z9(64))=>{c(z,64,"seed");let{publicKey:M,secretKey:O}=J.keygen(z.subarray(0,32)),N=Q(M),j=Y.encode([O,M,N,z.subarray(32)]);return g0(O,N),{publicKey:M,secretKey:j}},getPublicKey:(z)=>{let[M,O,N,j]=Y.decode(z);return Uint8Array.from(O)},encapsulate:(z,M=z9(32))=>{c(z,G.publicKey,"publicKey"),c(M,32,"message");let O=z.subarray(0,384*$.K),N=Z.encode(Z.decode(wG(O)));if(!gJ(N,O))throw g0(N),new Error("ML-KEM.encapsulate: wrong publicKey modulus");g0(N);let j=q.create().update(M).update(Q(z)).digest(),E=J.encrypt(z,M,j.subarray(32,64));return g0(j.subarray(32)),{cipherText:E,sharedSecret:j.subarray(0,32)}},decapsulate:(z,M)=>{c(M,Y.bytesLen,"secretKey"),c(z,G.cipherText,"cipherText");let O=Y.bytesLen-96,N=O+32,j=Q(M.subarray(O/2,N));if(!gJ(j,M.subarray(N,N+32)))throw new Error("invalid secretKey: hash check failed");let[E,D,L,V]=Y.decode(M),H=J.decrypt(z,E),F=q.create().update(H).update(L).digest(),x=F.subarray(0,32),g=J.encrypt(D,H,F.subarray(32,64)),v=gJ(z,g),C=X.create({dkLen:32}).update(V).update(z).digest();return g0(H,g,!v?x:C),v?x:C}}}function kU($,J,Q){return _J.create({dkLen:$}).update(J).update(new Uint8Array([Q])).digest()}var O9={HASH256:HG,HASH512:CG,KDF:_J,XOF:FG,PRF:kU},gW=K9({...O9,...M9[512]}),D9=K9({...O9,...M9[768]}),bW=K9({...O9,...M9[1024]});function fG(){return{kemId:"ML-KEM-768",encapsulate:($)=>{let{cipherText:J,sharedSecret:Q}=D9.encapsulate($);return{sharedSecret:Q,encapsulation:J}},decapsulate:($,J)=>{return D9.decapsulate(J,$)}}}function kG($){globalThis.webaPqcKem=$}kG(fG());var SG=new Z9;window.GlobalSearch=SG;MG();SG.init();
